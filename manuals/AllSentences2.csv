dbms,filenr,sentence,KeySentence,Context,Parameter,Formula,Condition
pg,1,Performance Optimization - PostgreSQL wiki,,,,,
pg,1,"Want to edit, but don't see an edit button when logged in?",,,,,
pg,1,Click here,,,,,
pg,1,,,,,,
pg,1,Performance Optimization,,,,,
pg,1,From PostgreSQL wiki,,,,,
pg,1,"Jump to: navigation, search",,,,,
pg,1,Contents,,,,,
pg,1,1 How to Effectively Ask Questions Regarding Performance on Postgres Lists,,,,,
pg,1,2 General Setup and Optimization,,,,,
pg,1,3 Critical maintenance for performance,,,,,
pg,1,4 Database architecture,,,,,
pg,1,5 Database Hardware Selection and Setup,,,,,
pg,1,6 Benchmark Workloads,,,,,
pg,1,How to Effectively Ask Questions Regarding Performance on Postgres Lists,,,,,
pg,1,Slow_Query_Questions,,,,,
pg,1,General Setup and Optimization,,,,,
pg,1,"Tuning Your PostgreSQL Server by Greg Smith, Robert Treat, and Christopher Browne",,,,,
pg,1,PostgreSQL Query Profiler in dbForge Studio by Devart,,,,,
pg,1,Performance Tuning PostgreSQL by Frank Wiles,,,,,
pg,1,QuickStart Guide to Tuning,,,,,
pg,1,PostgreSQL by Christopher Browne,,,,,
pg,1,Performance Tuning by Josh Berkus and Shridhar Daithankar,,,,,
pg,1,Replacing Slow Loops in PostgreSQL by Joel Burton,,,,,
pg,1,PostgreSQL Hardware Performance Tuning by Bruce Momjian,,,,,
pg,1,The effects of data fragmentation in a mixed load database by Dmitry Dvoinikov,,,,,
pg,1,Understanding Postgres Performance by Craig Kerstiens,,,,,
pg,1,More on Postgres Performance by Craig Kerstiens,,,,,
pg,1,Faster PostgreSQL counting by Joe Nelson,,,,,
pg,1,Row count estimates in Postgres by David Conlin,,,,,
pg,1,Index-only scans in Postgres by David Conlin,,,,,
pg,1,Optimize PostgreSQL Server Performance Through Configuration by Tom Swartz,,,,,
pg,1,Performance courses are available from a number of companies,,,,,
pg,1,Check events and trainings for further details,,,,,
pg,1,,,,,,
pg,1,Critical maintenance for performance,,,,,
pg,1,"Introduction to VACUUM, ANALYZE, EXPLAIN, and COUNT by Jim Nasby",,,,,
pg,1,,,,,,
pg,1,VACUUM FULL and why you should avoid it,,,,,
pg,1,Planner Statistics,,,,,
pg,1,Using EXPLAIN,,,,,
pg,1,Logging Difficult Queries,,,,,
pg,1,Logging Checkpoints,,,,,
pg,1,Bulk Loading and Restores,,,,,
pg,1,Performance Analysis Tools by Craig Ringer,,,,,
pg,1,Database architecture,,,,,
pg,1,Limiting and prioritizing user/query/database resource usage by Craig Ringer,,,,,
pg,1,Prioritizing databases by separating into multiple clusters by Craig Ringer,,,,,
pg,1,Clustering,,,,,
pg,1,Shared Storage,,,,,
pg,1,Database Hardware Selection and Setup,,,,,
pg,1,Database Hardware,,,,,
pg,1,Reliable Writes,,,,,
pg,1,Benchmark Workloads,,,,,
pg,1,Category:Benchmarking,,,,,
pg,1,"Retrieved from ""https://wiki",,,,,
pg,1,postgresql,,,,,
pg,1,org/index,,,,,
pg,1,"php?title=Performance_Optimization&oldid=35388""",,,,,
pg,1,Categories: AdministrationPerformanceBenchmarkingGeneral articles and guides,,,,,
pg,1,Navigation menu,,,,,
pg,1,Views,,,,,
pg,1,Page,,,,,
pg,1,Discussion,,,,,
pg,1,View source,,,,,
pg,1,History,,,,,
pg,1,Personal tools,,,,,
pg,1,Log in,,,,,
pg,1,Navigation,,,,,
pg,1,Main Page,,,,,
pg,1,Random page,,,,,
pg,1,Recent changes,,,,,
pg,1,Help,,,,,
pg,1,Search,,,,,
pg,1,Tools,,,,,
pg,1,What links here,,,,,
pg,1,Related changes,,,,,
pg,1,Special pages,,,,,
pg,1,Printable version,,,,,
pg,1,Permanent link,,,,,
pg,1,Page information,,,,,
pg,1,"This page was last edited on 29 September 2020, at 13:37",,,,,
pg,1,,,,,,
pg,1,Privacy policy,,,,,
pg,1,About PostgreSQL wiki,,,,,
pg,1,Disclaimers,,,,,
pg,2,Tuning Your PostgreSQL Server - PostgreSQL wiki,,,,,
pg,2,"Want to edit, but don't see an edit button when logged in?",,,,,
pg,2,Click here,,,,,
pg,2,,,,,,
pg,2,Tuning Your PostgreSQL Server,,,,,
pg,2,From PostgreSQL wiki,,,,,
pg,2,"Jump to: navigation, search",,,,,
pg,2,"by Greg Smith, Robert Treat, and Christopher Browne",,,,,
pg,2,PostgreSQL ships with a basic configuration tuned for wide compatibility rather than performance,,,,,
pg,2,Odds are good the default parameters are very undersized for your system,,,,,
pg,2,"Rather than get dragged into the details of everything you should eventually know (which you can find if you want it at the GUC Three Hour Tour), here we're going to sprint through a simplified view of the basics, with a look at the most common things people new to PostgreSQL aren't aware of",,,,,
pg,2,,,,,,
pg,2,You should click on the name of the parameter in each section to jump to the relevant documentation in the PostgreSQL manual for more details after reading the quick intro here,,,,,
pg,2,,,,,,
pg,2,"There is also additional information available about many of these parameters, as well as a list of parameters you shouldn't adjust, at Server Configuration Tuning",,,,,
pg,2,,,,,,
pg,2,Background Information on Configuration Settings,,,,,
pg,2,"PostgreSQL settings can be manipulated a number of different ways, but generally you will want them changed in your configuration files, either directly or, starting with PostgreSQL 9.4, through ALTER SYSTEM",,,,,
pg,2,"The specific options available change from release to release, the definitive list is in the source code at src/backend/utils/misc/guc",,,,,
pg,2,c for your version of PostgreSQL (but the pg_settings view works well enough for most purposes),,,,,
pg,2,,,,,,
pg,2,The types of settings,,,,,
pg,2,"There are several different types of configuration settings, divided up based on the possible inputs they take",,,,,
pg,2,"Boolean: true, false, on, off",,,,,
pg,2,Integer: Whole numbers,,,,,
pg,2,-2112,,,,,
pg,2,Float: Decimal values (21.12),,,,,
pg,2,"Memory / Disk: Integers (2112) or ""computer units"" (512MB, 2112GB)",,,,,
pg,2,,,,,,
pg,2,Avoid integers--you need to know the underlying unit to figure out what they mean,,,,,
pg,2,,,,,,
pg,2,"Time: ""Time units"" aka d,m,s (30s)",,,,,
pg,2,,,,,,
pg,2,Sometimes the unit is left out; don't do that,,,,,
pg,2,Strings: Single quoted text ('pg_log'),,,,,
pg,2,"ENUMs: Strings, but from a specific list ('WARNING', 'ERROR')",,,,,
pg,2,"Lists: A comma separated list of strings ('""$user"",public,tsearch2)",,,,,
pg,2,When they take effect,,,,,
pg,2,"PostgreSQL settings have different levels of flexibility for when they can be changed, usually related to internal code restrictions",,,,,
pg,2,The complete list of levels is:,,,,,
pg,2,Postmaster: requires restart of server,,,,,
pg,2,"Sighup: requires a HUP of the server, either by kill -HUP (usually -1), pg_ctl reload, or SELECT pg_reload_conf();",,,,,
pg,2,"User: can be set within individual sessions, take effect only within that session",,,,,
pg,2,"Internal: set at compile time, can't be changed, mainly for reference",,,,,
pg,2,Backend: settings which must be set before session start,,,,,
pg,2,Superuser: can be set at runtime for the server by superusers,,,,,
pg,2,"Most of the time you'll only use the first of these, but the second can be useful if you have a server you don't want to take down, while the user session settings can be helpful for some special situations",,,,,
pg,2,,,,,,
pg,2,"You can tell which type of parameter a setting is by looking at the ""context"" field in the pg_settings view",,,,,
pg,2,,,,,,
pg,2,Important notes about configuration files,,,,,
pg,2,Command line options override postgresql,,,,,
pg,2,auto,,,,,
pg,2,conf settings override postgresql,,,,,
pg,2,conf settings,,,,,
pg,2,,,,,,
pg,2,"If the same setting is listed multiple times, the last one wins",,,,,
pg,2,,,,,,
pg,2,You can figure out the postgresql,,,,,
pg,2,conf location with SHOW config_file,,,,,
pg,2,,,,,,
pg,2,It will generally be $PGDATA/postgresql,,,,,
pg,2,"conf (SHOW data_directory), but watch out for symbolic links, postmaster",,,,,
pg,2,opts and other trickiness,,,,,
pg,2,Lines with # are comments and have no effect,,,,,
pg,2,"For a new database, this will mean the setting is using the default, but on running systems this may not hold true! Changes to the configuration files do not take effect without a reload/restart, so it's possible for the system to be running something different from what is in the file",,,,,
pg,2,,,,,,
pg,2,Viewing the current settings,,,,,
pg,2,Look at the configuration files,,,,,
pg,2,,,,,,
pg,2,This is generally not definitive!,,,,,
pg,2,"SHOW ALL, SHOW <setting> will show you the current value of the setting",,,,,
pg,2,,,,,,
pg,2,Watch out for session specific changes,,,,,
pg,2,SELECT * FROM pg_settings will label session specific changes as locally modified,,,,,
pg,2,Tuning tools,,,,,
pg,2,"dbForge Studio for PostgreSQL helps to identify productivity bottlenecks, and provides PostgreSQL performance tuning",,,,,
pg,2,,,,,,
pg,2,The postgresqltuner,,,,,
pg,2,pl script can analyze the configuration and make tuning recommendations,,,,,
pg,2,,,,,,
pg,2,PgBadger analyse PostgreSQL logs to generate performance reports,,,,,
pg,2,,,,,,
pg,2,pgMustard provides tuning advice based on EXPLAIN ANALYZE output,,,,,
pg,2,,,,,,
pg,2,listen_addresses,,,,,
pg,2,"By default, PostgreSQL only responds to connections from the local host",,,,,
pg,2,,,,,,
pg,2,"If you want your server to be accessible from other systems via standard TCP/IP networking, you need to change listen_addresses from its default",,,,,
pg,2,,,,,,
pg,2,The usual approach is to set it to listen to all addresses like this:,,,,,
pg,2,listen_addresses = '*',,,,,
pg,2,And then control who can and cannot connect via the pg_hba,,,,,
pg,2,conf file,,,,,
pg,2,,,,,,
pg,2,max_connections,,,,,
pg,2,max_connections sets exactly that:,,,,,
pg,2,the maximum number of client connections allowed,,,,,
pg,2,,,,,,
pg,2,"This is very important to some of the below parameters (particularly work_mem) because there are some memory resources that are or can be allocated on a per-client basis, so the maximum number of clients suggests the maximum possible memory use",,,,,
pg,2,,,,,,
pg,2,"Generally, PostgreSQL on good hardware can support a few hundred connections",,,,,
pg,2,,,,,,
pg,2,"If you want to have thousands instead, you should consider using connection pooling software to reduce the connection overhead",,,,,
pg,2,,,,,,
pg,2,shared_buffers,,,,,
pg,2,The shared_buffers configuration parameter determines how much memory is dedicated to PostgreSQL to use for caching data,,,,,
pg,2,,,,,,
pg,2,"One reason the defaults are low is because on some platforms (like older Solaris versions and SGI), having large values requires invasive action like recompiling the kernel",,,,,
pg,2,,,,,,
pg,2,"Even on a modern Linux system, the stock kernel will likely not allow setting shared_buffers to over 32MB without adjusting kernel settings first",1,,shared_buffers,P1 < 32MB,
pg,2,,,,,,
pg,2,"(PostgreSQL 9.4 and later use a different shared memory mechanism, so kernel settings will usually not have to be adjusted there",,,,,
pg,2,,,,,,
pg,2,"If you have a system with 1GB or more of RAM, a reasonable starting value for shared_buffers is 1/4 of the memory in your system",1,,shared_buffers,P1 = 0.25 * memory,Memory >= 1GB
pg,2,,,,,,
pg,2,If you have less RAM you'll have to account more carefully for how much RAM the OS is taking up; closer to 15% is more typical there,1,202,shared_buffers,P1 = 0.15 * memory,Memory < 1GB
pg,2,,,,,,
pg,2,"There are some workloads where even larger settings for shared_buffers are effective, but given the way PostgreSQL also relies on the operating system cache, it's unlikely you'll find using more than 40% of RAM to work better than a smaller amount",1,,shared_buffers,P1 < 0.4 * memory,
pg,2,,,,,,
pg,2,"Be aware that if your system or PostgreSQL build is 32-bit, it might not be practical to set shared_buffers above 2 ~ 2.5GB",1,,shared_buffers,P1 < 2.5GB,Bits = 32
pg,2,See this blog post for details,,,,,
pg,2,,,,,,
pg,2,"Note that on Windows, large values for shared_buffers aren't as effective, and you may find better results keeping it relatively low and using the OS cache more instead",,,,,
pg,2,,,,,,
pg,2,On Windows the useful range is 64MB to 512MB,1,211,shared_buffers,P1 < 512MB,OS = Windows
pg,2,,,,,,
pg,2,Changing this setting requires restarting the database,,,,,
pg,2,"Also, this is a hard allocation of memory; the whole thing gets allocated out of virtual memory when the database starts",,,,,
pg,2,,,,,,
pg,2,PostgreSQL 9.2 or earlier,,,,,
pg,2,"If you are running PostgreSQL 9.2 or earlier, it's likely that in order to increase the value of shared_buffers you will have to increase the amount of memory your operating system allows you to allocate to a single shared memory segment",,,,,
pg,2,,,,,,
pg,2,"On UNIX-like systems, if you set it above what's supported, you'll get a message like this:",,,,,
pg,2,"IpcMemoryCreate: shmget(key=5432001, size=415776768, 03600) failed: Invalid argument",,,,,
pg,2,This error usually means that PostgreSQL's request for a shared memory,,,,,
pg,2,segment exceeded your kernel's SHMMAX parameter,,,,,
pg,2,You can either,,,,,
pg,2,reduce the request size or reconfigure the kernel with larger SHMMAX,,,,,
pg,2,,,,,,
pg,2,"To reduce the request size (currently 415776768 bytes), reduce",,,,,
pg,2,PostgreSQL's shared_buffers parameter (currently 50000) and/or,,,,,
pg,2,its max_connections parameter (currently 12),,,,,
pg,2,,,,,,
pg,2,See Managing Kernel Resources for details on how to correct this,,,,,
pg,2,,,,,,
pg,2,effective_cache_size,,,,,
pg,2,"effective_cache_size should be set to an estimate of how much memory is available for disk caching by the operating system and within the database itself, after taking into account what's used by the OS itself and other applications",,,,,
pg,2,,,,,,
pg,2,"This is a guideline for how much memory you expect to be available in the OS and PostgreSQL buffer caches, not an allocation!",,,,,
pg,2,This value is used only by the PostgreSQL query planner to figure out whether plans it's considering would be expected to fit in RAM or not,,,,,
pg,2,,,,,,
pg,2,"If it's set too low, indexes may not be used for executing queries the way you'd expect",,,,,
pg,2,,,,,,
pg,2,"The setting for shared_buffers is not taken into account here--only the effective_cache_size value is, so it should include memory dedicated to the database too",,,,,
pg,2,,,,,,
pg,2,"Setting effective_cache_size to 1/2 of total memory would be a normal conservative setting, and 3/4 of memory is a more aggressive but still reasonable amount",1,,effective_cache_size;effective_cache_size,P >= 0.5 * memory; P <= 0.75 * memory,
pg,2,,,,,,
pg,2,You might find a better estimate by looking at your operating system's statistics,,,,,
pg,2,"On UNIX-like systems, add the free+cached numbers from free or top to get an estimate",,,,,
pg,2,"On Windows see the ""System Cache"" size in the Windows Task Manager's Performance tab",,,,,
pg,2,,,,,,
pg,2,Changing this setting does not require restarting the database (HUP is enough),,,,,
pg,2,,,,,,
pg,2,checkpoint_segments checkpoint_completion_target,,,,,
pg,2,Note: This applies to PostgreSQL 9.4 and below,,,,,
pg,2,PostgreSQL 9.5 introduced min_wal_size and max_wal_size configuration parameters and removed checkpoint_segments,,,,,
pg,2,"Please review the release notes and the documentation on min_wal_size, max_wal_size and WAL configuration",,,,,
pg,2,,,,,,
pg,2,PostgreSQL writes new transactions to the database in files called WAL segments that are 16MB in size,,,,,
pg,2,,,,,,
pg,2,"Every time checkpoint_segments worth of these files have been written, by default 3, a checkpoint occurs",,,,,
pg,2,,,,,,
pg,2,"Checkpoints can be resource intensive, and on a modern system doing one every 48MB will be a serious performance bottleneck",,,,,
pg,2,,,,,,
pg,2,Setting checkpoint_segments to a much larger value improves that,,,,,
pg,2,,,,,,
pg,2,"Unless you're running on a very small configuration, you'll almost certainly be better setting this to at least 10, which also allows usefully increasing the completion target",1,263,checkpoint_segments,P >= 10,
pg,2,,,,,,
pg,2,"For more write-heavy systems, values from 32 (checkpoint every 512MB) to 256 (every 4GB) are popular nowadays",1,263,checkpoint_segments;checkpoint_segments,P >= 32; P <= 256,
pg,2,,,,,,
pg,2,"Very large settings use a lot more disk and will cause your database to take longer to recover, so make sure you're comfortable with both those things before large increases",,,,,
pg,2,,,,,,
pg,2,Normally the large settings (>64/1GB) are only used for bulk loading,1,263,checkpoint_segments,P <= 64,Not bulkloading
pg,2,,,,,,
pg,2,"Note that whatever you choose for the segments, you'll still get a checkpoint at least every 5 minutes unless you also increase checkpoint_timeout (which isn't necessary on most systems)",,,,,
pg,2,,,,,,
pg,2,Checkpoint writes are spread out a bit while the system starts working toward the next checkpoint,,,,,
pg,2,,,,,,
pg,2,"You can spread those writes out further, lowering the average write overhead, by increasing the checkpoint_completion_target parameter to its useful maximum of 0.9 (aim to finish by the time 90% of the next checkpoint is here) rather than the default of 0.5 (aim to finish when the next one is 50% done)",1,,checkpoint_completion_target,P = 0.9,
pg,2,,,,,,
pg,2,A setting of 0 gives something similar to the behavior of obsolete versions,1,277,checkpoint_completion_target,P > 0,
pg,2,,,,,,
pg,2,The main reason the default isn't just 0.9 is that you need a larger checkpoint_segments value than the default for broader spreading to work well,,,,,
pg,2,,,,,,
pg,2,"For lots more information on checkpoint tuning, see Checkpoints and the Background Writer (where you'll also learn why tuning the background writer parameters is challenging to do usefully)",,,,,
pg,2,,,,,,
pg,2,autovacuum,,,,,
pg,2,The autovacuum process takes care of several maintenance chores inside your database that you really need,,,,,
pg,2,"Generally, if you think you need to turn regular vacuuming off because it's taking too much time or resources, that means you're doing it wrong",,,,,
pg,2,,,,,,
pg,2,"The answer to almost all vacuuming problems is to vacuum more often, not less, so that each individual vacuum operation has less to clean up",,,,,
pg,2,,,,,,
pg,2,"However, it's acceptable to disable autovacuum for short periods of time, for instance when bulk loading large amounts of data",1,,autovacuum,P = off,Bulk loading
pg,2,,,,,,
pg,2,Logging,,,,,
pg,2,There are many things you can log that may or may not be important to you,,,,,
pg,2,"You should investigate the documentation on all of the options, but here are some tips & tricks to get you started:",,,,,
pg,2,log_destination & log_directory (& log_filename):,,,,,
pg,2,What you set these options to is not as important as knowing they can give you hints to determine where your database server is logging to,,,,,
pg,2,Best practice would be to try and make this as similar as possible across your servers,,,,,
pg,2,,,,,,
pg,2,"Note that in some cases, the init script starting your database may be customizing the log destination in the command line used to start the database, overriding what's in the configuration files (and making it so you'll get different behavior if you run pg_ctl manually instead of using the init script)",,,,,
pg,2,,,,,,
pg,2,log_min_error_statement:,,,,,
pg,2,"You should probably make sure this is at least on error, so that you will see any SQL commands which cause an error",,,,,
pg,2,should be the default on recent versions,,,,,
pg,2,,,,,,
pg,2,log_min_duration_statement:,,,,,
pg,2,"Not necessary for everyday use, but this can generate logs of ""slow queries"" on your system",,,,,
pg,2,,,,,,
pg,2,log_line_prefix:,,,,,
pg,2,Appends information to the start of each line,,,,,
pg,2,"A good generic recommendation is '%t:%r:%u@%d:[%p]: ' : %t=timestamp, %u=db user name, %r=host connecting from, %d=database connecting to, %p=PID of connection",,,,,
pg,2,"It may not be obvious what the PID is useful at first, but it can be vital for trying to troubleshoot problems in the future so better to put in the logs from the start",,,,,
pg,2,,,,,,
pg,2,log_statement:,,,,,
pg,2,"Choices of none, ddl, mod, all",,,,,
pg,2,Using all or mod in production would introduce overhead of the logging,1,314,log_statement;log_statement,P != all; P != mod,
pg,2,"The performance penalties for ""all"" would be significant if the workload is select intensive and less significant for write-intensive workloads",,,,,
pg,2,Turning the synchronous_commit to off would cause a more severe performance regression,1,,synchronous_commit,P != off,
pg,2,"DDL can sometime be helpful to discover rogue changes made outside of your recommend processes, by ""cowboy DBAs"" for example",,,,,
pg,2,,,,,,
pg,2,"There are also external tools such pgbadger that can analyze Postgres logs, see Monitoring for a comprehensive list",,,,,
pg,2,,,,,,
pg,2,default_statistics_target,,,,,
pg,2,The database software collects statistics about each of the tables in your database to decide how to execute queries against it,,,,,
pg,2,,,,,,
pg,2,If you're not getting good execution query plans particularly on larger (or more varied) tables you should increase default_statistics_target then ANALYZE the database again (or wait for autovacuum to do it for you),,,,,
pg,2,,,,,,
pg,2,Increasing the default_statistics_target may be useful but the default value shipped with PostgreSQL is a reasonable starting point,,,,,
pg,2,,,,,,
pg,2,PostgreSQL 8.3 and earlier,,,,,
pg,2,In PostgreSQL 8.3 and earlier increasing the supplied default_statistics_target would often greatly improve query plans,,,,,
pg,2,The starting default_statistics_target value was raised from 10 to 100 in PostgreSQL 8.4,,,,,
pg,2,"The maximum value for the parameter was also increased from 1000 to 10,000 in 8.4",1,,default_statistics_target,P <= 10000,
pg,2,,,,,,
pg,2,work_mem,,,,,
pg,2,"If you do a lot of complex sorts, and have a lot of memory, then increasing the work_mem parameter allows PostgreSQL to do larger in-memory sorts which, unsurprisingly, will be faster than disk-based equivalents",,,,,
pg,2,,,,,,
pg,2,"This size is applied to each and every sort done by each user, and complex queries can use multiple working memory sort buffers",,,,,
pg,2,"Set it to 50MB, and have 30 users submitting queries, and you are soon using 1.5GB of real memory",,,,,
pg,2,"Furthermore, if a query involves doing merge sorts of 8 tables, that requires 8 times work_mem",,,,,
pg,2,You need to consider what you set max_connections to in order to size this parameter correctly,,,,,
pg,2,"This is a setting where data warehouse systems, where users are submitting very large queries, can readily make use of many gigabytes of memory",,,,,
pg,2,,,,,,
pg,2,"log_temp_files can be used to log sorts, hashes, and temp files which can be useful in figuring out if sorts are spilling to disk instead of fitting in memory",,,,,
pg,2,You can see sorts spilling to disk using EXPLAIN ANALYZE plans as well,,,,,
pg,2,"For example, if you see a line like Sort Method:",,,,,
pg,2,external merge,,,,,
pg,2,"Disk: 7526kB in the output of EXPLAIN ANALYZE, a work_mem of at least 8MB would keep the intermediate data in memory and likely improve the query response time (although it may take substantially more than 8MB to do the sort entirely in memory, as data on disk is stored in a more compact format)",,,,,
pg,2,,,,,,
pg,2,maintenance_work_mem,,,,,
pg,2,"Specifies the maximum amount of memory to be used by maintenance operations, such as VACUUM, CREATE INDEX, and ALTER TABLE ADD FOREIGN KEY",,,,,
pg,2,It defaults to 64 megabytes (64MB) since version 9.4,,,,,
pg,2,"Since only one of these operations can be executed at a time by a database session, and an installation normally doesn't have many of them running concurrently, it's safe to set this value significantly larger than work_mem",1,,maintenance_work_mem,P > work_mem,
pg,2,Larger settings might improve performance for vacuuming and for restoring database dumps,,,,,
pg,2,,,,,,
pg,2,wal_sync_method wal_buffers,,,,,
pg,2,"After every transaction, PostgreSQL forces a commit to disk out to its write-ahead log",,,,,
pg,2,"This can be done a couple of ways, and on some platforms other options than the shipped wal_sync_method are considerably faster than the conservative default",,,,,
pg,2,,,,,,
pg,2,"open_sync is the most common non-default setting switched to, on platforms that support it but default to one of the fsync methods",1,358,wal_sync_method,P = open_sync,
pg,2,See Tuning PostgreSQL WAL Synchronization for a lot of background on this topic,,,,,
pg,2,"Note that open_sync writing is buggy on some platforms (such as Linux), and you should (as always) do plenty of tests under a heavy write load to make sure that you haven't made your system less stable with this change",,,,,
pg,2,,,,,,
pg,2,Reliable Writes contains more information on this topic,,,,,
pg,2,,,,,,
pg,2,"wal_buffers defaults to 1/32 of the size of shared_buffers, with an upper limit of 16MB (reached when shared_buffers=512MB)",,,,,
pg,2,,,,,,
pg,2,Adjustments to the default are required much less often than in earlier PostgreSQL releases,,,,,
pg,2,,,,,,
pg,2,PostgreSQL 9.0 and earlier,,,,,
pg,2,Linux kernels starting with version 2.6.33 cause PostgreSQL versions before 9.0.2 to default to wal_sync_method=open_datasync; before kernel 2.6.32 the default picked was always fdatasync,,,,,
pg,2,,,,,,
pg,2,This can cause a significant performance decrease when combined with small writes and/or small values for wal_buffers,,,,,
pg,2,,,,,,
pg,2,PostgreSQL versions starting with 9.0.2 again default wal_sync_method to fdatasync when running on Linux,,,,,
pg,2,,,,,,
pg,2,"On PostgreSQL 9.0 and earlier, increasing wal_buffers from its tiny default of a small number of kilobytes is helpful for write-heavy systems",,,,,
pg,2,,,,,,
pg,2,"Benchmarking generally suggests that just increasing to 1MB is enough for some large systems, and given the amount of RAM in modern servers allocating a full WAL segment (16MB, the useful upper-limit here) is reasonable",1,377,wal_buffers,P <= 16MB,
pg,2,,,,,,
pg,2,Changing wal_buffers requires a database restart,,,,,
pg,2,,,,,,
pg,2,constraint_exclusion,,,,,
pg,2,constraint_exclusion now defaults to a new choice: partition,,,,,
pg,2,This will only enable constraint exclusion for partitioned tables which is the right thing to do in nearly all cases,,,,,
pg,2,,,,,,
pg,2,max_prepared_transactions,,,,,
pg,2,This setting is used for managing 2 phase commit,,,,,
pg,2,"If you do not use two phase commit (and if you don't know what it is, you don't use it), then you can set this value to 0",1,387,max_prepared_transactions,P = 0,
pg,2,That will save a little bit of shared memory,,,,,
pg,2,"For database systems with a large number (at least hundreds) of concurrent connections, be aware that this setting also affects the number of available lock-slots in pg_locks, so you may want to leave it at the default setting",,,,,
pg,2,,,,,,
pg,2,There is a formula for how much memory gets allocated in the docs and in the default postgresql,,,,,
pg,2,conf,,,,,
pg,2,,,,,,
pg,2,Changing max_prepared_transactions requires a server restart,,,,,
pg,2,,,,,,
pg,2,synchronous_commit,,,,,
pg,2,PostgreSQL can only safely use a write cache if it has a battery backup,,,,,
pg,2,See WAL reliability for an essential introduction to this topic,,,,,
pg,2,,,,,,
pg,2,"No, really; go read that right now, it's vital to understand that if you want your database to work right",,,,,
pg,2,,,,,,
pg,2,You may be limited to approximately 100 transaction commits per second per client in situations where you don't have such a durable write cache (and perhaps only 500/second even with lots of clients),,,,,
pg,2,,,,,,
pg,2,"For situations where a small amount of data loss is acceptable in return for a large boost in how many updates you can do to the database per second, consider switching synchronous commit off",1,,synchronous_commit,P = off,
pg,2,"This is particularly useful in the situation where you do not have a battery-backed write cache on your disk controller, because you could potentially get thousands of commits per second instead of just a few hundred",,,,,
pg,2,,,,,,
pg,2,"For obsolete versions of PostgreSQL, you may find people recommending that you set fsync=off to speed up writes on busy systems",,,,,
pg,2,,,,,,
pg,2,This is dangerous--a power loss could result in your database getting corrupted and not able to start again,1,409,fsync,P != off,
pg,2,,,,,,
pg,2,"Synchronous commit doesn't introduce the risk of corruption, which is really bad, just some risk of data loss",,,,,
pg,2,,,,,,
pg,2,random_page_cost,,,,,
pg,2,"This setting suggests to the optimizer how long it will take your disks to seek to a random disk page, as a multiple of how long a sequential read (with a cost of 1.0) takes",,,,,
pg,2,"If you have particularly fast disks, as commonly found with",,,,,
pg,2,"RAID arrays of SCSI disks, it may be appropriate to lower random_page_cost, which will encourage the query optimizer to use random access index scans",,,,,
pg,2,Some feel that 4.0 is always too large on current hardware; it's not unusual for administrators to standardize on always setting this between 2.0 and 3.0 instead,1,418,random_page_cost;random_page_cost,P >= 2.0; P <= 3.0,
pg,2,,,,,,
pg,2,In some cases that behavior is a holdover from earlier PostgreSQL versions where having random_page_cost too high was more likely to screw up plan optimization than it is now (and setting at or below 2.0 was regularly necessary),,,,,
pg,2,Since these cost estimates are just that--estimates--it shouldn't hurt to try lower values,,,,,
pg,2,,,,,,
pg,2,But this not where you should start to search for plan problems,,,,,
pg,2,Note that random_page_cost is pretty far down this list (at the end in fact),,,,,
pg,2,"If you are getting bad plans, this shouldn't be the first thing you look at, even though lowering this value may be effective",,,,,
pg,2,"Instead, you should start by making sure autovacuum is working properly, that you are collecting enough statistics, and that you have correctly sized the memory parameters for your server--all the things gone over above",,,,,
pg,2,,,,,,
pg,2,"After you've done all those much more important things, if you're still getting bad plans then you should see if lowering random_page_cost is still useful",,,,,
pg,2,,,,,,
pg,2,"Retrieved from ""https://wiki",,,,,
pg,2,postgresql,,,,,
pg,2,org/index,,,,,
pg,2,"php?title=Tuning_Your_PostgreSQL_Server&oldid=35462""",,,,,
pg,2,Categories: AdministrationPerformance,,,,,
pg,2,Navigation menu,,,,,
pg,2,Views,,,,,
pg,2,Page,,,,,
pg,2,Discussion,,,,,
pg,2,View source,,,,,
pg,2,History,,,,,
pg,2,Personal tools,,,,,
pg,2,Log in,,,,,
pg,2,Navigation,,,,,
pg,2,Main Page,,,,,
pg,2,Random page,,,,,
pg,2,Recent changes,,,,,
pg,2,Help,,,,,
pg,2,Search,,,,,
pg,2,Tools,,,,,
pg,2,What links here,,,,,
pg,2,Related changes,,,,,
pg,2,Special pages,,,,,
pg,2,Printable version,,,,,
pg,2,Permanent link,,,,,
pg,2,Page information,,,,,
pg,2,"This page was last edited on 14 October 2020, at 11:57",,,,,
pg,2,,,,,,
pg,2,Privacy policy,,,,,
pg,2,About PostgreSQL wiki,,,,,
pg,2,Disclaimers,,,,,
pg,3,How to tune PostgreSQL for memory | EDB,,,,,
pg,3,Skip to main content,,,,,
pg,3,Barrio main menu,,,,,
pg,3,Why EDB?,,,,,
pg,3,EDB Supercharges PostgreSQL,,,,,
pg,3,wrapper,,,,,
pg,3,Use Cases,,,,,
pg,3,Oracle Migration,,,,,
pg,3,Hybrid Cloud,,,,,
pg,3,High Availability,,,,,
pg,3,Solutions for,,,,,
pg,3,IT Professionals,,,,,
pg,3,Database Architects,,,,,
pg,3,Developers,,,,,
pg,3,Database Admins,,,,,
pg,3,Products,,,,,
pg,3,Products Overview,,,,,
pg,3,wrapper,,,,,
pg,3,Databases,,,,,
pg,3,EDB Postgres Advanced Server,,,,,
pg,3,PostgreSQL,,,,,
pg,3,wrapper,,,,,
pg,3,Tools,,,,,
pg,3,Postgres Enterprise Manager,,,,,
pg,3,Backup and Recovery Tool,,,,,
pg,3,Failover Manager,,,,,
pg,3,Open Source Projects,,,,,
pg,3,Migration Portal,,,,,
pg,3,Migration Toolkit,,,,,
pg,3,Replication Server,,,,,
pg,3,Services,,,,,
pg,3,Services Overview,,,,,
pg,3,Training,,,,,
pg,3,Getting Started,,,,,
pg,3,PostgreSQL Optimization,,,,,
pg,3,Enterprise Strategy,,,,,
pg,3,Custom Services,,,,,
pg,3,Support,,,,,
pg,3,Customer Support Portal,,,,,
pg,3,Support Overview,,,,,
pg,3,PostgreSQL Technical Support,,,,,
pg,3,Remote DBA Service,,,,,
pg,3,Cloud DBA Service,,,,,
pg,3,Technical Account Management,,,,,
pg,3,Resources,,,,,
pg,3,Docs,,,,,
pg,3,wrapper,,,,,
pg,3,Blog,,,,,
pg,3,Webinars,,,,,
pg,3,PostgreSQL Tutorials,,,,,
pg,3,Training,,,,,
pg,3,Partners,,,,,
pg,3,White Papers,,,,,
pg,3,Customer Stories,,,,,
pg,3,Product Compatibility,,,,,
pg,3,Plans,,,,,
pg,3,Barrio utility menu,,,,,
pg,3,Contact,,,,,
pg,3,Dashboard,,,,,
pg,3,Sign In,,,,,
pg,3,Downloads,,,,,
pg,3,Barrio Mobile Menu,,,,,
pg,3,Why EDB?,,,,,
pg,3,EDB Supercharges PostgreSQL,,,,,
pg,3,Use Cases,,,,,
pg,3,Oracle Migration,,,,,
pg,3,Hybrid Cloud,,,,,
pg,3,High Availability,,,,,
pg,3,Solutions for,,,,,
pg,3,IT Professionals,,,,,
pg,3,Database Architects,,,,,
pg,3,Developers,,,,,
pg,3,Database Admins,,,,,
pg,3,Products,,,,,
pg,3,Products Overview,,,,,
pg,3,Databases,,,,,
pg,3,EDB Postgres Advanced Server,,,,,
pg,3,PostgreSQL,,,,,
pg,3,Tools,,,,,
pg,3,Postgres Enterprise Manager,,,,,
pg,3,Backup and Recovery Tool,,,,,
pg,3,Failover Manager,,,,,
pg,3,Open Source Projects,,,,,
pg,3,Migration Portal,,,,,
pg,3,Migration Toolkit,,,,,
pg,3,Replication Server,,,,,
pg,3,Services,,,,,
pg,3,Services Overview,,,,,
pg,3,Training,,,,,
pg,3,Getting Started,,,,,
pg,3,Postgres Optimization,,,,,
pg,3,Enterprise Strategy,,,,,
pg,3,Custom Services,,,,,
pg,3,Support,,,,,
pg,3,Support Overview,,,,,
pg,3,PostgreSQL Technical Support,,,,,
pg,3,Remote DBA Service,,,,,
pg,3,Cloud DBA Service,,,,,
pg,3,Technical Account Management,,,,,
pg,3,Resources,,,,,
pg,3,Docs,,,,,
pg,3,Blog,,,,,
pg,3,Webinars,,,,,
pg,3,Postgres Tutorials,,,,,
pg,3,Training,,,,,
pg,3,Partners,,,,,
pg,3,White Papers,,,,,
pg,3,Customer Stories,,,,,
pg,3,Product Compatibility,,,,,
pg,3,Plans,,,,,
pg,3,Downloads,,,,,
pg,3,Contact,,,,,
pg,3,Sign In,,,,,
pg,3,Dashboard,,,,,
pg,3,PostgreSQL Tutorials,,,,,
pg,3,Back,,,,,
pg,3,How to tune PostgreSQL for memory,,,,,
pg,3,Tuning,,,,,
pg,3,Tushar Ahuja,,,,,
pg,3,Sr,,,,,
pg,3,QA Manager,,,,,
pg,3,"Apr 6, 2020",,,,,
pg,3,This article looks at parameters that can be used to help manage memory in PostgreSQL,,,,,
pg,3,Recommended settings for each parameter are also provided,,,,,
pg,3,,,,,,
pg,3,1,,,,,
pg,3,Shared_buffers (integer),,,,,
pg,3,2,,,,,
pg,3,Work_mem (integer),,,,,
pg,3,3,,,,,
pg,3,Maintenance_work_mem (integer),,,,,
pg,3,4,,,,,
pg,3,Effective_cache_size (integer),,,,,
pg,3,"In this post, we are going to look at some of the important GUC parameters recommended for memory management in PostgreSQL, which is helpful for improving the performance of your database server",,,,,
pg,3,All of these parameters reside under the postgresql,,,,,
pg,3,"conf file (inside $PDATA directory), which manages the configurations of the database server",,,,,
pg,3,,,,,,
pg,3,shared_buffers (integer),,,,,
pg,3,The shared_buffers parameter determines how much memory is dedicated to the server for caching data,,,,,
pg,3,,,,,,
pg,3,"The default value for this parameter, which is set in postgresql",,,,,
pg,3,"conf, is:",,,,,
pg,3,#shared_buffers = 128MB,,,,,
pg,3,The value should be set to 15% to 25% of the machine’s total RAM,1,604,shared_buffers;shared_buffers,P >= 0.15 * memory; P <= 0.25 * memory,
pg,3,"For example: if your machine’s RAM size is 32 GB, then the recommended value for shared_buffers is 8 GB",1,604,shared_buffers,P = 8GB,Memory = 32GB
pg,3,Please note that the database server needs to be restarted after this change,,,,,
pg,3,,,,,,
pg,3,work_mem (integer),,,,,
pg,3,The work_mem parameter basically provides the amount of memory to be used by internal sort operations and hash tables before writing to temporary disk files,,,,,
pg,3,"Sort operations are used for order by, distinct, and merge join operations",,,,,
pg,3,Hash tables are used in hash joins and hash based aggregation,,,,,
pg,3,,,,,,
pg,3,"The default value for this parameter, which is set in postgresql",,,,,
pg,3,"conf, is:",,,,,
pg,3,#work_mem = 4MB,,,,,
pg,3,"Setting the correct value of work_mem parameter can result in less disk-swapping, and therefore far quicker queries",,,,,
pg,3,,,,,,
pg,3,We can use the formula below to calculate the optimal work_mem value for the database server:,,,,,
pg,3,Total RAM * 0.25 / max_connections,1,619,work_mem,P = 0.25 * memory / max_connections,
pg,3,The max_connections parameter is one of the GUC parameters to specify the maximum number of concurrent connections to the database server,,,,,
pg,3,By default it is set to 100 connections,,,,,
pg,3,,,,,,
pg,3,We can also directly assign work_mem to a role:,,,,,
pg,3,postgres=# alter user test set work_mem='4GB';,,,,,
pg,3,ALTER ROLE,,,,,
pg,3,maintenance_work_mem (integer),,,,,
pg,3,"The maintenance_work_mem parameter basically provides the maximum amount of memory to be used by maintenance operations like vacuum, create index, and alter table add foreign key operations",,,,,
pg,3,,,,,,
pg,3,"The default value for this parameter, which is set in postgresql",,,,,
pg,3,"conf, is:",,,,,
pg,3,#maintenance_work_mem = 64MB,,,,,
pg,3,It’s recommended to set this value higher than work_mem; this can improve performance for vacuuming,1,632,maintenance_work_mem,P > work_mem,
pg,3,In general it should be:,,,,,
pg,3,Total RAM * 0.05,1,632,maintenance_work_mem,P = 0.05 * memory,
pg,3,effective_cache_size (integer),,,,,
pg,3,The effective_cache_size parameter estimates how much memory is available for disk caching by the operating system and within the database itself,,,,,
pg,3,The PostgreSQL query planner decides whether it’s fixed in RAM or not,,,,,
pg,3,"Index scans are most likely to be used against higher values; otherwise, sequential scans will be used if the value is low",,,,,
pg,3,Recommendations are to set Effective_cache_size at 50% of the machine’s total RAM,1,,effective_cache_size,P = 0.5 * memory,
pg,3,,,,,,
pg,3,"For more details and other parameters, please refer to the PostgreSQL documentation: https://www",,,,,
pg,3,postgresql,,,,,
pg,3,org/docs/12/runtime-config-resource,,,,,
pg,3,html,,,,,
pg,3,,,,,,
pg,3,Hope it helps!,,,,,
pg,3,Tushar AhujaSr,,,,,
pg,3,QA Manager,,,,,
pg,3,Ready to take the next step with PostgreSQL? Contact Us,,,,,
pg,3,Barrio main menu,,,,,
pg,3,Why EDB?,,,,,
pg,3,Use Cases,,,,,
pg,3,Oracle Migration,,,,,
pg,3,Hybrid Cloud,,,,,
pg,3,High Availability,,,,,
pg,3,Solutions for,,,,,
pg,3,IT Professionals,,,,,
pg,3,Database Architects,,,,,
pg,3,Developers,,,,,
pg,3,Database Admins,,,,,
pg,3,Products,,,,,
pg,3,Databases,,,,,
pg,3,EDB Postgres Advanced Server,,,,,
pg,3,PostgreSQL,,,,,
pg,3,Tools,,,,,
pg,3,Postgres Enterprise Manager,,,,,
pg,3,Backup and Recovery Tool,,,,,
pg,3,Failover Manager,,,,,
pg,3,Open Source Projects,,,,,
pg,3,Migration Portal,,,,,
pg,3,Migration Toolkit,,,,,
pg,3,Replication Server,,,,,
pg,3,Services,,,,,
pg,3,Services Overview,,,,,
pg,3,Training,,,,,
pg,3,Getting Started,,,,,
pg,3,PostgreSQL Optimization,,,,,
pg,3,Enterprise Strategy,,,,,
pg,3,Custom Services,,,,,
pg,3,Support,,,,,
pg,3,Customer Support Portal,,,,,
pg,3,Support Overview,,,,,
pg,3,PostgreSQL Technical Support,,,,,
pg,3,Remote DBA Service,,,,,
pg,3,Cloud DBA Service,,,,,
pg,3,Technical Account Management,,,,,
pg,3,Resources,,,,,
pg,3,Docs,,,,,
pg,3,Blog,,,,,
pg,3,Webinars,,,,,
pg,3,PostgreSQL Tutorials,,,,,
pg,3,Training,,,,,
pg,3,Partners,,,,,
pg,3,White Papers,,,,,
pg,3,Customer Stories,,,,,
pg,3,Product Compatibility,,,,,
pg,3,Plans,,,,,
pg,3,Company,,,,,
pg,3,About EDB,,,,,
pg,3,PostgreSQL Contributions,,,,,
pg,3,Careers,,,,,
pg,3,Events,,,,,
pg,3,Press Releases,,,,,
pg,3,Media Coverage,,,,,
pg,3,Customers,,,,,
pg,3,Follow Us,,,,,
pg,3,Twitter,,,,,
pg,3,LinkedIn,,,,,
pg,3,Facebook,,,,,
pg,3,YouTube,,,,,
pg,3,Barrio Footer Secondary Menu,,,,,
pg,3,© 2020 EDB,,,,,
pg,3,GDPR,,,,,
pg,3,Privacy Policy,,,,,
pg,3,Terms of Use,,,,,
pg,3,Trademarks,,,,,
pg,3,Select LanguageEnglish (EN)DutchFrenchGermanJapaneseKoreanPortugueseSpanishThis automated translation should not be considered exact and only used to approximate the original English language content,,,,,
pg,3,"EDB does not guarantee the accuracy, reliability, or timeliness of any information translated",,,,,
pg,3,,,,,,
pg,4,PGTune - calculate configuration for PostgreSQL based on the maximum performance for a given hardware configuration,,,,,
pg,4,Loading,,,,,
pg,4,,,,,,
pg,4,,,,,,
pg,5,PostgreSQL Performance Tuning - 2ndQuadrant | PostgreSQL,,,,,
pg,5,2ndQuadrant is now part of EDBBringing together some of the world's top PostgreSQL experts,,,,,
pg,5,,,,,,
pg,5,Mission Critical DatabasesContact Us,,,,,
pg,5,EN,,,,,
pg,5,FR,,,,,
pg,5,IT,,,,,
pg,5,ES,,,,,
pg,5,DE,,,,,
pg,5,PT,,,,,
pg,5,Support & Services,,,,,
pg,5,Support,,,,,
pg,5,24/7 PostgreSQL Support,,,,,
pg,5,Developer Support,,,,,
pg,5,DBA Services,,,,,
pg,5,Remote DBA,,,,,
pg,5,Database Monitoring,,,,,
pg,5,Consulting Services,,,,,
pg,5,Health Check,,,,,
pg,5,Performance Tuning,,,,,
pg,5,Database Security Audit,,,,,
pg,5,PostgreSQL Upgrade,,,,,
pg,5,Migration Services,,,,,
pg,5,Migrate to PostgreSQL,,,,,
pg,5,Migration Assessment,,,,,
pg,5,Products,,,,,
pg,5,Postgres-BDR ®,,,,,
pg,5,PostgreSQL High Availability,,,,,
pg,5,Kubernetes Operators for BDR & PostgreSQL,,,,,
pg,5,Managed PostgreSQL in the Cloud,,,,,
pg,5,Installers,,,,,
pg,5,Postgres Installer,,,,,
pg,5,2UDA,,,,,
pg,5,2ndQPostgres,,,,,
pg,5,pglogical,,,,,
pg,5,Barman,,,,,
pg,5,repmgr,,,,,
pg,5,OmniDB,,,,,
pg,5,SQL Firewall,,,,,
pg,5,Postgres-XL,,,,,
pg,5,Downloads,,,,,
pg,5,Installers,,,,,
pg,5,Postgres Installer,,,,,
pg,5,2UDA – Unified Data Analytics,,,,,
pg,5,Whitepapers,,,,,
pg,5,Business Case for PostgreSQL Support,,,,,
pg,5,AlwaysOn Postgres,,,,,
pg,5,PostgreSQL with High Availability,,,,,
pg,5,Security Best Practices,,,,,
pg,5,BDR,,,,,
pg,5,Case Studies,,,,,
pg,5,Performance Tuning,,,,,
pg,5,BenchPrep,,,,,
pg,5,tastyworks,,,,,
pg,5,Distributed Clusters,,,,,
pg,5,ClickUp,,,,,
pg,5,European Space Agency (ESA),,,,,
pg,5,Telefónica del Sur,,,,,
pg,5,Animal Logic,,,,,
pg,5,Database Administration,,,,,
pg,5,Agilis Systems,,,,,
pg,5,Professional Training,,,,,
pg,5,Met Office,,,,,
pg,5,London & Partners,,,,,
pg,5,Database Upgrades,,,,,
pg,5,Alfred Wegener Institute (AWI),,,,,
pg,5,Database Migration,,,,,
pg,5,International Game Technology (IGT),,,,,
pg,5,Healthcare Software Solutions (HSS),,,,,
pg,5,Navionics,,,,,
pg,5,Postgres Learning Center,,,,,
pg,5,Webinars,,,,,
pg,5,Upcoming Webinars,,,,,
pg,5,Webinar Library,,,,,
pg,5,Whitepapers,,,,,
pg,5,Business Case for PostgreSQL Support,,,,,
pg,5,AlwaysOn Postgres,,,,,
pg,5,PostgreSQL with High Availability,,,,,
pg,5,Security Best Practices,,,,,
pg,5,BDR,,,,,
pg,5,Blog,,,,,
pg,5,Training,,,,,
pg,5,Course Catalogue,,,,,
pg,5,Case Studies,,,,,
pg,5,Performance Tuning,,,,,
pg,5,BenchPrep,,,,,
pg,5,tastyworks,,,,,
pg,5,Distributed Clusters,,,,,
pg,5,ClickUp,,,,,
pg,5,European Space Agency (ESA),,,,,
pg,5,Telefónica del Sur,,,,,
pg,5,Animal Logic,,,,,
pg,5,Database Administration,,,,,
pg,5,Agilis Systems,,,,,
pg,5,Professional Training,,,,,
pg,5,Met Office,,,,,
pg,5,London & Partners,,,,,
pg,5,Database Upgrades,,,,,
pg,5,Alfred Wegener Institute (AWI),,,,,
pg,5,Database Migration,,,,,
pg,5,International Game Technology (IGT),,,,,
pg,5,Healthcare Software Solutions (HSS),,,,,
pg,5,Navionics,,,,,
pg,5,Books,,,,,
pg,5,PostgreSQL 11 Administration Cookbook,,,,,
pg,5,PostgreSQL 10 Administration Cookbook,,,,,
pg,5,PostgreSQL High Availability Cookbook – 2nd Edition,,,,,
pg,5,PostgreSQL 9 Administration Cookbook – 3rd Edition,,,,,
pg,5,PostgreSQL Server Programming Cookbook – 2nd Edition,,,,,
pg,5,PostgreSQL 9 Cookbook – Chinese Edition,,,,,
pg,5,Videos,,,,,
pg,5,Events,,,,,
pg,5,PostgreSQL,,,,,
pg,5,PostgreSQL – History,,,,,
pg,5,Who uses PostgreSQL?,,,,,
pg,5,PostgreSQL FAQ,,,,,
pg,5,PostgreSQL vs MySQL,,,,,
pg,5,The Business Case for PostgreSQL,,,,,
pg,5,Security Information,,,,,
pg,5,Documentation,,,,,
pg,5,About Us,,,,,
pg,5,About 2ndQuadrant,,,,,
pg,5,What Does “2ndQuadrant” Mean?,,,,,
pg,5,2ndQuadrant’s Passion for PostgreSQL,,,,,
pg,5,News,,,,,
pg,5,Careers,,,,,
pg,5,Team Profile,,,,,
pg,5,Blog,,,,,
pg,5,Menu,,,,,
pg,5,Menu,,,,,
pg,5,You are here: Home1 / Services2 / PostgreSQL Performance TuningPostgreSQL Performance Tuning,,,,,
pg,5,Boost the Performance of your Database,,,,,
pg,5,,,,,,
pg,5,"You have made significant investments in your hardware, so be sure your database fully utilizes it for your workloads",,,,,
pg,5,"To maximize your ROI, it is crucial for your business to tune your PostgreSQL Database to its top performance",,,,,
pg,5,,,,,,
pg,5,"Although PostgreSQL performs well out-of-the-box, there are several parameters that require further tuning to achieve peak performance for your specific workloads",,,,,
pg,5,"2ndQuadrant provides a personalized service for tuning your database, customized to your organizational needs",,,,,
pg,5,Our PostgreSQL consultants will help you deliver outstanding performance to your customers while ensuring data integrity,,,,,
pg,5,,,,,,
pg,5,On this page:,,,,,
pg,5,7 Good Reasons to get Performance Tuning,,,,,
pg,5,PostgreSQL Performance Tuning Service,,,,,
pg,5,Our Customers’ Experiences,,,,,
pg,5,Performance Tuning Knowledge Base,,,,,
pg,5,Get in touch with us,,,,,
pg,5,What Our Clients Say,,,,,
pg,5,"12“During our daily load test, we observed an immediate 2-4x improvement in peak throughput",,,,,
pg,5,,,,,,
pg,5,"Jordan von Kluck, CTO, tastyworks",,,,,
pg,5,“The goal of having platinum support was very simple – to serve as a backup and safety mechanism for the internal team at BenchPrep,,,,,
pg,5,This allowed the team the ability to work with the professionals at 2ndQuadrant and figure out what we should be tuning and tweaking continuously with regards to the Postgres configuration and also with regards to errors and issues,,,,,
pg,5,"This ensures that we have a very efficient, responsive, and professional team ready to be accessed any time we need",,,,,
pg,5,,,,,,
pg,5,"Nickolay Schwarz, CTO, BenchPrep",,,,,
pg,5,7 Good Reasons to get Performance Tuning,,,,,
pg,5,"Increasing the performance of your Postgres database is of critical importance, whether it is to improve your current architecture or as a preparation to start a new project",,,,,
pg,5,"Every database is different, but these are some of the top indications you can tune the performance of your PostgreSQL database:",,,,,
pg,5,Scalability Analysis,,,,,
pg,5,"Before investing in vertical or horizontal scaling, analyze available headroom in your existing hardware by tuning it for performance",,,,,
pg,5,,,,,,
pg,5,Capacity Planning,,,,,
pg,5,It is important to benchmark the maximum throughput your database can achieve in order to plan the workloads it can handle,,,,,
pg,5,Tune your database before you benchmark,,,,,
pg,5,,,,,,
pg,5,Performance Degradation,,,,,
pg,5,"You are routinely encountering problems in database performance, slowing your applications down",,,,,
pg,5,Optimize your database performance and give your applications a boost,,,,,
pg,5,,,,,,
pg,5,Under-Utilized Hardware,,,,,
pg,5,"Your database server does not fully utilize available hardware resources, resulting in slower performance than what is achievable",,,,,
pg,5,Tune your database to ensure full utilization of your hardware’s potential,,,,,
pg,5,,,,,,
pg,5,Sub-Optimal Configuration,,,,,
pg,5,Your database is delivering throughput that is lower than what’s achievable because it isn’t customized for your organizational workload,,,,,
pg,5,Optimize your database configuration based on your organizational workloads,,,,,
pg,5,,,,,,
pg,5,Underperforming Queries,,,,,
pg,5,Some frequently executed queries are taking too long to return,,,,,
pg,5,Let our experts guide you on how to optimize these queries,,,,,
pg,5,,,,,,
pg,5,Changing Workloads,,,,,
pg,5,"As businesses grow, workloads can change and/or increase",,,,,
pg,5,Tune your database for performance so it can keep up,,,,,
pg,5,,,,,,
pg,5,PostgreSQL Performance Tuning Service,,,,,
pg,5,"Performance Tuning from 2ndQuadrant includes an in-depth analysis of the following aspects, after which, we provide you with a detailed report of our findings",,,,,
pg,5,The report includes our recommendations to optimize your database for your specific use case and overall business goals,,,,,
pg,5,,,,,,
pg,5,Database Configuration Tuning,,,,,
pg,5,We analyze the configuration parameters of your PostgreSQL database and recommend the optimum configuration for your organizational workload,,,,,
pg,5,"Among other things, we examine the block size of different file systems like ZFS, and recommend optimum configuration",,,,,
pg,5,,,,,,
pg,5,Index Analysis,,,,,
pg,5,"Indexes can be tricky to handle, especially as your data grows",,,,,
pg,5,We analyze your existing indexes and suggest any optimizations,,,,,
pg,5,"In addition to that, we recommend the addition/removal of indexes according to your organizational needs",,,,,
pg,5,,,,,,
pg,5,Table Partition Analysis,,,,,
pg,5,Table partitions are essential to data management and maximizing efficiency when accessing that data,,,,,
pg,5,We analyze and recommend the addition/removal of partitions based on your workloads,,,,,
pg,5,,,,,,
pg,5,Hardware Usage Analysis,,,,,
pg,5,"In order to fully utilize the hardware your database is hosted on, we study the configuration and recommend changes which will ensure full utilization of the power your hardware provides",,,,,
pg,5,,,,,,
pg,5,Connection Pooling Review,,,,,
pg,5,Many users and applications will connect to the database to perform functions they are responsible for; we review your connection pooling strategy to ensure that it’s optimized for your specific use case,,,,,
pg,5,,,,,,
pg,5,Analysis of Slow Running Queries,,,,,
pg,5,"If there are specific queries that you feel are running slower than expected, we perform a detailed analysis to identify potential optimizations accordingly",,,,,
pg,5,,,,,,
pg,5,Operating System Configuration Tuning,,,,,
pg,5,"The OS forms the underlying layer of your database, so configuration parameters for the OS and the hardware it’s hosted on should also be customized for your organizational workload",,,,,
pg,5,"Among other things, we can use pg_buffercache as our guide and make recommendations about shared_buffer parameter setting to optimize for your workload",,,,,
pg,5,,,,,,
pg,5,Storage Partition Analysis,,,,,
pg,5,"Building on the OS configuration, storage disk partitions also tend to play a significant role in the performance of any software the OS hosts",,,,,
pg,5,We examine existing partitions and provide recommendations on their configuration and structure that will enhance processing efficiency,,,,,
pg,5,,,,,,
pg,5,Our Customers’ Experiences,,,,,
pg,5,BenchPrep is a Chicago-based learning success platform which allows organizations to offer test preparation and continued learning programs to users across the globe,,,,,
pg,5,,,,,,
pg,5,"Due to an exponential increase in the demand for online training, the number of organizations using BenchPrep for their learning needs grew significantly",,,,,
pg,5,"The platform, which was originally based on a single Postgres database, started to have performance issues due to the unexpected load",,,,,
pg,5,,,,,,
pg,5,Find out how 2ndQuadrant recommended solutions to help BenchPrep scale their infrastructure and provide an unmatched learning experience to its customers,,,,,
pg,5,,,,,,
pg,5,Download Case Study,,,,,
pg,5,"tastyworks is a retail brokerage firm based in Chicago, IL that is leading a financial revolution for the do-it-yourself investor, and uses PostgreSQL as its backend database for its cutting edge technology applications",,,,,
pg,5,"Shortly after launching, the rapid success of the tastyworks platform created a larger than expected production volume, leading to unforeseen performance issues",,,,,
pg,5,,,,,,
pg,5,"Find out how 2ndQuadrant helped optimize their database with a 4x performance boost and achieve: High Availability, updated PostgreSQL configuration to meet best practices, seamless migration to new servers, and much more!",,,,,
pg,5,Download Case Study,,,,,
pg,5,Performance Tuning Knowledge Base,,,,,
pg,5,Videos,,,,,
pg,5,Postgres Vacuuming Through Pictures Webinar Video,,,,,
pg,5,This webinar was held on 24 July 2019 and covered key concepts of Postgres Vacuum and Autovacuum,,,,,
pg,5,"It included use of diagrams, illustrations, and animations to present Postgres Vacuum, tuning Postgres Vacuum concepts and how tuning Vacuum properly makes a difference in database performance",,,,,
pg,5,Watch the complete webinar video here,,,,,
pg,5,,,,,,
pg,5,Power of Indexing in PostgreSQL Webinar Video,,,,,
pg,5,"The webinar was held on April 4, 2018 and covered the following topics: various ways to access data in PostgreSQL, different types of indexes supported by PostgreSQL, internals of BTree and BRIN indexes, overview of GIN and GiST indexes, how to find missing and unused indexes",,,,,
pg,5,Watch the complete webinar video here,,,,,
pg,5,,,,,,
pg,5,Training,,,,,
pg,5,Advanced Development & Performance,,,,,
pg,5,This class covers important Intermediate and Advanced level details for developers interacting with PostgreSQL,,,,,
pg,5,,,,,,
pg,5,Blogs,,,,,
pg,5,"TPC-H performance since PostgreSQL 8.3			 October 22, 2020/0 Comments/in 2ndQuadrant, PostgreSQL, Tomas' PlanetPostgreSQL /by Tomas VondraIn the first part of this blog series, I’ve presented a couple of benchmark results showing how PostgreSQL OLTP performance changed since 8.3, released in 2008",,,,,
pg,5,"In this part I plan to do the same thing but for analytical / BI queries, processing large amounts of data",,,,,
pg,5,There’s a number of industry benchmarks for testing […],,,,,
pg,5,"Read more OLTP performance since PostgreSQL 8.3			 October 8, 2020/4 Comments/in PostgreSQL, Tomas' PlanetPostgreSQL /by Tomas VondraA couple years ago (at the pgconf",,,,,
pg,5,eu 2014 in Madrid) I presented a talk called “Performance Archaeology” which showed how performance changed in recent PostgreSQL releases,,,,,
pg,5,I did that talk as I think the long-term view is interesting and may give us insights that may be very valuable,,,,,
pg,5,For people who actually work on PostgreSQL […],,,,,
pg,5,"Read more Webinar: KNN Indexing in PostgreSQL [Follow Up]			 May 4, 2020/0 Comments/in Webinars /by Bilal IbrarK-nearest neighbor is a proximity algorithm to find data in order of distance",,,,,
pg,5,"Typically, this data cannot be indexed in advance, as both the centroid and the data can be in constant motion",,,,,
pg,5,"PostgreSQL provides efficient searching algorithms for finding proximity data on the fly, including unique, high-performance indexing options",,,,,
pg,5,For a deeper understanding of […],,,,,
pg,5,Read more,,,,,
pg,5,View All Blogs,,,,,
pg,5,Back to Postgres Support & Services,,,,,
pg,5,Get in touch with us!,,,,,
pg,5,Please fill in the form below and we'll be in touch as soon as possible,,,,,
pg,5,,,,,,
pg,5,Get in touch with us!,,,,,
pg,5,Support & Services,,,,,
pg,5,24/7 Production Support,,,,,
pg,5,Developer Support,,,,,
pg,5,Remote DBA for PostgreSQL,,,,,
pg,5,PostgreSQL Database Monitoring,,,,,
pg,5,PostgreSQL Health Check,,,,,
pg,5,PostgreSQL Performance Tuning,,,,,
pg,5,Database Security Audit,,,,,
pg,5,Upgrade PostgreSQL,,,,,
pg,5,PostgreSQL Migration Assessment,,,,,
pg,5,Migrate from Oracle to PostgreSQL,,,,,
pg,5,Products,,,,,
pg,5,HA Postgres Clusters,,,,,
pg,5,Postgres-BDR®,,,,,
pg,5,2ndQPostgres,,,,,
pg,5,pglogical,,,,,
pg,5,repmgr,,,,,
pg,5,Barman,,,,,
pg,5,Postgres Cloud Manager,,,,,
pg,5,SQL Firewall,,,,,
pg,5,Postgres-XL,,,,,
pg,5,OmniDB,,,,,
pg,5,Postgres Installer,,,,,
pg,5,2UDA,,,,,
pg,5,Postgres Learning Center,,,,,
pg,5,Introducing Postgres,,,,,
pg,5,Blog,,,,,
pg,5,Webinars,,,,,
pg,5,Books,,,,,
pg,5,Videos,,,,,
pg,5,Training,,,,,
pg,5,Case Studies,,,,,
pg,5,Events,,,,,
pg,5,About Us,,,,,
pg,5,About 2ndQuadrant,,,,,
pg,5,What does 2ndQuadrant Mean?,,,,,
pg,5,News,,,,,
pg,5,Careers,,,,,
pg,5,Team Profile,,,,,
pg,5,© 2ndQuadrant Ltd,,,,,
pg,5,All rights reserved,,,,,
pg,5,| Privacy Policy,,,,,
pg,5,TwitterLinkedInFacebookYoutubeMail,,,,,
pg,5,Scroll to top,,,,,
pg,5,Need Help?,,,,,
pg,5,×,,,,,
pg,6,PostgreSQL Performance Tuning Tutorial – Stackify,,,,,
pg,6,PostgreSQL Performance Tuning Tutorial,,,,,
pg,6,Product Features OverviewApplication Performance ManagementCentralized LoggingFull Transaction Tracing,,,,,
pg,6,Menu OverviewApplication Performance ManagementCentralized LoggingFull Transaction Tracing Error TrackingApplication & Server MonitoringReal User MonitoringDeployment Tracking,,,,,
pg,6,"Menu Error TrackingApplication & Server MonitoringReal User MonitoringDeployment TrackingTry Our Code ProfilerWant to write better code? Check our free transaction tracing tool, Prefix!",,,,,
pg,6,Features OverviewApplication Performance ManagementCentralized LoggingFull Transaction TracingError TrackingApplication & Server MonitoringReal User MonitoringDeployment Tracking,,,,,
pg,6,"Menu OverviewApplication Performance ManagementCentralized LoggingFull Transaction TracingError TrackingApplication & Server MonitoringReal User MonitoringDeployment TrackingTry Our Code ProfilerWant to write better code? Check our free transaction tracing tool, Prefix! PricingSolutions By Role For DevelopersFor DevOps",,,,,
pg,6,Menu For DevelopersFor DevOpsBy Technology Azure MonitoringAWS MonitoringCompatibility,,,,,
pg,6,Menu Azure MonitoringAWS MonitoringCompatibilityBy Language,,,,,
pg,6,ETJavaPHPNode,,,,,
pg,6,jsRubyPython,,,,,
pg,6,Menu,,,,,
pg,6,ETJavaPHPNode,,,,,
pg,6,jsRubyPython,,,,,
pg,6,By Role For DevelopersFor DevOps,,,,,
pg,6,Menu For DevelopersFor DevOpsBy Technology Azure MonitoringAWS MonitoringCompatibility,,,,,
pg,6,Menu Azure MonitoringAWS MonitoringCompatibilityBy Language,,,,,
pg,6,ETJavaPHPNode,,,,,
pg,6,jsRubyPython,,,,,
pg,6,Menu,,,,,
pg,6,ETJavaPHPNode,,,,,
pg,6,jsRubyPython Learn Resources BlogeBooksCase StudiesWebinarsROI Calculator,,,,,
pg,6,Menu BlogeBooksCase StudiesWebinarsROI CalculatorTechnical DocumentationSupportIdeas Portal,,,,,
pg,6,Menu DocumentationSupportIdeas Portal,,,,,
pg,6,Resources BlogeBooksCase StudiesWebinarsROI Calculator,,,,,
pg,6,Menu BlogeBooksCase StudiesWebinarsROI CalculatorTechnical DocumentationSupportIdeas Portal,,,,,
pg,6,Menu DocumentationSupportIdeas Portal Login,,,,,
pg,6,Start Free Trial,,,,,
pg,6,Product Features OverviewApplication Performance ManagementCentralized LoggingFull Transaction Tracing,,,,,
pg,6,Menu OverviewApplication Performance ManagementCentralized LoggingFull Transaction Tracing Error TrackingApplication & Server MonitoringReal User MonitoringDeployment Tracking,,,,,
pg,6,"Menu Error TrackingApplication & Server MonitoringReal User MonitoringDeployment TrackingTry Our Code ProfilerWant to write better code? Check our free transaction tracing tool, Prefix!",,,,,
pg,6,Features OverviewApplication Performance ManagementCentralized LoggingFull Transaction TracingError TrackingApplication & Server MonitoringReal User MonitoringDeployment Tracking,,,,,
pg,6,"Menu OverviewApplication Performance ManagementCentralized LoggingFull Transaction TracingError TrackingApplication & Server MonitoringReal User MonitoringDeployment TrackingTry Our Code ProfilerWant to write better code? Check our free transaction tracing tool, Prefix! PricingSolutions By Role For DevelopersFor DevOps",,,,,
pg,6,Menu For DevelopersFor DevOpsBy Technology Azure MonitoringAWS MonitoringCompatibility,,,,,
pg,6,Menu Azure MonitoringAWS MonitoringCompatibilityBy Language,,,,,
pg,6,ETJavaPHPNode,,,,,
pg,6,jsRubyPython,,,,,
pg,6,Menu,,,,,
pg,6,ETJavaPHPNode,,,,,
pg,6,jsRubyPython,,,,,
pg,6,By Role For DevelopersFor DevOps,,,,,
pg,6,Menu For DevelopersFor DevOpsBy Technology Azure MonitoringAWS MonitoringCompatibility,,,,,
pg,6,Menu Azure MonitoringAWS MonitoringCompatibilityBy Language,,,,,
pg,6,ETJavaPHPNode,,,,,
pg,6,jsRubyPython,,,,,
pg,6,Menu,,,,,
pg,6,ETJavaPHPNode,,,,,
pg,6,jsRubyPython Learn Resources BlogeBooksCase StudiesWebinarsROI Calculator,,,,,
pg,6,Menu BlogeBooksCase StudiesWebinarsROI CalculatorTechnical DocumentationSupportIdeas Portal,,,,,
pg,6,Menu DocumentationSupportIdeas Portal,,,,,
pg,6,Resources BlogeBooksCase StudiesWebinarsROI Calculator,,,,,
pg,6,Menu BlogeBooksCase StudiesWebinarsROI CalculatorTechnical DocumentationSupportIdeas Portal,,,,,
pg,6,Menu DocumentationSupportIdeas Portal Login,,,,,
pg,6,"PostgreSQL Performance Tuning Tutorial Lou Bichard November 6, 2018 Developer Tips, Tricks & Resources",,,,,
pg,6,Setting up the database correctly is just the first step in PostgreSQL performance tuning,,,,,
pg,6,"With every table you add and every query you run, your databases will require maintenance and updates to ensure ideal PostgreSQL optimization",,,,,
pg,6,"PostgreSQL optimization is pretty straight-forward, however, there are some things that it needs to know from you, the database admin, in order to run effectively",,,,,
pg,6,"When it comes to PostgreSQL performance tuning an application, one rule applies: don’t optimize early",,,,,
pg,6,Start first by implementing your database and schema,,,,,
pg,6,"Then when you’ve got your optimal setup, you can start to monitor your SQL queries with tools like Retrace",,,,,
pg,6,This is important because PostgreSQL performance tuning is all about trade-offs,,,,,
pg,6,You might accept a slow-running query in one part of your application that isn’t used so often in order to get a lightning-fast response time on a frequently performed query,,,,,
pg,6,"Download your free, two week trial of Retrace today",,,,,
pg,6,Today I’m going to walk you through some different PostgreSQL optimizations,,,,,
pg,6,"First, we’ll go through some of the basic setup options available:Hardware updates—Changes you can make to the physical serverConfiguration—Modifications to the out-of-the-box PostgreSQL configurationVacuuming—Ways in which vacuum settings can improve performanceOnce your system is set up, we’ll see how you can analyze and improve your schema:Analyze your query performance—How to analyze individual queriesAnalyze your logs—How to get information out of your system for analysisIndex for query performance—How adding indexes helps the database to optimize its query plan",,,,,
pg,6,"Tip: Find application errors and performance problems instantly with Stackify RetraceTroubleshooting and optimizing your code is easy with integrated errors, logs and code level performance insights",,,,,
pg,6,,,,,,
pg,6,"Part 1: Best Practices and SetupIn the first part of this article, we’re going to go through how you can alter your basic setup for faster PostgreSQL performance",,,,,
pg,6,"In part 2, I’ll cover how to optimize your system specifics, such as query optimizations",,,,,
pg,6,Let’s get to it!Beefing up your PostgreSQL hardwareThe obvious place to start when it comes to optimizing PostgreSQL performance is looking at the hardware of the system itself,,,,,
pg,6,"Some of the most important factors to your database are the available memory, CPU and disk space, and performance",,,,,
pg,6,"When it comes to hardware updates, you should consider the following:Updating your memory",,,,,
pg,6,Memory is what your system uses to effectively cache data it needs often,,,,,
pg,6,It’s important to keep memory in mind when you’re optimizing your queries later,,,,,
pg,6,"The bigger your cache, the less your database will need to go out to disk—which can be painful for performance",,,,,
pg,6,PostgreSQL tries to hold the most frequently accessed data in memory to make performance improvements based on how your queries are performed and the configuration that you give it,,,,,
pg,6,But we’ll return to memory-based performance optimization later,,,,,
pg,6,Separating the application from the database,,,,,
pg,6,"On the note of increasing memory, if you’re running your database application on the same server as your application, you may want to consider isolating it",,,,,
pg,6,It’ll be difficult to truly analyze and improve your database performance if a separate component is affecting your metrics and environment,,,,,
pg,6,"Database configuration: The what, why, and howSource: pixcove",,,,,
pg,6,comPostgreSQL comes with a set of default configurations,,,,,
pg,6,This default configuration is set up for compatibility and is essentially a best guess that tries to suit all possible use cases of PostgreSQL,,,,,
pg,6,"Luckily for you, that means there are some potential quick wins if you start to tweak the default configuration",,,,,
pg,6,"Before we dive in and go through some of the most common configuration optimizations you can make, it’s worth pointing out that there are several PostgreSQL performance tuning tools available—such as PGTune—that try to do some of this configuration legwork for you",,,,,
pg,6,"Their effectiveness varies, but it might be worth experimenting to the delta between the output of these tools and your current database configuration",,,,,
pg,6,Database configurations in PostgreSQL are made directly in the configuration file (postgresql,,,,,
pg,6,"conf), or through running an ALTER SYSTEM command",,,,,
pg,6,"If you want to see all the current configurations of your database now, simply run the SHOW command as follows:SHOW ALLThis command will list out all of the existing configuration and their settings",,,,,
pg,6,"It’s also important to note that different configurations will apply only in certain conditions, such as a database restart",,,,,
pg,6,Some configuration changes will require a server restart; others will require a reload of the configuration,,,,,
pg,6,"When you’ve made configuration changes to your database, you can see details such as whether a restart is required for your configuration update by running the following command:SELECT * FROM pg_settings WHERE pending_restart = true;PostgreSQL performance tuning configuration changesYou will probably want to modify a lot of different configurations to get the most out of your PostgreSQL database",,,,,
pg,6,Let’s go through some of the main configurations that you can change to get more performance from your system,,,,,
pg,6,max_connectionsConnections are how your applications communicate with your database,,,,,
pg,6,Each connection will require some communication chatter and setup in order to establish,,,,,
pg,6,"However, once established, queries can be sent down the wire to your database",,,,,
pg,6,"Your PostgreSQL database will come with a default number of connections, which you can alter",,,,,
pg,6,"You want to make sure that your applications aren’t unnecessarily connecting, as this can be costly and can impact performance",,,,,
pg,6,"Memory allocations are performed on a per-connection basis, so you’ll want to balance between allocating memory and the number of connections",,,,,
pg,6,checkpoint_segmentsA checkpoint is a periodic action that stores information about your system,,,,,
pg,6,"By default, a checkpoint will run after a number of segments, but depending on your system, you may want to increase this value",,,,,
pg,6,"We’ll talk later in the article about how you can log out your checkpoint data, but checkpoint configuration is important because it can be quite an expensive operation",,,,,
pg,6,"It’s often thought that the default configuration is too aggressive and performs checkpoints too often, so you might want to increase this value to make checkpoints less frequent",,,,,
pg,6,"work_memAs I mentioned earlier, memory allocation and management is a big part of PostgreSQL performance tuning",,,,,
pg,6,"If your system is doing a lot of complex sorts, increasing the sort memory can help the database optimize its configuration for your setup",,,,,
pg,6,"This allows PostgreSQL to cache more data in memory while it performs its sorting, as opposed to making expensive calls to the disk",,,,,
pg,6,random_page_costThis setting essentially is the amount of time that your optimizer should spend reading memory before reaching out to your disk,,,,,
pg,6,"You should alter this setting only when you’ve done other plan-based optimizations that we’ll cover soon, such as vacuuming, indexing, or altering your queries and schema",,,,,
pg,6,"These are just some of the optimizations you can make for database configurations, but there are plenty more",,,,,
pg,6,"Now that you know how to tweak your database setup, let’s look at another area for investigation: vacuuming",,,,,
pg,6,Use vacuuming to avoid bloatThe next area we’re looking at is vacuuming,,,,,
pg,6,A vacuum is a scan that marks tuples as no longer needed so that they can be overwritten,,,,,
pg,6,Failure to do this can mean that you have dead tuples lingering in your system,,,,,
pg,6,These dead tuples are often called bloat,,,,,
pg,6,"Bloat originates mostly from records that are being deleted, updated, or inserted",,,,,
pg,6,"PostgreSQL sets up vacuuming by default, but just as you can configure other settings, you can also set your vacuuming settings",,,,,
pg,6,You can even set vacuuming settings on a per-table basis for more fine-grained optimization,,,,,
pg,6,"To perform a vacuum, you simply run the command:VACUUMIf you want to see the history of previously run vacuums, you can do so by executing the following:SELECT * FROM pg_stat_user_tablesGenerally speaking, regular vacuuming can’t be done enough",,,,,
pg,6,More frequent vacuuming keeps bloat to a minimum and ensures that database performance stays high,,,,,
pg,6,"Although autovacuuming is already set up, you might want to alter the settings to be more aggressive",,,,,
pg,6,Part 2: Analyzing PostgreSQL PerformanceUpfront system configuration will have a limit on PostgreSQL performance increases,,,,,
pg,6,"Although you can do some configuration upfront, a lot of your configuration decisions will be driven by the data and analysis you have of your system",,,,,
pg,6,"You’ll want to optimize how it’s set up, know how it’s being queried, and optimize based on these use cases",,,,,
pg,6,PostgreSQL and the community give us some handy tools for making these optimizations,,,,,
pg,6,"Update Postgres algorithm data with ANALYZEBefore we continue, it’s important to understand the life cycle of a query",,,,,
pg,6,The life cycle is what happens from an initial request to the database right up to the response it sends,,,,,
pg,6,PostgreSQL doesn’t just dip its hand into a big bag of memory,,,,,
pg,6,"When you have a lot of data, crude fetching of your data can lead to performance drops",,,,,
pg,6,"If you’re scanning your database sequentially (often called a table scan) for your data, your performance will scale linearly— more rows, slower performance",,,,,
pg,6,But we can do better than that,,,,,
pg,6,"So what is the life cycle of a query? Initially, there is a transmission of the query string to PostgreSQL",,,,,
pg,6,The query string is then parsed and a plan is created,,,,,
pg,6,Plans are really important,,,,,
pg,6,Plans are the steps that PostgreSQL is going to take to find requested data,,,,,
pg,6,"How you set up your database configuration, your schema, and your indexes (more on indexes soon) will all affect how performant these plans are",,,,,
pg,6,"So, it’ll be important that we understand plans and how to optimize them",,,,,
pg,6,"Finally, the database will perform the plan and retrieve the data",,,,,
pg,6,A discrepancy can occur between the database plan that PostgreSQL intends to use to get your data and the way it actually fetches your data,,,,,
pg,6,This is because PostgreSQL bases its plan on infrequently updated metrics and statistics,,,,,
pg,6,Some data has to be updated periodically so that the statistics used for the plans are up to date,,,,,
pg,6,This is where ANALYZE comes in,,,,,
pg,6,Running the ANALYZE command updates these statistics so that Postgres has a fresh set of data about how to create its plans,,,,,
pg,6,"So, if you’re updating the tables or schema or adding indexes, remember to run an ANALYZE command after so the changes will take effect",,,,,
pg,6,Deeply understand your query performanceOne of the next obvious areas to go to is query optimization,,,,,
pg,6,"The queries that you are running might be inefficient for many reasons, so we’ll need a way to understand what’s going on with these queries—which is where the EXPLAIN command comes in",,,,,
pg,6,EXPLAIN gives you a precise breakdown of how PostgreSQL will execute your query,,,,,
pg,6,"The plan is based on statistics about the table, and it takes into account things like database indexes to find the most efficient path to your data",,,,,
pg,6,But EXPLAIN will only guess and give you a plan that it thinks it will execute,,,,,
pg,6,"You can run EXPLAIN ANALYZE to get not only the information about the predicted plan, but also an update on how the query performed",,,,,
pg,6,"When you’ve got the plan that the database is trying to perform, you can then begin to analyze it",,,,,
pg,6,"Several tools exist to make life easier, such as PEV, which allows you to visualize and understand the output of your EXPLAIN command",,,,,
pg,6,Logs as a source of high-quality PostgreSQL performance tuning dataLet’s assume that you have a running database and you’re looking to debug slow performance in the application,,,,,
pg,6,One way you’ll want to do this is through logs,,,,,
pg,6,Logs are short information statements that the application leaves behind when it performs an action,,,,,
pg,6,You can then gather up these actions and analyze them in a log management tool like Retrace to get a picture of how the system is behaving,,,,,
pg,6,"By default, your application doesn’t log all data",,,,,
pg,6,This is because increases in logging also have an effect on database performance,,,,,
pg,6,"So, while we go through how you can change log settings to analyze performance, remember that the log settings themselves can actually affect performance",,,,,
pg,6,"Logs are emitted to a file in your system, depending on your configuration",,,,,
pg,6,"When you’ve found where your logs are at, you can use a tool such as Retrace to analyze these logs",,,,,
pg,6,"Retrace will tell you stats such as the most frequently run queries, how long the queries take on average, and so on",,,,,
pg,6,These aggregate metrics can give you a better understanding of where you may have performance bottlenecks within your system,,,,,
pg,6,"So, now that we see how great logs are for understanding system performance, how do we go about setting them up or changing them?log_line_prefixThis is the format of your database logs",,,,,
pg,6,"For tools like PGBadger, they’ll need rich data and will also need to know the data format",,,,,
pg,6,Your log line prefix tells PostgreSQL what format to emit its log data in,,,,,
pg,6,"If you want to do any meaningful log analysis, you’ll need to set this value to be compatible with the tooling you are using to analyze your logs",,,,,
pg,6,log_statementThis is the logging level you’re operating at,,,,,
pg,6,Log levels usually refer to the level of detail you want in your logs,,,,,
pg,6,"For instance, do you want absolutely all logs, or only logs of a certain critical type? log_statement has a few different settings, including:ddl, which logs only structural changes to the databasemod, which logs modifications to existing data (basically everything except SELECT)all, which logs … everythinglog_checkpointsAs we discussed in the configuration settings, checkpoints in PostgreSQL are periodic actions that store data about your system",,,,,
pg,6,"These log checkpoints can, if excessive, lead to performance degradations",,,,,
pg,6,"If you suspect this might be the case, by enabling log checkpoints you’ll be able to see rich data about those checkpoints, such as how often they’re running and what could be triggering them",,,,,
pg,6,logging_connectionYou also might want to know information about connections,,,,,
pg,6,"If you’ve only got one application connecting to your database, but you’re seeing many concurrent connections, something could be wrong",,,,,
pg,6,Too many connections flooding your database could also mean that requests are failing to reach the database and could be affecting your application’s end users,,,,,
pg,6,"Now that we’ve got lots of data about our system, what tools do we have for improving the structure of our system to be more performant?Faster queries with database indexesIn a world without indexes, every request to the database would lead to a full scan of the entirety of the table to find the relevant results",,,,,
pg,6,"With a large data set, this can be extremely slow—and that’s where database indexing comes in",,,,,
pg,6,"Just as in a book, indexes give information to your database engine about roughly where in the system the data you’re looking for lives",,,,,
pg,6,"To index our system properly, we need an understanding of our data and how we’re trying to access it",,,,,
pg,6,"Which is why it’s important we have observability and monitoring tools, like Retrace setup to help us",,,,,
pg,6,"Indexes don’t come for free, however; if you updated the content of a book, you’ll have to update the index each time you make a change to the content",,,,,
pg,6,PostgreSQL has a few different types of index,,,,,
pg,6,The difference between these is that they all use a different algorithm,,,,,
pg,6,"The indexes available are B-tree (the default index), Hash, GiST, SP-GiST, and GIN",,,,,
pg,6,PostgreSQL will create implicit indexes when you create a primary key or a unique key constraint,,,,,
pg,6,"However, you will have to add the rest of your indexes manually",,,,,
pg,6,"The basic syntax for an INDEX is:CREATE INDEX index_name ON table_name;However, you shouldn’t use an index in some use cases—for example, when the overhead of using the index exceeds the benefit from the algorithm, such as on a small table",,,,,
pg,6,But tables that have large batch updates performed might also see performance issues,,,,,
pg,6,"It may make sense to remove indexes on these tables temporarily while it’s updating, before restoring indexes",,,,,
pg,6,"There you have it: lightning-fast PostgreSQL performance tuningHopefully, that gives you an understanding of how to start PostgreSQL performance tuning your database",,,,,
pg,6,"Now you should be able to analyze your queries with EXPLAIN, pull out your logs for further insight, and modify your indexes for faster performance",,,,,
pg,6,"Plus, you should be able to tweak your database configuration to match use so you can get the most out of it",,,,,
pg,6,"Just remember, tuning your database will take time and practice",,,,,
pg,6,So be patient and stay curious to find out more about your system to get the best performance results,,,,,
pg,6,"About the Author Latest PostsAbout Lou BichardLou Bichard is a JavaScript full stack engineer with a passion for culture, approach, and delivery",,,,,
pg,6,He believes the best products emerge from high performing teams and practices,,,,,
pg,6,"Lou is a fan and advocate of old-school lean and systems thinking, XP, continuous delivery, and DevOps",,,,,
pg,6,"Flamegraph: How to Visualize Stack Traces and Performance - July 3, 2019Docker Performance Improvement: Tips and Tricks - April 4, 2019Node",,,,,
pg,6,"js Performance Testing and Tuning - January 11, 2019Winston Logger Ultimate Tutorial: Best Practices, Resources, and Tips - December 31, 2018Node",,,,,
pg,6,"js Module Exports – Demystified - December 27, 2018",,,,,
pg,6,a-Retraceapplication performanceDeveloperloggingmonitoringSQL,,,,,
pg,6,Search Stackify Search Topics/KeywordsASP,,,,,
pg,6,NETProduct Updates,,,,,
pg,6,NET CoreApp MonitoringJavaApp Performance TipsAzureError HandlingAWSLogging TipsCloudDevOpsPopular Posts How to Troubleshoot IIS Worker Process (w3wp) High CPU Usage How to Monitor IIS Performance: From the Basics to Advanced IIS Performance Monitoring SQL Performance Tuning: 7 Practical Tips for Developers Looking for New Relic Alternatives & Competitors? Learn Why Developers Pick Retrace 5 Awesome Retrace Logging & Error Tracking FeaturesRecent Posts Site Performance Monitoring Best Practices How To Load Test Your PHP Website Best website load testing services How to Monitor a Windows Process Best 5 Tools for Node,,,,,
pg,6,js Monitoring,,,,,
pg,6,Get In Touch,,,,,
pg,6,Contact UsRequest a DemoStart Free Trial,,,,,
pg,6,"Menu Contact UsRequest a DemoStart Free TrialPO Box 2159Mission, KS 66201816-888-5055",,,,,
pg,6,Facebook,,,,,
pg,6,Twitter,,,,,
pg,6,Youtube,,,,,
pg,6,Linkedin,,,,,
pg,6,Products,,,,,
pg,6,RetracePrefixStackify Hidden Menu Item,,,,,
pg,6,NET MonitoringJava MonitoringPHP MonitoringNode,,,,,
pg,6,js MonitoringRuby MonitoringPython MonitoringRetrace vs New RelicRetrace vs Application Insights,,,,,
pg,6,Menu RetracePrefixStackify Hidden Menu Item,,,,,
pg,6,NET MonitoringJava MonitoringPHP MonitoringNode,,,,,
pg,6,js MonitoringRuby MonitoringPython MonitoringRetrace vs New RelicRetrace vs Application InsightsSolutions,,,,,
pg,6,Application Performance ManagementCentralized LoggingCode ProfilingError TrackingApplication & Server MonitoringReal User MonitoringStackify Hidden Menu ItemFor DevelopersFor DevOps,,,,,
pg,6,Menu Application Performance ManagementCentralized LoggingCode ProfilingError TrackingApplication & Server MonitoringReal User MonitoringStackify Hidden Menu ItemFor DevelopersFor DevOpsResources,,,,,
pg,6,What is APM?PricingCase StudiesBlogDocumentationFree eBooksFree WebinarsVideosIdeas PortalROI CalculatorSupport,,,,,
pg,6,Menu What is APM?PricingCase StudiesBlogDocumentationFree eBooksFree WebinarsVideosIdeas PortalROI CalculatorSupportCompany,,,,,
pg,6,About UsNewsCareersGDPRSecurity InformationTerms & ConditionsPrivacy PolicySitemap,,,,,
pg,6,"Menu About UsNewsCareersGDPRSecurity InformationTerms & ConditionsPrivacy PolicySitemapPO Box 2159Mission, KS 66201816-888-5055",,,,,
pg,6,Facebook,,,,,
pg,6,Twitter,,,,,
pg,6,Youtube,,,,,
pg,6,Linkedin,,,,,
pg,6,© 2020 Stackify,,,,,
pg,6,Monitor SQL queries with Retrace’s lightweight code profiling View detailed snapshots of what your code is doing and how long it takesTrack every SQL query executed by your codeTrack the usage and performance anywhere your code makes HTTP Requests,,,,,
pg,6,Start Your Free Trial Now,,,,,
pg,7,Tuning PostgreSQL Database Parameters to Optimize Performance,,,,,
pg,7,Percona LiveAbout UsContact Us,,,,,
pg,7,Services,,,,,
pg,7,Support,,,,,
pg,7,MySQL Support,,,,,
pg,7,MongoDB Support,,,,,
pg,7,MariaDB Support,,,,,
pg,7,PostgreSQL Support,,,,,
pg,7,DBaaS Support,,,,,
pg,7,High Availability Support,,,,,
pg,7,Flexible Pricing,,,,,
pg,7,Support Tiers,,,,,
pg,7,Technical Account Managers,,,,,
pg,7,Managed Services,,,,,
pg,7,Percona Managed Database Services,,,,,
pg,7,Percona Advanced Managed Database Service,,,,,
pg,7,Consulting,,,,,
pg,7,Percona Cloud Cover,,,,,
pg,7,Percona Open Source Advance,,,,,
pg,7,Percona and Microsoft Azure Partnership,,,,,
pg,7,Policies,,,,,
pg,7,Training,,,,,
pg,7,Products,,,,,
pg,7,MySQL Database Software,,,,,
pg,7,Percona Distribution for MySQL,,,,,
pg,7,Percona Server for MySQL,,,,,
pg,7,Percona XtraDB Cluster,,,,,
pg,7,Percona XtraBackup,,,,,
pg,7,MongoDB Database Software,,,,,
pg,7,Percona Distribution for MongoDB,,,,,
pg,7,Percona Server for MongoDB,,,,,
pg,7,Percona Backup for MongoDB,,,,,
pg,7,PostgreSQL Database Software,,,,,
pg,7,Percona Monitoring and Management,,,,,
pg,7,Percona Kubernetes Operators,,,,,
pg,7,Open Source Database Tools,,,,,
pg,7,Percona Toolkit,,,,,
pg,7,Percona DBaaS Command Line Tool,,,,,
pg,7,Solutions,,,,,
pg,7,Eliminate Vendor Lock-In,,,,,
pg,7,Embrace the Cloud,,,,,
pg,7,Optimize Database Performance,,,,,
pg,7,Reduce Costs and Complexity,,,,,
pg,7,Resources,,,,,
pg,7,Calculators,,,,,
pg,7,Solution Briefs,,,,,
pg,7,White Papers,,,,,
pg,7,Webinars,,,,,
pg,7,Datasheets,,,,,
pg,7,Case Studies,,,,,
pg,7,Ebooks,,,,,
pg,7,Videos,,,,,
pg,7,Technical Presentations,,,,,
pg,7,About,,,,,
pg,7,About Percona,,,,,
pg,7,Contact Us,,,,,
pg,7,Customers,,,,,
pg,7,Careers,,,,,
pg,7,In The News,,,,,
pg,7,Percona Live,,,,,
pg,7,Events,,,,,
pg,7,Survey,,,,,
pg,7,Community,,,,,
pg,7,Forums,,,,,
pg,7,Community Blog,,,,,
pg,7,PMM Community Contributions,,,,,
pg,7,Tuning PostgreSQL Database Parameters to Optimize Performance,,,,,
pg,7,Back to the Homepage 31 Aug 2018 Ibrar Ahmed2019-08-07T09:11:09-04:00 By Ibrar Ahmed,,,,,
pg,7,"Insight for DBAs, Open Source, PostgreSQL",,,,,
pg,7,"database performance, parameters, PostgreSQL, PostgreSQL Performance Tuning",,,,,
pg,7,"4 CommentsOut of the box, the default PostgreSQL configuration is not tuned for any particular workload",,,,,
pg,7,"Default values are set to ensure that PostgreSQL runs everywhere, with the least resources it can consume and so that it doesn’t cause any vulnerabilities",,,,,
pg,7,It has default settings for all of the database parameters,,,,,
pg,7,It is primarily the responsibility of the database administrator or developer to tune PostgreSQL according to their system’s workload,,,,,
pg,7,"In this blog, we will establish basic guidelines for setting PostgreSQL database parameters to improve database performance according to workload",,,,,
pg,7,"Bear in mind that while optimizing PostgreSQL server configuration improves performance, a database developer must also be diligent when writing queries for the application",,,,,
pg,7,"If queries perform full table scans where an index could be used or perform heavy joins or expensive aggregate operations, then the system can still perform poorly even if the database parameters are tuned",,,,,
pg,7,It is important to pay attention to performance when writing database queries,,,,,
pg,7,"Nevertheless, database parameters are very important too, so let’s take a look at the eight that have the greatest potential to improve performancePostgreSQL’s Tuneable Parametersshared_bufferPostgreSQL uses its own buffer and also uses kernel buffered IO",,,,,
pg,7,"That means data is stored in memory twice, first in PostgreSQL buffer and then kernel buffer",,,,,
pg,7,"Unlike other databases, PostgreSQL does not provide direct IO",,,,,
pg,7,This is called double buffering,,,,,
pg,7,The PostgreSQL buffer is called shared_buffer which is the most effective tunable parameter for most operating systems,,,,,
pg,7,This parameter sets how much dedicated memory will be used by PostgreSQL for cache,,,,,
pg,7,The default value of shared_buffer is set very low and you will not get much benefit from that,,,,,
pg,7,It’s low because certain machines and operating systems do not support higher values,,,,,
pg,7,"But in most modern machines, you need to increase this value for optimal performance",,,,,
pg,7,The recommended value is 25% of your total machine RAM,1,1353,shared_buffers,P = 0.25 * memory,
pg,7,You should try some lower and higher values because in some cases we achieve good performance with a setting over 25%,,,,,
pg,7,The configuration really depends on your machine and the working data set,,,,,
pg,7,"If your working set of data can easily fit into your RAM, then you might want to increase the shared_buffer value to contain your entire database, so that the whole working set of data can reside in cache",,,,,
pg,7,"That said, you obviously do not want to reserve all RAM for PostgreSQL",1,1359,shared_buffers,P < memory,
pg,7,"In production environments, it is observed that a large value for shared_buffer gives really good performance, though you should always benchmark to find the right balance",,,,,
pg,7,Check shared_buffer ValueTransact-SQL,,,,,
pg,7,testdb=# SHOW shared_buffers;,,,,,
pg,7,shared_buffers,,,,,
pg,7,----------------,,,,,
pg,7,128MB,,,,,
pg,7,"(1 row)12345testdb=# SHOW shared_buffers;shared_buffers----------------128MB(1 row) Note: Be careful as some kernels do not allow a bigger value, specifically in Windows there is no use of higher value",,,,,
pg,7,wal_buffersPostgreSQL writes its WAL (write ahead log) record into the buffers and then these buffers are flushed to disk,,,,,
pg,7,"The default size of the buffer, defined by wal_buffers, is 16MB, but if you have a lot of concurrent connections then a higher value can give better performance",,,,,
pg,7,effective_cache_sizeThe effective_cache_size provides an estimate of the memory available for disk caching,,,,,
pg,7,"It is just a guideline, not the exact allocated memory or cache size",,,,,
pg,7,It does not allocate actual memory but tells the optimizer the amount of cache available in the kernel,,,,,
pg,7,"If the value of this is set too low the query planner can decide not to use some indexes, even if they’d be helpful",,,,,
pg,7,"Therefore, setting a large value is always beneficial",,,,,
pg,7,work_memThis configuration is used for complex sorting,,,,,
pg,7,If you have to do complex sorting then increase the value of work_mem for good results,,,,,
pg,7,In-memory sorts are much faster than sorts spilling to disk,,,,,
pg,7,Setting a very high value can cause a memory bottleneck for your deployment environment because this parameter is per user sort operation,,,,,
pg,7,"Therefore, if you have many users trying to execute sort operations, then the system will allocate work_mem * total sort operations  for all users",,,,,
pg,7,Setting this parameter globally can cause very high memory usage,,,,,
pg,7,So it is highly recommended to modify this at the session level,,,,,
pg,7,work_mem = 2MBShell,,,,,
pg,7,"testdb=# SET work_mem TO ""2MB"";",,,,,
pg,7,testdb=# EXPLAIN SELECT * FROM bar ORDER BY bar,,,,,
pg,7,b;,,,,,
pg,7,QUERY PLAN,,,,,
pg,7,-----------------------------------------------------------------------------------,,,,,
pg,7,Gather Merge  (cost=509181.84,,,,,
pg,7,1706542.14 rows=10000116 width=24),,,,,
pg,7,Workers Planned: 4,,,,,
pg,7,->  Sort  (cost=508181.79,,,,,
pg,7,514431.86 rows=2500029 width=24),,,,,
pg,7,Sort Key: b,,,,,
pg,7,->  Parallel Seq Scan on bar  (cost=0.00,,,,,
pg,7,88695.29 rows=2500029 width=24),,,,,
pg,7,"(5 rows)12345678910testdb=# SET work_mem TO ""2MB"";testdb=# EXPLAIN SELECT * FROM bar ORDER BY bar",,,,,
pg,7,b;                                    QUERY PLAN                                     -----------------------------------------------------------------------------------Gather Merge  (cost=509181.84,,,,,
pg,7,1706542.14 rows=10000116 width=24)   Workers Planned: 4   ->  Sort  (cost=508181.79,,,,,
pg,7,514431.86 rows=2500029 width=24)         Sort Key: b         ->  Parallel Seq Scan on bar  (cost=0.00,,,,,
pg,7,88695.29 rows=2500029 width=24)(5 rows) The initial query’s sort node has an estimated cost of 514431.86,,,,,
pg,7,Cost is an arbitrary unit of computation,,,,,
pg,7,"For the above query, we have a work_mem of only 2MB",,,,,
pg,7,"For testing purposes, let’s increase this to 256MB and see if there is any impact on cost",1,1402,work_mem,P = 256MB,
pg,7,work_mem = 256MBShell,,,,,
pg,7,"testdb=# SET work_mem TO ""256MB"";",,,,,
pg,7,testdb=# EXPLAIN SELECT * FROM bar ORDER BY bar,,,,,
pg,7,b;,,,,,
pg,7,QUERY PLAN,,,,,
pg,7,-----------------------------------------------------------------------------------,,,,,
pg,7,Gather Merge  (cost=355367.34,,,,,
pg,7,1552727.64 rows=10000116 width=24),,,,,
pg,7,Workers Planned: 4,,,,,
pg,7,->  Sort  (cost=354367.29,,,,,
pg,7,360617.36 rows=2500029 width=24),,,,,
pg,7,Sort Key: b,,,,,
pg,7,->  Parallel Seq Scan on bar  (cost=0.00,,,,,
pg,7,"88695.29 rows=2500029 width=24)123456789testdb=# SET work_mem TO ""256MB"";testdb=# EXPLAIN SELECT * FROM bar ORDER BY bar",,,,,
pg,7,b;                                    QUERY PLAN                                     -----------------------------------------------------------------------------------Gather Merge  (cost=355367.34,,,,,
pg,7,1552727.64 rows=10000116 width=24)   Workers Planned: 4   ->  Sort  (cost=354367.29,,,,,
pg,7,360617.36 rows=2500029 width=24)         Sort Key: b         ->  Parallel Seq Scan on bar  (cost=0.00,,,,,
pg,7,88695.29 rows=2500029 width=24) The query cost is reduced to 360617.36 from 514431.86 — a 30% reduction,,,,,
pg,7,maintenance_work_memmaintenance_work_mem is a memory setting used for maintenance tasks,,,,,
pg,7,The default value is 64MB,,,,,
pg,7,"Setting a large value helps in tasks like VACUUM, RESTORE, CREATE INDEX, ADD FOREIGN KEY and ALTER TABLE",,,,,
pg,7,maintenance_work_mem = 10MBShell,,,,,
pg,7,postgres=# CHECKPOINT;,,,,,
pg,7,postgres=# SET maintenance_work_mem to '10MB';,,,,,
pg,7,postgres=# CREATE INDEX foo_idx ON foo (c);,,,,,
pg,7,CREATE INDEX,,,,,
pg,7,Time: 170091.371 ms (02:50.091)123456postgres=# CHECKPOINT;postgres=# SET maintenance_work_mem to '10MB'; postgres=# CREATE INDEX foo_idx ON foo (c);CREATE INDEXTime: 170091.371 ms (02:50.091) maintenance_work_mem = 256MBShell,,,,,
pg,7,postgres=# CHECKPOINT;,,,,,
pg,7,postgres=# set maintenance_work_mem to '256MB';,,,,,
pg,7,postgres=# CREATE INDEX foo_idx ON foo (c);,,,,,
pg,7,CREATE INDEX,,,,,
pg,7,"Time: 111274.903 ms (01:51.275)123456postgres=# CHECKPOINT;postgres=# set maintenance_work_mem to '256MB'; postgres=# CREATE INDEX foo_idx ON foo (c);CREATE INDEXTime: 111274.903 ms (01:51.275) The index creation time is 170091.371ms when maintenance_work_mem is set to only 10MB, but that is reduced to 111274.903 ms when we increase maintenance_work_mem setting to 256MB",1,,maintenance_work_mem,P = 256MB,
pg,7,synchronous_commitThis is used to enforce that commit will wait for WAL to be written on disk before returning a success status to the client,,,,,
pg,7,This is a trade-off between performance and reliability,,,,,
pg,7,"If your application is designed such that performance is more important than the reliability, then turn off synchronous_commit",1,,synchronous_commit,P = off,
pg,7,This means that there will be a time gap between the success status and a guaranteed write to disk,,,,,
pg,7,"In the case of a server crash, data might be lost even though the client received a success message on commit",,,,,
pg,7,"In this case, a transaction commits very quickly because it will not wait for a WAL file to be flushed, but reliability is compromised",,,,,
pg,7,"checkpoint_timeout, checkpoint_completion_targetPostgreSQL writes changes into WAL",,,,,
pg,7,The checkpoint process flushes the data into the data files,,,,,
pg,7,This activity is done when CHECKPOINT occurs,,,,,
pg,7,This is an expensive operation and can cause a huge amount of IO,,,,,
pg,7,This whole process involves expensive disk read/write operations,,,,,
pg,7,Users can always issue CHECKPOINT whenever it seems necessary or automate the system by PostgreSQL’s parameters checkpoint_timeout and checkpoint_completion_target,,,,,
pg,7,The checkpoint_timeout parameter is used to set time between WAL checkpoints,,,,,
pg,7,"Setting this too low decreases crash recovery time, as more data is written to disk, but it hurts performance too since every checkpoint ends up consuming valuable system resources",,,,,
pg,7,The checkpoint_completion_target is the fraction of time between checkpoints for checkpoint completion,,,,,
pg,7,A high frequency of checkpoints can impact performance,,,,,
pg,7,"For smooth checkpointing, checkpoint_timeout must be a low value",,,,,
pg,7,Otherwise the OS will accumulate all the dirty pages until the ratio is met and then go for a big flush,,,,,
pg,7,ConclusionThere are more parameters that can be tuned to gain better performance but those have less impact than the ones highlighted here,,,,,
pg,7,"In the end, we must always keep in mind that not all parameters are relevant for all applications types",,,,,
pg,7,Some applications perform better by tuning a parameter and some don’t,,,,,
pg,7,Tuning PostgreSQL Database Parameters must be done for the specific needs of an application and the OS it runs on,,,,,
pg,7,"Related postsYou can read my post about tuning Linux parameters for PostgreSQL database performancePlus another recent post on benchmarks:Tuning PostgreSQL for sysbench-tpccYou May Also LikeIf your PostgreSQL database is running on a Linux OS, be sure to read my post about tuning Linux parameters to optimize PostgreSQL database performance",,,,,
pg,7,"After tuning your PostgreSQL database to improve its performance, the next step is to put your optimized database to the test",,,,,
pg,7,"With sysbench, you can quickly evaluate your database’s performance",,,,,
pg,7,This process is especially important if you plan to run your database under an intensive workload,,,,,
pg,7,"Our blog article, Tuning PostgreSQL for sysbench-tpcc, can guide you through the benchmarking process",,,,,
pg,7,Optimizing your database is one way to course-correct poor database performance,,,,,
pg,7,"However, the problem is not always the database itself! There are several causes that can contribute to your database’s lackluster performance",,,,,
pg,7,Our solution brief details the Top 5 Causes of Poor Database Performance,,,,,
pg,7,"With this crucial information, you can better implement a quick and efficient resolution",,,,,
pg,7,Related,,,,,
pg,7,AuthorIbrar AhmedJoined Percona in the month of July 2018,,,,,
pg,7,"Before joining Percona, Ibrar worked as a Senior Database Architect at EnterpriseDB for 10 Years",,,,,
pg,7,Ibrar has 18 years of software development experience,,,,,
pg,7,Ibrar authored multiple books on PostgreSQL,,,,,
pg,7,Share this postFacebookTwitterLinkedInEmailComments (4),,,,,
pg,7,fpuga,,,,,
pg,7,I understad that most of this suggestions like using 25% of RAM for shared_buffer is for servers that are only running PostgreSQL and not for servers that also run a web server or other services,,,,,
pg,7,"Is this true? September 1, 2018 at 11:42 am",,,,,
pg,7,Ibrar Ahmed,,,,,
pg,7,Most of the tuning advices are for the dedicated “database” server,,,,,
pg,7,In case of shared system where you are running database and some,,,,,
pg,7,other server on a single machine need to be tuned accordingly,,,,,
pg,7,"September 3, 2018 at 10:50 am",,,,,
pg,7,Glyn,,,,,
pg,7,"That shared_buffer advice isn’t great, especially if applied to modern systems with large volumes of ram",,,,,
pg,7,"Generally there’s a tipping point, and it’s much lower than you’d think",,,,,
pg,7,,,,,,
pg,7,A better approach is to use pg_buffercache extension to inspect the system under typical load and tune down,,,,,
pg,7,"September 3, 2018 at 6:26 am",,,,,
pg,7,joshuamills235,,,,,
pg,7,In this post you are very thoughtful,,,,,
pg,7,I am very happy to read this post,,,,,
pg,7,It’s so motivational post for me,,,,,
pg,7,I would like to very thankful for this best and most important information,,,,,
pg,7,For more info :-https://www,,,,,
pg,7,autoupgrades,,,,,
pg,7,co,,,,,
pg,7,"nz/ August 2, 2019 at 9:43 amComments are closed",,,,,
pg,7,Use Percona's Technical Forum to ask any follow-up questions on this blog topic,,,,,
pg,7,,,,,,
pg,7,"How Can We Help? Percona's experts can maximize your application performance with our open source database support, managed services or consulting",,,,,
pg,7,Contact usSubscribeWant to get weekly updates listing the latest blog posts? Subscribe now and we'll send you an update every Friday at 1pm ET,,,,,
pg,7,Subscribe to our blog CategoriesMySQL(3355)Insight for DBAs(1528)Percona Software(1479)Percona Events(870)MongoDB(549)Insight for Developers(472)Benchmarks(340)Percona Live(332)Webinars(287)Cloud(276)PostgreSQL(176)Monitoring(164)MariaDB(157)Percona Services(138)ProxySQL(127)Security(125)Hardware and Storage(105)Storage Engine(52)Database Trends(46)Percona Announcements(10)  Percona Blog RSS Feed,,,,,
pg,7,Upcoming WebinarsThe Open Source Alternative to Paying for MongoDBWhy PostgreSQL Is Becoming A Migration Target For EnterpriseHow To Measure Linux Performance WrongConverting MongoDB to Percona Server for MongoDBMoving MongoDB to the Cloud: Strategies and Points To ConsiderAll Webinars,,,,,
pg,7,"»ServicesSupportManaged ServicesConsultingTrainingProductsMySQL SoftwareMongoDB SoftwarePostgreSQL DistributionKubernetesMonitoring & ManagementResourcesSolution BriefsWhite PapersWebinarsCase StudiesDatasheetsMoreBlogCommunity BlogTechnical Forum HelpAboutCustomersNewsroomAboutCareers Contact UsSales & General Inquiries (888) 316-9775 (USA) (208) 473-2904 (USA) +44 203 608 6727 (UK) 0-808-169-6490 (UK) 0-800-724-4569 (GER)MySQL, InnoDB, MariaDB and MongoDB are trademarks of their respective owners",,,,,
pg,7,Proudly running Percona Server for MySQL,,,,,
pg,7,Terms of Use |,,,,,
pg,7,Privacy |,,,,,
pg,7,Copyright |,,,,,
pg,7,LegalCopyright © 2006-2020 Percona LLC,,,,,
pg,7,,,,,,
pg,8,A Performance Cheat Sheet for PostgreSQL | Severalnines,,,,,
pg,8,Login,,,,,
pg,8,Sign up,,,,,
pg,8,ProductClusterControl Free Community Edition,,,,,
pg,8,ClusterControl Enterprise Edition,,,,,
pg,8,Severalnines Labs,,,,,
pg,8,Download,,,,,
pg,8,Pricing Plans,,,,,
pg,8,ResourcesWebinars,,,,,
pg,8,Whitepapers,,,,,
pg,8,Tutorials,,,,,
pg,8,Trainings,,,,,
pg,8,ClusterControl Certification,,,,,
pg,8,SupportDocumentation,,,,,
pg,8,Community Help,,,,,
pg,8,ClusterControl on Slack,,,,,
pg,8,Knowledge Base,,,,,
pg,8,Blog,,,,,
pg,8,About usCompany,,,,,
pg,8,Careers,,,,,
pg,8,Customers,,,,,
pg,8,Partners,,,,,
pg,8,Contact us,,,,,
pg,8,Login / Sign Up,,,,,
pg,8,Subscribe for newsletter,,,,,
pg,8,Filters,,,,,
pg,8,Severalnines Database Blog,,,,,
pg,8,Back to Home Page,,,,,
pg,8,Clear all,,,,,
pg,8,Apply,,,,,
pg,8,Filters,,,,,
pg,8,Close Filters,,,,,
pg,8,Subscribe,,,,,
pg,8,Categories:,,,,,
pg,8,ClusterControl,,,,,
pg,8,Backup Management,,,,,
pg,8,Monitoring & Alerting,,,,,
pg,8,Deployment & Scaling,,,,,
pg,8,Upgrades & Patches,,,,,
pg,8,Security & Compliance,,,,,
pg,8,Operational Reporting,,,,,
pg,8,Configuration Management,,,,,
pg,8,Recovery & Repair,,,,,
pg,8,Performance Management,,,,,
pg,8,Cloud,,,,,
pg,8,Industry News & Events,,,,,
pg,8,Database - General,,,,,
pg,8,Technologies:,,,,,
pg,8,Docker,,,,,
pg,8,Galera Cluster,,,,,
pg,8,MariaDB,,,,,
pg,8,MongoDB,,,,,
pg,8,MySQL,,,,,
pg,8,MySQL NDB Cluster,,,,,
pg,8,PostgreSQL,,,,,
pg,8,TimescaleDB,,,,,
pg,8,Tags:,,,,,
pg,8,Home Page,,,,,
pg,8,A Performance Cheat Sheet for PostgreSQL,,,,,
pg,8,Sebastian Insausti,,,,,
pg,8,"June 18, 2018",,,,,
pg,8,Severalnines,,,,,
pg,8,"August 26, 2019",,,,,
pg,8,Posted in:,,,,,
pg,8,Performance Management,,,,,
pg,8,PostgreSQL,,,,,
pg,8,Performance is one of the most important and most complex tasks when managing a database,,,,,
pg,8,"It can be affected by the configuration, the hardware or even the design of the system",,,,,
pg,8,"By default, PostgreSQL is configured with compatibility and stability in mind, since the performance depends a lot on the hardware and on our system itself",,,,,
pg,8,We can have a system with a lot of data being read but the information does not change frequently,,,,,
pg,8,Or we can have a system that writes continuously,,,,,
pg,8,"For this reason, it is impossible to define a default configuration that works for all types of workloads",,,,,
pg,8,,,,,,
pg,8,"In this blog, we will see how one goes about analyzing the workload, or queries, that are running",,,,,
pg,8,We shall then review some basic configuration parameters to improve the performance of our PostgreSQL database,,,,,
pg,8,"As we mentioned, we will see only some of the parameters",,,,,
pg,8,"The list of PostgreSQL parameters is extensive, we would only touch on some of the key ones",,,,,
pg,8,"However, one can always consult the official documentation to delve into the parameters and configurations that seem most important or useful in our environment",,,,,
pg,8,,,,,,
pg,8,EXPLAIN,,,,,
pg,8,One of the first steps we can take to understand how to improve the performance of our database is to analyze the queries that are made,,,,,
pg,8,,,,,,
pg,8,PostgreSQL devises a query plan for each query it receives,,,,,
pg,8,"To see this plan, we will use EXPLAIN",,,,,
pg,8,,,,,,
pg,8,The structure of a query plan is a tree of plan nodes,,,,,
pg,8,The nodes in the lower level of the tree are scan nodes,,,,,
pg,8,They return raw rows from a table,,,,,
pg,8,There are different types of scan nodes for different methods of accessing the table,,,,,
pg,8,The EXPLAIN output has a line for each node in the plan tree,,,,,
pg,8,,,,,,
pg,8,"world=# EXPLAIN SELECT * FROM city t1,country t2 WHERE id>100 AND t1",,,,,
pg,8,opulation>700000 AND t2,,,,,
pg,8,opulation<7000000;,,,,,
pg,8,QUERY PLAN,,,,,
pg,8,--------------------------------------------------------------------------,,,,,
pg,8,Nested Loop,,,,,
pg,8,(cost=0.00,,,,,
pg,8,734.81 rows=50662 width=144),,,,,
pg,8,->,,,,,
pg,8,Seq Scan on city t1,,,,,
pg,8,(cost=0.00,,,,,
pg,8,93.19 rows=347 width=31),,,,,
pg,8,Filter: ((id > 100) AND (population > 700000)),,,,,
pg,8,->,,,,,
pg,8,Materialize,,,,,
pg,8,(cost=0.00,,,,,
pg,8,8.72 rows=146 width=113),,,,,
pg,8,->,,,,,
pg,8,Seq Scan on country t2,,,,,
pg,8,(cost=0.00,,,,,
pg,8,7.99 rows=146 width=113),,,,,
pg,8,Filter: (population < 7000000),,,,,
pg,8,(6 rows),,,,,
pg,8,This command shows how the tables in our query will be scanned,,,,,
pg,8,Let's see what these values correspond to that we can observe in our EXPLAIN,,,,,
pg,8,,,,,,
pg,8,The first parameter shows the operation that the engine is performing on the data in this step,,,,,
pg,8,,,,,,
pg,8,Estimated start-up cost,,,,,
pg,8,This is the time spent before the output phase can begin,,,,,
pg,8,,,,,,
pg,8,Estimated total cost,,,,,
pg,8,This is stated on the assumption that the plan node is run to completion,,,,,
pg,8,"In practice, a node's parent node might stop short of reading all available rows",,,,,
pg,8,,,,,,
pg,8,Estimated number of rows output by this plan node,,,,,
pg,8,"Again, the node is assumed to be run to completion",,,,,
pg,8,,,,,,
pg,8,Estimated average width of rows output by this plan node,,,,,
pg,8,,,,,,
pg,8,"The most critical part of the display is the estimated statement execution cost, which is the planner's guess at how long it will take to run the statement",,,,,
pg,8,"When comparing how effective one query is against the other, we will in practice be comparing the cost values of them",,,,,
pg,8,,,,,,
pg,8,It's important to understand that the cost of an upper-level node includes the cost of all its child nodes,,,,,
pg,8,It's also important to realize that the cost only reflects things that the planner cares about,,,,,
pg,8,"In particular, the cost does not consider the time spent transmitting result rows to the client, which could be an important factor in the real elapsed time; but the planner ignores it because it cannot change it by altering the plan",,,,,
pg,8,,,,,,
pg,8,The costs are measured in arbitrary units determined by the planner's cost parameters,,,,,
pg,8,"Traditional practice is to measure the costs in units of disk page fetches; that is, seq_page_cost is conventionally set to 1.0 and the other cost parameters are set relative to that",,,,,
pg,8,,,,,,
pg,8,EXPLAIN ANALYZE,,,,,
pg,8,"With this option, EXPLAIN executes the query, and then displays the true row counts and true run time accumulated within each plan node, along with the same estimates that a plain EXPLAIN shows",,,,,
pg,8,,,,,,
pg,8,Let's see an example of the use of this tool,,,,,
pg,8,,,,,,
pg,8,"world=# EXPLAIN ANALYZE SELECT * FROM city t1,country t2 WHERE id>100 AND t1",,,,,
pg,8,opulation>700000 AND t2,,,,,
pg,8,opulation<7000000;,,,,,
pg,8,QUERY PLAN,,,,,
pg,8,----------------------------------------------------------------------------------------------------------------------,,,,,
pg,8,Nested Loop,,,,,
pg,8,(cost=0.00,,,,,
pg,8,734.81 rows=50662 width=144) (actual time=0.081,,,,,
pg,8,22.066 rows=51100 loops=1),,,,,
pg,8,->,,,,,
pg,8,Seq Scan on city t1,,,,,
pg,8,(cost=0.00,,,,,
pg,8,93.19 rows=347 width=31) (actual time=0.069,,,,,
pg,8,0.618 rows=350 loops=1),,,,,
pg,8,Filter: ((id > 100) AND (population > 700000)),,,,,
pg,8,Rows Removed by Filter: 3729,,,,,
pg,8,->,,,,,
pg,8,Materialize,,,,,
pg,8,(cost=0.00,,,,,
pg,8,8.72 rows=146 width=113) (actual time=0.000,,,,,
pg,8,0.011 rows=146 loops=350),,,,,
pg,8,->,,,,,
pg,8,Seq Scan on country t2,,,,,
pg,8,(cost=0.00,,,,,
pg,8,7.99 rows=146 width=113) (actual time=0.007,,,,,
pg,8,0.058 rows=146 loops=1),,,,,
pg,8,Filter: (population < 7000000),,,,,
pg,8,Rows Removed by Filter: 93,,,,,
pg,8,Planning time: 0.136 ms,,,,,
pg,8,Execution time: 24.627 ms,,,,,
pg,8,(10 rows),,,,,
pg,8,"If we do not find the reason why our queries take longer than they should, we can check this blog for more information",,,,,
pg,8,,,,,,
pg,8,VACUUM,,,,,
pg,8,"The VACUUM process is responsible for several maintenance tasks within the database, one of them recovering storage occupied by dead tuples",,,,,
pg,8,"In the normal operation of PostgreSQL, tuples that are deleted or obsoleted by an update are not physically removed from their table; they remain present until a VACUUM is performed",,,,,
pg,8,"Therefore, it is necessary to do the VACUUM periodically, especially in frequently updated tables",,,,,
pg,8,,,,,,
pg,8,"If the VACUUM is taking too much time or resources, it means that we must do it more frequently, so that each operation has less to clean",,,,,
pg,8,,,,,,
pg,8,"In any case you may need to disable the VACUUM, for example when loading data in large quantities",,,,,
pg,8,,,,,,
pg,8,The VACUUM simply recovers space and makes it available for reuse,,,,,
pg,8,"This form of the command can operate in parallel with the normal reading and writing of the table, since an exclusive lock is not obtained",,,,,
pg,8,"However, the additional space is not returned to the operating system (in most cases); it is only available for reuse within the same table",,,,,
pg,8,,,,,,
pg,8,"VACUUM FULL rewrites all the contents of the table in a new disk file without additional space, which allows the unused space to return to the operating system",,,,,
pg,8,This form is much slower and requires an exclusive lock on each table while processing,,,,,
pg,8,,,,,,
pg,8,VACUUM ANALYZE performs a VACUUM and then an ANALYZE for each selected table,,,,,
pg,8,This is a practical way of combining routine maintenance scripts,,,,,
pg,8,,,,,,
pg,8,ANALYZE collects statistics on the contents of the tables in the database and stores the results in pg_statistic,,,,,
pg,8,"Subsequently, the query planner uses these statistics to help determine the most efficient execution plans for queries",,,,,
pg,8,,,,,,
pg,8,Download the Whitepaper Today,,,,,
pg,8,PostgreSQL Management & Automation with ClusterControl,,,,,
pg,8,"Learn about what you need to know to deploy, monitor, manage and scale PostgreSQL",,,,,
pg,8,Download the Whitepaper,,,,,
pg,8,Configuration parameters,,,,,
pg,8,To modify these parameters we must edit the file $ PGDATA / postgresql,,,,,
pg,8,conf,,,,,
pg,8,We must bear in mind that some of them require a restart of our database,,,,,
pg,8,,,,,,
pg,8,max_connections,,,,,
pg,8,Determines the maximum number of simultaneous connections to our database,,,,,
pg,8,"There are memory resources that can be configured per client, therefore, the maximum number of clients can suggest the maximum amount of memory used",,,,,
pg,8,,,,,,
pg,8,superuser_reserved_connections,,,,,
pg,8,"In case of reaching the limit of max_connection, these connections are reserved for superuser",,,,,
pg,8,,,,,,
pg,8,shared_buffers,,,,,
pg,8,Sets the amount of memory that the database server uses for shared memory buffers,,,,,
pg,8,"If you have a dedicated database server with 1 GB or more of RAM, a reasonable initial value for shared_buffers is 25% of your system's memory",1,,shared_buffers,P = 0.25 * memory,Memory >= 1GB
pg,8,"Larger configurations for shared_buffers generally require a corresponding increase in max_wal_size, to extend the process of writing large amounts of new or modified data over a longer period of time",,,,,
pg,8,,,,,,
pg,8,temp_buffers,,,,,
pg,8,Sets the maximum number of temporary buffers used for each session,,,,,
pg,8,These are local session buffers used only to access temporary tables,,,,,
pg,8,A session will assign the temporary buffers as needed up to the limit given by temp_buffers,,,,,
pg,8,,,,,,
pg,8,work_mem,,,,,
pg,8,"Specifies the amount of memory that will be used by the internal operations of ORDER BY, DISTINCT, JOIN, and hash tables before writing to the temporary files on disk",,,,,
pg,8,When configuring this value we must take into account that several sessions be executing these operations at the same time and each operation will be allowed to use as much memory as specified by this value before it starts to write data in temporary files,,,,,
pg,8,,,,,,
pg,8,This option was called sort_mem in older versions of PostgreSQL,,,,,
pg,8,,,,,,
pg,8,maintenance_work_mem,,,,,
pg,8,"Specifies the maximum amount of memory that maintenance operations will use, such as VACUUM, CREATE INDEX, and ALTER TABLE ADD FOREIGN KEY",,,,,
pg,8,"Since only one of these operations can be executed at the same time by a session, and an installation usually does not have many of them running simultaneously, it can be larger than the work_mem",1,1742,maintenance_work_mem,P > work_mem,
pg,8,Larger configurations can improve performance for VACUUM and database restores,,,,,
pg,8,,,,,,
pg,8,"When the autovacuum is executed, this memory can be assigned the number of times in which the autovacuum_max_workers parameter is configured, so we must take this into account, or otherwise, configure the autovacuum_work_mem parameter to manage this separately",,,,,
pg,8,,,,,,
pg,8,fsync,,,,,
pg,8,"If fsync is enabled, PostgreSQL will try to make sure that the updates are physically written to the disk",,,,,
pg,8,This ensures that the database cluster can be recovered to a consistent state after an operating system or hardware crash,,,,,
pg,8,,,,,,
pg,8,"While disabling fsync generally improves performance, it can cause data loss in the event of a power failure or a system crash",1,,fsync,P = off,
pg,8,"Therefore, it is only advisable to deactivate fsync if you can easily recreate your entire database from external data",,,,,
pg,8,,,,,,
pg,8,checkpoint_segments (PostgreSQL < 9.5),,,,,
pg,8,Maximum number of record file segments between automatic WAL control points (each segment is normally 16 megabytes),,,,,
pg,8,Increasing this parameter can increase the amount of time needed to recover faults,,,,,
pg,8,"In a system with a lot of traffic, it can affect the performance if it is set to a very low value",,,,,
pg,8,It is recommended to increase the value of checkpoint_segments on systems with many data modifications,,,,,
pg,8,,,,,,
pg,8,"Also, a good practice is to save the WAL files on a disk other than PGDATA",,,,,
pg,8,This is useful both for balancing the writing and for security in case of hardware failure,,,,,
pg,8,,,,,,
pg,8,"As of PostgreSQL 9.5 the configuration variable ""checkpoint_segments"" was removed, and was replaced by ""max_wal_size"" and ""min_wal_size""",,,,,
pg,8,max_wal_size (PostgreSQL >= 9.5),,,,,
pg,8,Maximum size the WAL is allowed to grow between the control points,,,,,
pg,8,The size of WAL can exceed max_wal_size in special circumstances,,,,,
pg,8,Increasing this parameter can increase the amount of time needed to recover faults,,,,,
pg,8,,,,,,
pg,8,min_wal_size (PostgreSQL >= 9.5),,,,,
pg,8,"When the WAL file is kept below this value, it is recycled for future use at a checkpoint, instead of being deleted",,,,,
pg,8,"This can be used to ensure that enough WAL space is reserved to handle spikes in the use of WAL, for example when executing large batch jobs",,,,,
pg,8,,,,,,
pg,8,wal_sync_method,,,,,
pg,8,Method used to force WAL updates to the disk,,,,,
pg,8,"If fsync is disabled, this setting has no effect",,,,,
pg,8,,,,,,
pg,8,wal_buffers,,,,,
pg,8,The amount of shared memory used for WAL data that has not yet been written to disk,,,,,
pg,8,"The default setting is about 3% of shared_buffers, not less than 64KB or more than the size of a WAL segment (usually 16MB)",,,,,
pg,8,Setting this value to at least a few MB can improve write performance on a server with many concurrent transactions,,,,,
pg,8,,,,,,
pg,8,effective_cache_size,,,,,
pg,8,This value is used by the query planner to take into account plans that may or may not fit in memory,,,,,
pg,8,This is taken into account in the cost estimates of using an index; a high value makes it more likely that index scans are used and a low value makes it more likely that sequential scans will be used,,,,,
pg,8,A reasonable value would be 50% of the RAM,1,1784,effective_cache_size,P = 0.5 * memory,
pg,8,,,,,,
pg,8,default_statistics_target,,,,,
pg,8,PostgreSQL collects statistics from each of the tables in its database to decide how queries will be executed on them,,,,,
pg,8,"By default, it does not collect too much information, and if you are not getting good execution plans, you should increase this value and then run ANALYZE in the database again (or wait for the AUTOVACUUM)",,,,,
pg,8,,,,,,
pg,8,synchronous_commit,,,,,
pg,8,"Specifies whether the transaction commit will wait for the WAL records to be written to disk before the command returns a ""success"" indication to the client",,,,,
pg,8,"The possible values ​​are: ""on"", ""remote_apply"", ""remote_write"", ""local"" and ""off""",,,,,
pg,8,"The default setting is ""on""",,,,,
pg,8,"When it is disabled, there may be a delay between the time the client returns, and when the transaction is guaranteed to be secure against a server lock",,,,,
pg,8,"Unlike fsync, disabling this parameter does not create any risk of database inconsistency: a crash of the operating system or database may result in the loss of some recent transactions allegedly committed, but the state of the database will be exactly the same as if those transactions had been cancelled cleanly",,,,,
pg,8,"Therefore, deactivating synchronous_commit can be a useful alternative when performance is more important than the exact certainty about the durability of a transaction",1,,synchronous_commit,P = off,
pg,8,,,,,,
pg,8,Logging,,,,,
pg,8,There are several types of data to log that may be useful or not,,,,,
pg,8,Let's see some of them:,,,,,
pg,8,log_min_error_statement: Sets the minimum logging level,,,,,
pg,8,,,,,,
pg,8,log_min_duration_statement: Used to record slow queries in the system,,,,,
pg,8,,,,,,
pg,8,log_line_prefix: Adheres information at the beginning of each log line,,,,,
pg,8,,,,,,
pg,8,"log_statement: You can choose between NONE, DDL, MOD, ALL",,,,,
pg,8,"Using ""all"" can cause performance problems",1,1810,log_statement,P != all,
pg,8,,,,,,
pg,8,Design,,,,,
pg,8,"In many cases, the design of our database can affect performance",,,,,
pg,8,"We must be careful in our design, normalizing our schema and avoiding redundant data",,,,,
pg,8,In many cases it is convenient to have several small tables instead of one huge table,,,,,
pg,8,"But as we said before, everything depends on our system and there is not a single possible solution",,,,,
pg,8,,,,,,
pg,8,We must also use the indexes responsibly,,,,,
pg,8,"We should not create indexes for each field or combination of fields, since, although we do not have to travel the entire table, we are using disk space and adding overhead to write operations",,,,,
pg,8,,,,,,
pg,8,Another very useful tool is the management of connection pool,,,,,
pg,8,"If we have a system with a lot of load, we can use this to avoid saturating the connections in the database and to be able to reuse them",,,,,
pg,8,,,,,,
pg,8,Hardware,,,,,
pg,8,"As we mentioned at the beginning of this blog, hardware is one of the important factors that directly affect the performance of our database",,,,,
pg,8,Let's see some points to keep in mind,,,,,
pg,8,,,,,,
pg,8,"Memory: The more RAM we have, the more memory data we can handle, and that means better performance",,,,,
pg,8,"The speed of writing and reading on disk is much slower than in memory, therefore, the more information we can have in memory, the better performance we will have",,,,,
pg,8,,,,,,
pg,8,"CPU: Maybe it does not make much sense to say this, but the more CPU we have, the better",,,,,
pg,8,"In any case it is not the most important in terms of hardware, but if we can have a good CPU, our processing capacity will improve and that directly impacts our database",,,,,
pg,8,,,,,,
pg,8,"Hard disk: We have several types of discs that we can use, SCSI, SATA, SAS, IDE",,,,,
pg,8,We also have solid state disks,,,,,
pg,8,"We must compare quality / price, which we should use to compare its speed",,,,,
pg,8,"But the type of disk is not the only thing to consider, we must also see how to configure them",,,,,
pg,8,"If we want good performance, we can use RAID10, keeping the WALs on another disk outside the RAID",,,,,
pg,8,It is not recommended to use RAID5 since the performance of this type of RAID for databases is not good,,,,,
pg,8,,,,,,
pg,8,Conclusion,,,,,
pg,8,"After taking into account the points mentioned in this blog, we can perform a benchmark to verify the behavior of the database",,,,,
pg,8,,,,,,
pg,8,It is also important to have our database monitored to determine if we are facing a performance problem and to be able to solve it as soon as possible,,,,,
pg,8,"For this task there are several tools such as Nagios, ClusterControl or Zabbix, among others, that allow us not only to monitor, but with some of them, allows us to take proactive action before the problem occurs",,,,,
pg,8,"With ClusterControl, in addition to monitoring, administration and several other utilities, we can receive recommendations on what actions we can take when receiving performance alerts",,,,,
pg,8,This allows us to have an idea of how to solve potential problems,,,,,
pg,8,,,,,,
pg,8,This blog is not intended to be an exhaustive guide to how to improve database performance,,,,,
pg,8,"Hopefully, It gives a clearer picture of what things can become important and some of the basic parameters that can be configured",,,,,
pg,8,Do not hesitate to let us know if we’ve missed any important ones,,,,,
pg,8,,,,,,
pg,8,Previous blog,,,,,
pg,8,Next blog,,,,,
pg,8,Related resources:,,,,,
pg,8,Blog,,,,,
pg,8,Why is PostgreSQL Running Slow? Tips & Tricks to Get to the Source,,,,,
pg,8,Blog,,,,,
pg,8,An Overview of Database Indexing in PostgreSQL,,,,,
pg,8,Blog,,,,,
pg,8,How to Benchmark PostgreSQL Performance,,,,,
pg,8,Blog,,,,,
pg,8,A Guide to Using pgBouncer for PostgreSQL,,,,,
pg,8,Technology,,,,,
pg,8,ClusterControl for PostgreSQL,,,,,
pg,8,Next blog,,,,,
pg,8,read more by:,,,,,
pg,8,Sebastian Insausti,,,,,
pg,8,"Sebastian Insausti has loved technology since his childhood, when he did his first computer course using Windows 3.11",,,,,
pg,8,And from that moment he was decided on what his profession would be,,,,,
pg,8,"He has since built up experience with MySQL, PostgreSQL, HAProxy, WAF (ModSecurity), Linux (RedHat, CentOS, OL, Ubuntu server), Monitoring (Nagios), Networking and Virtualization (VMWare, Proxmox, Hyper-V, RHEV)",,,,,
pg,8,He’s also a speaker and has given a few talks locally on InnoDB Cluster and MySQL Enterprise together with an Oracle team,,,,,
pg,8,,,,,,
pg,8,More from This Author,,,,,
pg,8,What's New in PostgreSQL 12,,,,,
pg,8,"Oct 21, 2019",,,,,
pg,8,by Sebastian Insausti,,,,,
pg,8,PostgreSQL 12 is now available with notable improvements to query performance,,,,,
pg,8,In this blog we’ll take a look at these new features and show you how to get and install this new PostgreSQL 12 version,,,,,
pg,8,We’ll also explore some considerations to take into account when upgrading,,,,,
pg,8,,,,,,
pg,8,Severalnines,,,,,
pg,8,"October 21, 2019",,,,,
pg,8,Which Time-Series Database is Better: TimescaleDB vs InfluxDB,,,,,
pg,8,"May 16, 2019",,,,,
pg,8,by Sebastian Insausti,,,,,
pg,8,"In the new time-series database world, TimescaleDB and InfluxDB are two popular options with fundamentally different architectures",,,,,
pg,8,"One is based off a relational database, PostgreSQL, the other build as a NoSQL engine",,,,,
pg,8,"In this blog, we’ll give you a short description of those two, and how they stack against each other",,,,,
pg,8,,,,,,
pg,8,Severalnines,,,,,
pg,8,"September 04, 2019",,,,,
pg,8,How to Deploy PostgreSQL to a Docker Container Using ClusterControl,,,,,
pg,8,"May 09, 2019",,,,,
pg,8,by Sebastian Insausti,,,,,
pg,8,"Deploying a single PostgreSQL instance on Docker is fairly easy, but deploying a replication cluster requires a bit more work",,,,,
pg,8,"In this blog, we’ll see how to deploy PostgreSQL on Docker and how we can make it easier to configure a primary-standby replication setup with ClusterControl",,,,,
pg,8,,,,,,
pg,8,Severalnines,,,,,
pg,8,"August 01, 2019",,,,,
pg,8,View the discussion thread,,,,,
pg,8,,,,,,
pg,8,ClusterControl,,,,,
pg,8,The only management system you’ll ever need to take control of your open source database infrastructure,,,,,
pg,8,,,,,,
pg,8,Learn more,,,,,
pg,8,Products,,,,,
pg,8,Full-Ops Management,,,,,
pg,8,Configuration Management,,,,,
pg,8,Database Backups,,,,,
pg,8,ResourcesDatabase Blog,,,,,
pg,8,Whitepapers,,,,,
pg,8,Tutorials,,,,,
pg,8,Webinars,,,,,
pg,8,Trainings,,,,,
pg,8,Certification,,,,,
pg,8,SupportGet Support,,,,,
pg,8,ClusterControl Documentation,,,,,
pg,8,Backup Ninja Documentation,,,,,
pg,8,ClusterControl on Slack,,,,,
pg,8,BlogMySQL,,,,,
pg,8,PostgreSQL,,,,,
pg,8,MariaDB,,,,,
pg,8,Galera Cluster,,,,,
pg,8,MongoDB,,,,,
pg,8,TimescaleDB,,,,,
pg,8,MySQL NDB Cluster,,,,,
pg,8,Docker,,,,,
pg,8,About usCareers,,,,,
pg,8,Customers,,,,,
pg,8,Partners,,,,,
pg,8,Contact us,,,,,
pg,8,Sign up for Planets9s,,,,,
pg,8,Your e-mail *,,,,,
pg,8,© Copyright 2014-2020 Severalnines AB,,,,,
pg,8,All rights reserved,,,,,
pg,8,,,,,,
pg,8,Website Policies,,,,,
pg,8,Sitemap,,,,,
pg,9,PostgreSQL Performance Tuning and Optimization | EDB,,,,,
pg,9,Skip to main content,,,,,
pg,9,Barrio main menu,,,,,
pg,9,Why EDB?,,,,,
pg,9,EDB Supercharges PostgreSQL,,,,,
pg,9,wrapper,,,,,
pg,9,Use Cases,,,,,
pg,9,Oracle Migration,,,,,
pg,9,Hybrid Cloud,,,,,
pg,9,High Availability,,,,,
pg,9,Solutions for,,,,,
pg,9,IT Professionals,,,,,
pg,9,Database Architects,,,,,
pg,9,Developers,,,,,
pg,9,Database Admins,,,,,
pg,9,Products,,,,,
pg,9,Products Overview,,,,,
pg,9,wrapper,,,,,
pg,9,Databases,,,,,
pg,9,EDB Postgres Advanced Server,,,,,
pg,9,PostgreSQL,,,,,
pg,9,wrapper,,,,,
pg,9,Tools,,,,,
pg,9,Postgres Enterprise Manager,,,,,
pg,9,Backup and Recovery Tool,,,,,
pg,9,Failover Manager,,,,,
pg,9,Open Source Projects,,,,,
pg,9,Migration Portal,,,,,
pg,9,Migration Toolkit,,,,,
pg,9,Replication Server,,,,,
pg,9,Services,,,,,
pg,9,Services Overview,,,,,
pg,9,Training,,,,,
pg,9,Getting Started,,,,,
pg,9,PostgreSQL Optimization,,,,,
pg,9,Enterprise Strategy,,,,,
pg,9,Custom Services,,,,,
pg,9,Support,,,,,
pg,9,Customer Support Portal,,,,,
pg,9,Support Overview,,,,,
pg,9,PostgreSQL Technical Support,,,,,
pg,9,Remote DBA Service,,,,,
pg,9,Cloud DBA Service,,,,,
pg,9,Technical Account Management,,,,,
pg,9,Resources,,,,,
pg,9,Docs,,,,,
pg,9,wrapper,,,,,
pg,9,Blog,,,,,
pg,9,Webinars,,,,,
pg,9,PostgreSQL Tutorials,,,,,
pg,9,Training,,,,,
pg,9,Partners,,,,,
pg,9,White Papers,,,,,
pg,9,Customer Stories,,,,,
pg,9,Product Compatibility,,,,,
pg,9,Plans,,,,,
pg,9,Barrio utility menu,,,,,
pg,9,Contact,,,,,
pg,9,Dashboard,,,,,
pg,9,Sign In,,,,,
pg,9,Downloads,,,,,
pg,9,Barrio Mobile Menu,,,,,
pg,9,Why EDB?,,,,,
pg,9,EDB Supercharges PostgreSQL,,,,,
pg,9,Use Cases,,,,,
pg,9,Oracle Migration,,,,,
pg,9,Hybrid Cloud,,,,,
pg,9,High Availability,,,,,
pg,9,Solutions for,,,,,
pg,9,IT Professionals,,,,,
pg,9,Database Architects,,,,,
pg,9,Developers,,,,,
pg,9,Database Admins,,,,,
pg,9,Products,,,,,
pg,9,Products Overview,,,,,
pg,9,Databases,,,,,
pg,9,EDB Postgres Advanced Server,,,,,
pg,9,PostgreSQL,,,,,
pg,9,Tools,,,,,
pg,9,Postgres Enterprise Manager,,,,,
pg,9,Backup and Recovery Tool,,,,,
pg,9,Failover Manager,,,,,
pg,9,Open Source Projects,,,,,
pg,9,Migration Portal,,,,,
pg,9,Migration Toolkit,,,,,
pg,9,Replication Server,,,,,
pg,9,Services,,,,,
pg,9,Services Overview,,,,,
pg,9,Training,,,,,
pg,9,Getting Started,,,,,
pg,9,Postgres Optimization,,,,,
pg,9,Enterprise Strategy,,,,,
pg,9,Custom Services,,,,,
pg,9,Support,,,,,
pg,9,Support Overview,,,,,
pg,9,PostgreSQL Technical Support,,,,,
pg,9,Remote DBA Service,,,,,
pg,9,Cloud DBA Service,,,,,
pg,9,Technical Account Management,,,,,
pg,9,Resources,,,,,
pg,9,Docs,,,,,
pg,9,Blog,,,,,
pg,9,Webinars,,,,,
pg,9,Postgres Tutorials,,,,,
pg,9,Training,,,,,
pg,9,Partners,,,,,
pg,9,White Papers,,,,,
pg,9,Customer Stories,,,,,
pg,9,Product Compatibility,,,,,
pg,9,Plans,,,,,
pg,9,Downloads,,,,,
pg,9,Contact,,,,,
pg,9,Sign In,,,,,
pg,9,Dashboard,,,,,
pg,9,PostgreSQL Performance Tuning and Optimization,,,,,
pg,9,"Some of the most critical aspects of tuning PostgreSQL for performance are hardware updates, configuration, vacuuming, query performance, and indexing of queries",,,,,
pg,9,"This page consists of tips, issues, benchmarks, and tools to performance optimize PostgreSQL using different techniques",,,,,
pg,9,,,,,,
pg,9,How to Tune PostgreSQL GUC Parameters,,,,,
pg,9,"Tushar Ahuja · May 5, 2020",,,,,
pg,9,This article discusses GUC parameters that can be used for PostgreSQL tuning and how to configure them for improved performance,,,,,
pg,9,,,,,,
pg,9,What is Parallel Vacuum in PostgreSQL 13,,,,,
pg,9,"Dilip Kumar · April 17, 2020",,,,,
pg,9,"In PostgreSQL, we already support parallelism of a SQL query which leverages multiple cores to execute the query faster",,,,,
pg,9,"Vacuum is one of the most critical utility operations which helps in controlling bloat, one of the major problems for PostgreSQL DBAs",,,,,
pg,9,"So, vacuum needs to run really fast to reduce the bloat as early as possible",,,,,
pg,9,"In PG13, parallel vacuum is introduced which allows for parallel vacuuming of multiple indexes corresponding to a single table",,,,,
pg,9,,,,,,
pg,9,PostgreSQL query tuning checklist,,,,,
pg,9,"Tushar Ahuja · April 6, 2020",,,,,
pg,9,This article offers a checklist of tools available for improving PostgreSQL query performance,,,,,
pg,9,,,,,,
pg,9,How to tune PostgreSQL for memory,,,,,
pg,9,"Tushar Ahuja · April 6, 2020",,,,,
pg,9,This article looks at parameters that can be used to help manage memory in PostgreSQL,,,,,
pg,9,Recommended settings for each parameter are also provided,,,,,
pg,9,,,,,,
pg,9,Comprehensive guide on how to tune database parameters and configuration in PostgreSQL,,,,,
pg,9,"Swapnil Suryawanshi · December 17, 2019",,,,,
pg,9,This article discusses parameters that can be used to configure performance in PostgreSQL,,,,,
pg,9,"After introducing ways of measuring database speed, it reviews the parameters and ways to optimize performance with them",,,,,
pg,9,,,,,,
pg,9,DO or UNDO - There is no PostgreSQL VACUUM,,,,,
pg,9,"Robert Haas · January 30, 2018",,,,,
pg,9,What if PostgreSQL didn’t need VACUUM at all? This seems hard to imagine,,,,,
pg,9,"After all, PostgreSQL uses multi-version concurrency control (MVCC), and if",,,,,
pg,9,,,,,,
pg,9,,,,,,
pg,9,The State of VACUUM,,,,,
pg,9,"Robert Haas · January 9, 2018",,,,,
pg,9,"In a recent blog post, I talked about why every system that implements MVCC needs some scheme for removing old row versions, and how VACUUM meets that",,,,,
pg,9,,,,,,
pg,9,,,,,,
pg,9,History of improvements in VACUUM in PostgreSQL,,,,,
pg,9,Robert M,,,,,
pg,9,"Haas · January 5, 2018",,,,,
pg,9,"In a recent blog post, I talked about why every system that implements MVCC needs some scheme for removing old row versions, and how VACUUM meets that need for PostgreSQL",,,,,
pg,9,"In this post, I’d like to examine the history of VACUUM improvements in recent years, the state of VACUUM as it exists in PostgreSQL today, and how it might be improved in the future",,,,,
pg,9,,,,,,
pg,9,MVCC and VACUUM in PostgreSQL,,,,,
pg,9,"Robert Haas · December 19, 2017",,,,,
pg,9,"Experienced PostgreSQL users and developers rattle off the terms “MVCC” and “VACUUM” as if everyone should know what they are and how they work, but",,,,,
pg,9,,,,,,
pg,9,,,,,,
pg,9,Why we need VACUUM to implement MVCC In PostgreSQL,,,,,
pg,9,Robert M,,,,,
pg,9,"Haas · December 18, 2017",,,,,
pg,9,"Experienced PostgreSQL users and developers rattle off the terms “MVCC” and “VACUUM” as if everyone should know what they are and how they work, but in fact many people don’t",,,,,
pg,9,,,,,,
pg,9,Is PostgreSQL autovacuum too aggressive?,,,,,
pg,9,"Ameen Abbas · September 17, 2017",,,,,
pg,9,I covered vacuum basics in my earlier post,,,,,
pg,9,"In this post, I'm covering the importance of aggressive autovacuum",,,,,
pg,9,Database Administrators who just started their career might have doubts in their mind,,,,,
pg,9,How does VACUUM work in PostgreSQL,,,,,
pg,9,"Richard Yen · August 24, 2017",,,,,
pg,9,"I recently had a customer who was trying to figure out why his VACUUM-for-wraparound was taking so long–he had a 6TB database, and the VACUUM had been running for over 4 days",,,,,
pg,9,,,,,,
pg,9,Controlling Autovacuum in PostgreSQL,,,,,
pg,9,"Bruce Momjian · January 9, 2017",,,,,
pg,9,"Unlike other database systems, Postgres makes the cleanup process visible and tunable to users",,,,,
pg,9,Autovacuum performs recycling of old rows and updates optimizer statistics,,,,,
pg,9,,,,,,
pg,9,Get Postgres tips & tricks,,,,,
pg,9,Subscribe to our newsletter to get advanced Postgres how-tos,,,,,
pg,9,,,,,,
pg,9,Related Tutorials,,,,,
pg,9,Developer Resources,,,,,
pg,9,High Availability,,,,,
pg,9,Replication and Failover,,,,,
pg,9,Performance Tuning,,,,,
pg,9,Performance Monitoring and Alerting,,,,,
pg,9,"Containers, Kubernetes, Docker",,,,,
pg,9,Oracle To Postgres Migration,,,,,
pg,9,DBA and Admin Resources,,,,,
pg,9,Tools and Extensions,,,,,
pg,9,Featured Webinar,,,,,
pg,9,How to Monitor Postgres Like a Pro!,,,,,
pg,9,Monitoring is a critical element for overall performance of the database,,,,,
pg,9,Learn how to ensure your database is healthy and contributing to the long term stability of your database and application,,,,,
pg,9,,,,,,
pg,9,Watch Now,,,,,
pg,9,Introducing Postgres Pulse Live,,,,,
pg,9,Free To Attend: Every other Monday 11AM ET,,,,,
pg,9,A biweekly blog and live video forum series built to offer insight into how we analyze problems and develop solutions using Postgres,,,,,
pg,9,,,,,,
pg,9,About Postgres Pulse Live,,,,,
pg,9,Postgres Enterprise Manager,,,,,
pg,9,"Postgres Performance Tuning, Monitoring and Alerting Tool",,,,,
pg,9,"In this tech guide, we describe the six things a developer should know about in terms of how easy it is to install, work with, and deploy Postgres as well as the unique capabilities and wide range of features that Postgres offers",,,,,
pg,9,,,,,,
pg,9,Download Now,,,,,
pg,9,Ready to take the next step with PostgreSQL? Contact Us,,,,,
pg,9,Barrio main menu,,,,,
pg,9,Why EDB?,,,,,
pg,9,Use Cases,,,,,
pg,9,Oracle Migration,,,,,
pg,9,Hybrid Cloud,,,,,
pg,9,High Availability,,,,,
pg,9,Solutions for,,,,,
pg,9,IT Professionals,,,,,
pg,9,Database Architects,,,,,
pg,9,Developers,,,,,
pg,9,Database Admins,,,,,
pg,9,Products,,,,,
pg,9,Databases,,,,,
pg,9,EDB Postgres Advanced Server,,,,,
pg,9,PostgreSQL,,,,,
pg,9,Tools,,,,,
pg,9,Postgres Enterprise Manager,,,,,
pg,9,Backup and Recovery Tool,,,,,
pg,9,Failover Manager,,,,,
pg,9,Open Source Projects,,,,,
pg,9,Migration Portal,,,,,
pg,9,Migration Toolkit,,,,,
pg,9,Replication Server,,,,,
pg,9,Services,,,,,
pg,9,Services Overview,,,,,
pg,9,Training,,,,,
pg,9,Getting Started,,,,,
pg,9,PostgreSQL Optimization,,,,,
pg,9,Enterprise Strategy,,,,,
pg,9,Custom Services,,,,,
pg,9,Support,,,,,
pg,9,Customer Support Portal,,,,,
pg,9,Support Overview,,,,,
pg,9,PostgreSQL Technical Support,,,,,
pg,9,Remote DBA Service,,,,,
pg,9,Cloud DBA Service,,,,,
pg,9,Technical Account Management,,,,,
pg,9,Resources,,,,,
pg,9,Docs,,,,,
pg,9,Blog,,,,,
pg,9,Webinars,,,,,
pg,9,PostgreSQL Tutorials,,,,,
pg,9,Training,,,,,
pg,9,Partners,,,,,
pg,9,White Papers,,,,,
pg,9,Customer Stories,,,,,
pg,9,Product Compatibility,,,,,
pg,9,Plans,,,,,
pg,9,Company,,,,,
pg,9,About EDB,,,,,
pg,9,PostgreSQL Contributions,,,,,
pg,9,Careers,,,,,
pg,9,Events,,,,,
pg,9,Press Releases,,,,,
pg,9,Media Coverage,,,,,
pg,9,Customers,,,,,
pg,9,Follow Us,,,,,
pg,9,Twitter,,,,,
pg,9,LinkedIn,,,,,
pg,9,Facebook,,,,,
pg,9,YouTube,,,,,
pg,9,Barrio Footer Secondary Menu,,,,,
pg,9,© 2020 EDB,,,,,
pg,9,GDPR,,,,,
pg,9,Privacy Policy,,,,,
pg,9,Terms of Use,,,,,
pg,9,Trademarks,,,,,
pg,9,Select LanguageEnglish (EN)DutchFrenchGermanJapaneseKoreanPortugueseSpanishThis automated translation should not be considered exact and only used to approximate the original English language content,,,,,
pg,9,"EDB does not guarantee the accuracy, reliability, or timeliness of any information translated",,,,,
pg,9,,,,,,
pg,10,Performance Tuning PostgreSQL,,,,,
pg,10,About,,,,,
pg,10,Impact,,,,,
pg,10,Products,,,,,
pg,10,Blog,,,,,
pg,10,Contact,,,,,
pg,10,Performance Tuning PostgreSQL,,,,,
pg,10,by,,,,,
pg,10,Frank Wiles,,,,,
pg,10,Introduction,,,,,
pg,10,PostgreSQL is the most advanced,,,,,
pg,10,and flexible Open Source SQL database today,,,,,
pg,10,,,,,,
pg,10,With this power and,,,,,
pg,10,flexibility comes a problem,,,,,
pg,10,,,,,,
pg,10,How do the PostgreSQL developers tune the,,,,,
pg,10,default configuration for everyone? Unfortunately the answer is they can't,,,,,
pg,10,,,,,,
pg,10,"The problem is that every database is not only different in its design, but",,,,,
pg,10,also its requirements,,,,,
pg,10,Some systems are used to log mountains of data that,,,,,
pg,10,is almost never queried,,,,,
pg,10,Others have essentially static data that is queried,,,,,
pg,10,"constantly, sometimes feverishly",,,,,
pg,10,,,,,,
pg,10,"Most systems however have some, usually",,,,,
pg,10,"unequal, level of reads and writes to the database",,,,,
pg,10,Add this little,,,,,
pg,10,"complexity on top of your totally unique table structure, data, and hardware",,,,,
pg,10,configuration and hopefully you begin to see why tuning can be difficult,,,,,
pg,10,,,,,,
pg,10,The default configuration PostgreSQL ships with is a very solid configuration,,,,,
pg,10,"aimed at everyone's best guess as to how an ""average"" database on ""average""",,,,,
pg,10,hardware should be setup,,,,,
pg,10,This article aims to help PostgreSQL users of all,,,,,
pg,10,levels better understand PostgreSQL performance tuning,,,,,
pg,10,,,,,,
pg,10,Understanding the process,,,,,
pg,10,The first step to learning how to tune your PostgreSQL database is to,,,,,
pg,10,understand the life cycle of a query,,,,,
pg,10,Here are the steps of a query:,,,,,
pg,10,Transmission of query string to database backend,,,,,
pg,10,Parsing of query string,,,,,
pg,10,Planning of query to optimize retrieval of data,,,,,
pg,10,Retrieval of data from hardware,,,,,
pg,10,Transmission of results to client,,,,,
pg,10,The first step is the sending of the query string ( the actual SQL,,,,,
pg,10,command you type in or your application uses ) to the database backend,,,,,
pg,10,,,,,,
pg,10,"There isn't much you can tune about this step, however if you have a",,,,,
pg,10,very large queries that cannot be prepared in advance it may help to,,,,,
pg,10,put them into the database as a stored procedure and cut the data,,,,,
pg,10,transfer down to a minimum,,,,,
pg,10,,,,,,
pg,10,Once the SQL query is inside the database server it is parsed into,,,,,
pg,10,tokens,,,,,
pg,10,,,,,,
pg,10,This step can also be minimized by using stored procedures,,,,,
pg,10,,,,,,
pg,10,The planning of the query is where PostgreSQL really starts to do some,,,,,
pg,10,work,,,,,
pg,10,,,,,,
pg,10,This stage checks to see if the query is already prepared if your,,,,,
pg,10,version of PostgreSQL and client library support this feature,,,,,
pg,10,,,,,,
pg,10,It also,,,,,
pg,10,analyzes your SQL to determine what the most efficient way of retrieving,,,,,
pg,10,your data is,,,,,
pg,10,Should we use an index and if so which one? Maybe a hash,,,,,
pg,10,join on those two tables is appropriate?,,,,,
pg,10,These are some of the decisions,,,,,
pg,10,the database makes at this point of the process,,,,,
pg,10,,,,,,
pg,10,This step can be,,,,,
pg,10,eliminated if the query is previously prepared,,,,,
pg,10,,,,,,
pg,10,Now that PostgreSQL has a plan of what it believes to be the best way,,,,,
pg,10,"to retrieve the data, it is time to actually get it",,,,,
pg,10,,,,,,
pg,10,While there,,,,,
pg,10,"are some tuning options that help here, this step is mostly effected",,,,,
pg,10,by your hardware configuration,,,,,
pg,10,,,,,,
pg,10,And finally the last step is to transmit the results to the client,,,,,
pg,10,While,,,,,
pg,10,"there aren't any real tuning options for this step, you should be aware",,,,,
pg,10,that all of the data that you are returning is pulled from the disk and,,,,,
pg,10,sent over the wire to your client,,,,,
pg,10,,,,,,
pg,10,Minimizing the number of rows and columns,,,,,
pg,10,to only those that are necessary can often increase your performance,,,,,
pg,10,,,,,,
pg,10,General Tuning,,,,,
pg,10,There are several postmaster options that can be set that drastically,,,,,
pg,10,"affect performance, below is a list of the most commonly used and how",,,,,
pg,10,they effect performance:,,,,,
pg,10,max_connections = <num> — This option sets the,,,,,
pg,10,maximum number of database backend to have at any one time,,,,,
pg,10,,,,,,
pg,10,Use this,,,,,
pg,10,feature to ensure that you do not launch so many backends that you begin,,,,,
pg,10,swapping to disk and kill the performance of all the children,,,,,
pg,10,,,,,,
pg,10,Depending,,,,,
pg,10,on your application it may be better to deny the connection entirely,,,,,
pg,10,rather than degrade the performance of all of the other children,,,,,
pg,10,,,,,,
pg,10,shared_buffers = <num> — Editing this option is the simplest,,,,,
pg,10,way to improve the performance of your database server,,,,,
pg,10,,,,,,
pg,10,The default,,,,,
pg,10,is pretty low for most modern hardware,,,,,
pg,10,,,,,,
pg,10,General wisdom says that this should be,,,,,
pg,10,set to roughly 25% of available RAM on the system,1,2333,shared_buffers,P = 0.25 * memory,
pg,10,,,,,,
pg,10,Like most of the options,,,,,
pg,10,I will outline here you will simply need to try them at different levels (both up and down ) and see how well it works on your particular system,,,,,
pg,10,,,,,,
pg,10,Most people find that setting it larger than a third starts to degrade performance,1,2333,shared_buffers,P <= 0.33 * memory,
pg,10,,,,,,
pg,10,effective_cache_size = <num> — This value tells,,,,,
pg,10,PostgreSQL's optimizer how much memory PostgreSQL has available for caching data and helps in determing whether or not it use an index or not,,,,,
pg,10,,,,,,
pg,10,The larger the value increases the likely hood of using an index,,,,,
pg,10,,,,,,
pg,10,This should,,,,,
pg,10,be set to the amount of memory allocated to shared_buffers plus the amount of,1,2347,effective_cache_size,P > shared_buffers,
pg,10,OS cache available,,,,,
pg,10,,,,,,
pg,10,Often this is more than 50% of the total system memory,1,2347,effective_cache_size,P > 0.5 * memory,
pg,10,,,,,,
pg,10,work_mem = <num> — This option is used to control the,,,,,
pg,10,amount of memory using in sort operations and hash tables,,,,,
pg,10,,,,,,
pg,10,While you may,,,,,
pg,10,need to increase the amount of memory if you do a ton of sorting in your,,,,,
pg,10,"application, care needs to be taken",,,,,
pg,10,,,,,,
pg,10,"This isn't a system wide parameter,",,,,,
pg,10,but a per operation one,,,,,
pg,10,,,,,,
pg,10,So if a complex query has several sort operations,,,,,
pg,10,in it it will use multiple work_mem units of memory,,,,,
pg,10,,,,,,
pg,10,Not to mention that,,,,,
pg,10,multiple backends could be doing this at once,,,,,
pg,10,,,,,,
pg,10,This query can often lead,,,,,
pg,10,your database server to swap if the value is too large,,,,,
pg,10,,,,,,
pg,10,This option was,,,,,
pg,10,previously called sort_mem in older versions of PostgreSQL,,,,,
pg,10,,,,,,
pg,10,max_fsm_pages = <num> — This option helps to control,,,,,
pg,10,the free space map,,,,,
pg,10,,,,,,
pg,10,When something is deleted from a table it isn't,,,,,
pg,10,"removed from the disk immediately, it is simply marked as ""free"" in the",,,,,
pg,10,free space map,,,,,
pg,10,,,,,,
pg,10,The space can then be reused for any new INSERTs that,,,,,
pg,10,you do on the table,,,,,
pg,10,,,,,,
pg,10,If your setup has a high rate of DELETEs and INSERTs,,,,,
pg,10,it may be necessary increase this value to avoid table bloat,,,,,
pg,10,,,,,,
pg,10,fsync = <boolean> —,,,,,
pg,10,This option determines if,,,,,
pg,10,all your WAL pages are fsync()'ed to disk before a transactions is,,,,,
pg,10,committed,,,,,
pg,10,,,,,,
pg,10,"Having this on is safer, but can reduce write performance",1,2393,fsync,P = off,
pg,10,If,,,,,
pg,10,fsync is not enabled there is the chance of unrecoverable data corruption,,,,,
pg,10,,,,,,
pg,10,Turn this off at your own risk,,,,,
pg,10,,,,,,
pg,10,commit_delay = <num> and commit_siblings = <num>,,,,,
pg,10,— These options are used in concert to help improve performance by writing,,,,,
pg,10,out multiple transactions that are committing at once,,,,,
pg,10,,,,,,
pg,10,If there are commit_siblings number of backends active at the instant your transaction is committing then,,,,,
pg,10,the server waiting commit_delay microseconds to try and commit multiple transactions at once,,,,,
pg,10,,,,,,
pg,10,random_page_cost = <num> — random_page_cost controls the,,,,,
pg,10,way PostgreSQL views non-sequential disk reads,,,,,
pg,10,,,,,,
pg,10,A higher value makes it more,,,,,
pg,10,likely that a sequential scan will be used over an index scan indicating that,,,,,
pg,10,your server has very fast disks,,,,,
pg,10,,,,,,
pg,10,"If this is still confusing to you, Revolution Systems does offer a",,,,,
pg,10,PostgreSQL Tuning Service,,,,,
pg,10,Note that many of these options consume shared memory and it will probably,,,,,
pg,10,be necessary to increase the amount of shared memory allowed on your system,,,,,
pg,10,to get the most out of these options,,,,,
pg,10,,,,,,
pg,10,Hardware Issues,,,,,
pg,10,Obviously the type and quality of the hardware you use for your database,,,,,
pg,10,server drastically impacts the performance of your database,,,,,
pg,10,,,,,,
pg,10,Here are,,,,,
pg,10,a few tips to use when purchasing hardware for your database server (in order of importance):,,,,,
pg,10,RAM —,,,,,
pg,10,The more RAM you have the more disk,,,,,
pg,10,cache you will have,,,,,
pg,10,,,,,,
pg,10,This greatly impacts performance considering,,,,,
pg,10,memory I/O is thousands of times faster than disk I/O,,,,,
pg,10,,,,,,
pg,10,Disk types — Obviously fast Ultra-320 SCSI,,,,,
pg,10,"disks are your best option, however high end SATA drives are also",,,,,
pg,10,very good,,,,,
pg,10,,,,,,
pg,10,With SATA each disk is substantially cheaper and with that,,,,,
pg,10,you can afford more spindles than with SCSI on the same budget,,,,,
pg,10,,,,,,
pg,10,Disk configuration — The optimum configuration,,,,,
pg,10,is RAID 1+0 with as many disks as possible and with your transaction log,,,,,
pg,10,(pg_xlog) on a separate disk ( or stripe ) all by itself,,,,,
pg,10,RAID 5 is not,,,,,
pg,10,a very good option for databases unless you have more than 6 disks in,,,,,
pg,10,your volume,,,,,
pg,10,,,,,,
pg,10,With newer versions of PostgreSQL you can also use the,,,,,
pg,10,"tablespaces option to put different tables, databases, and indexes on",,,,,
pg,10,different disks to help optimize performance,,,,,
pg,10,,,,,,
pg,10,Such as putting your often,,,,,
pg,10,used tables on a fast SCSI disk and the less used ones slower,,,,,
pg,10,IDE or SATA drives,,,,,
pg,10,,,,,,
pg,10,"CPUs — The more CPUs the better, however",,,,,
pg,10,if your database does not use many complex functions your money is,,,,,
pg,10,best spent on more RAM or a better disk subsystem,,,,,
pg,10,,,,,,
pg,10,In general the more RAM and disk spindles you have in your system the,,,,,
pg,10,better it will perform,,,,,
pg,10,This is because with the extra RAM you will,,,,,
pg,10,access your disks less,,,,,
pg,10,,,,,,
pg,10,And the extra spindles help spread the reads and,,,,,
pg,10,writes over multiple disks to increase throughput and to reduce,,,,,
pg,10,drive head congestion,,,,,
pg,10,,,,,,
pg,10,Another good idea is to separate your application code and your database,,,,,
pg,10,server onto different hardware,,,,,
pg,10,,,,,,
pg,10,Not only does this provide more hardware,,,,,
pg,10,"dedicated to the database server, but the operating system's disk",,,,,
pg,10,cache will contain more PostgreSQL data and not other various application,,,,,
pg,10,or system data this way,,,,,
pg,10,,,,,,
pg,10,"For example, if you have one web server and one database server you can",,,,,
pg,10,use a cross-over cable on a separate ethernet interface to handle just,,,,,
pg,10,the web server to database network traffic to ensure you reduce,,,,,
pg,10,any possible bottlenecks there,,,,,
pg,10,,,,,,
pg,10,You can also obviously create an entirely,,,,,
pg,10,different physical network for database traffic if you have multiple servers,,,,,
pg,10,that access the same database server,,,,,
pg,10,,,,,,
pg,10,Useful Tuning Tools,,,,,
pg,10,The most useful tool in tuning your database is the SQL command EXPLAIN ANALYZE,,,,,
pg,10,,,,,,
pg,10,This allows you to profile each SQL query your application performs and see,,,,,
pg,10,exactly how the PostgreSQL planner will process the query,,,,,
pg,10,,,,,,
pg,10,Let's look at,,,,,
pg,10,"a short example, below is a simple table structure and query",,,,,
pg,10,,,,,,
pg,10,CREATE TABLE authors (,,,,,
pg,10,id,,,,,
pg,10,"int4 PRIMARY KEY,",,,,,
pg,10,name,,,,,
pg,10,varchar,,,,,
pg,10,);,,,,,
pg,10,CREATE TABLE books (,,,,,
pg,10,id,,,,,
pg,10,"int4 PRIMARY KEY,",,,,,
pg,10,author_id,,,,,
pg,10,"int4,",,,,,
pg,10,title,,,,,
pg,10,varchar,,,,,
pg,10,);,,,,,
pg,10,If we use the query:,,,,,
pg,10,EXPLAIN ANALYZE SELECT authors,,,,,
pg,10,"name, books",,,,,
pg,10,title,,,,,
pg,10,"FROM books, authors",,,,,
pg,10,WHERE books,,,,,
pg,10,author_id=16 and authors,,,,,
pg,10,id = books,,,,,
pg,10,author_id,,,,,
pg,10,ORDER BY books,,,,,
pg,10,title;,,,,,
pg,10,You will get output similar to the following:,,,,,
pg,10,QUERY PLAN,,,,,
pg,10,--------------------------------------------------------------------------------------------------------------,,,,,
pg,10,Sort,,,,,
pg,10,(cost=29.71,,,,,
pg,10,29.73 rows=6 width=64) (actual time=0.189,,,,,
pg,10,16.233 rows=7 loops=1),,,,,
pg,10,Sort Key: books,,,,,
pg,10,title,,,,,
pg,10,->,,,,,
pg,10,Nested Loop,,,,,
pg,10,(cost=0.00,,,,,
pg,10,29.63 rows=6 width=64) (actual time=0.068,,,,,
pg,10,0.129 rows=7 loops=1),,,,,
pg,10,->,,,,,
pg,10,Index Scan using authors_pkey on authors,,,,,
pg,10,(cost=0.00,,,,,
pg,10,5.82 rows=1 width=36) (actual time=0.029,,,,,
pg,10,0.033 rows=1 loops=1),,,,,
pg,10,Index Cond: (id = 16),,,,,
pg,10,->,,,,,
pg,10,Seq Scan on books,,,,,
pg,10,(cost=0.00,,,,,
pg,10,23.75 rows=6 width=36) (actual time=0.026,,,,,
pg,10,0.052 rows=7 loops=1),,,,,
pg,10,Filter: (author_id = 16),,,,,
pg,10,Total runtime: 16.386 ms,,,,,
pg,10,You need to read this output from bottom to top when analyzing it,,,,,
pg,10,,,,,,
pg,10,The,,,,,
pg,10,first thing PostgreSQL does is do a sequence scan on the books table looking,,,,,
pg,10,at each author_id column for values that equal 16,,,,,
pg,10,,,,,,
pg,10,Then it does an index,,,,,
pg,10,"scan of the authors table, because of the implicit index created by the PRIMARY",,,,,
pg,10,KEY options,,,,,
pg,10,,,,,,
pg,10,Then finally the results are sorted by books,,,,,
pg,10,title,,,,,
pg,10,,,,,,
pg,10,The values you see in parenthesis are the estimated and actual cost of,,,,,
pg,10,that portion of the query,,,,,
pg,10,,,,,,
pg,10,The closer together the estimate and the actual,,,,,
pg,10,costs are the better performance you will typically see,,,,,
pg,10,,,,,,
pg,10,Need some expert help tuning your database? Learn more about our,,,,,
pg,10,PostgreSQL Tuning Service,,,,,
pg,10,"Now, let's change the structure a little bit by adding an index on",,,,,
pg,10,books,,,,,
pg,10,author_id to avoid the sequence scan with this command:,,,,,
pg,10,CREATE INDEX books_idx1 on books(author_id);,,,,,
pg,10,"If you rerun the query again, you won't see any noticeable change in the",,,,,
pg,10,output,,,,,
pg,10,,,,,,
pg,10,This is because PostgreSQL has not yet re-analyzed the data,,,,,
pg,10,and determined that the new index may help for this query,,,,,
pg,10,,,,,,
pg,10,This can,,,,,
pg,10,be solved by running:,,,,,
pg,10,ANALYZE books;,,,,,
pg,10,"However, in this small test case I'm working with the planner still favors",,,,,
pg,10,the sequence scan because there aren't very many rows in my books table,,,,,
pg,10,,,,,,
pg,10,If a query is going to return a large portion of a table then the planner,,,,,
pg,10,chooses a sequence scan over an index because it is actually faster,,,,,
pg,10,You,,,,,
pg,10,can also force PostgreSQL to favor index scans over sequential scans,,,,,
pg,10,by setting the configuration parameter enable_seqscan to off,1,,enable_seqscan,P = off,
pg,10,,,,,,
pg,10,"This doesn't remove all sequence scans, since some tables may not have",,,,,
pg,10,"an index, but it does force the planner's hand into always using an",,,,,
pg,10,index scan when it is available,,,,,
pg,10,,,,,,
pg,10,This is probably best done by sending,,,,,
pg,10,the command SET enable_seqscan = off at the start of every,,,,,
pg,10,connection rather than setting this option database wide,,,,,
pg,10,,,,,,
pg,10,This way you,,,,,
pg,10,can control via your application code when this is in effect,,,,,
pg,10,"However,",,,,,
pg,10,in general disabling sequence scans should only be used in tuning,,,,,
pg,10,your application and is not really intended for every day use,,,,,
pg,10,,,,,,
pg,10,Typically the best way to optimize your queries is to use indexes on,,,,,
pg,10,specific columns and combinations of columns to correspond to often used,,,,,
pg,10,queries,,,,,
pg,10,,,,,,
pg,10,Unfortunately this is done by trial and error,,,,,
pg,10,,,,,,
pg,10,You should also,,,,,
pg,10,note that increasing the number of indexes on a table increases the number,,,,,
pg,10,of write operations that need to be performed for each INSERT and UPDATE,,,,,
pg,10,,,,,,
pg,10,So don't do anything silly and just add indexes for each column in each,,,,,
pg,10,table,,,,,
pg,10,,,,,,
pg,10,You can help PostgreSQL do what you want by playing with the level of,,,,,
pg,10,statistics that are gathered on a table or column with the command:,,,,,
pg,10,ALTER TABLE <table> ALTER COLUMN <column> SET STATISTICS <number>;,,,,,
pg,10,This value can be a number between 0 and 1000 and helps PostgreSQL determine,,,,,
pg,10,what level of statistics gathering should be performed on that column,,,,,
pg,10,,,,,,
pg,10,This,,,,,
pg,10,helps you to control the generated query plans without having slow vacuum,,,,,
pg,10,and analyze operations because of generating large amounts of stats for,,,,,
pg,10,all tables and columns,,,,,
pg,10,,,,,,
pg,10,Another useful tool to help determine how to tune your database is to turn,,,,,
pg,10,on query logging,,,,,
pg,10,,,,,,
pg,10,You can tell PostgreSQL which queries you are interested,,,,,
pg,10,in logging via the log_statement configuration option,,,,,
pg,10,This is,,,,,
pg,10,very useful in situations where you many users executing ad hoc queries,,,,,
pg,10,to your system via something like Crystal Reports or via psql directly,,,,,
pg,10,,,,,,
pg,10,Database Design and Layout,,,,,
pg,10,Sometimes the design and layout of your database affects performance,,,,,
pg,10,,,,,,
pg,10,"For example, if you have an employee database that looks like this:",,,,,
pg,10,CREATE TABLE employees (,,,,,
pg,10,id,,,,,
pg,10,"int4 PRIMARY KEY,",,,,,
pg,10,active,,,,,
pg,10,"boolean,",,,,,
pg,10,first_name,,,,,
pg,10,"varchar,",,,,,
pg,10,middle_name,,,,,
pg,10,"varchar,",,,,,
pg,10,last_name,,,,,
pg,10,"varchar,",,,,,
pg,10,ssn,,,,,
pg,10,"varchar,",,,,,
pg,10,address1,,,,,
pg,10,"varchar,",,,,,
pg,10,address2,,,,,
pg,10,"varchar,",,,,,
pg,10,city,,,,,
pg,10,"varchar,",,,,,
pg,10,state,,,,,
pg,10,"varchar(2),",,,,,
pg,10,zip,,,,,
pg,10,"varchar,",,,,,
pg,10,home_phone,,,,,
pg,10,"varchar,",,,,,
pg,10,work_phone,,,,,
pg,10,"varchar,",,,,,
pg,10,cell_phone,,,,,
pg,10,"varchar,",,,,,
pg,10,fax_phone,,,,,
pg,10,"varchar,",,,,,
pg,10,pager_number,,,,,
pg,10,"varchar,",,,,,
pg,10,business_email,,,,,
pg,10,"varchar,",,,,,
pg,10,personal_email,,,,,
pg,10,"varchar,",,,,,
pg,10,salary,,,,,
pg,10,"int4,",,,,,
pg,10,vacation_days,,,,,
pg,10,"int2,",,,,,
pg,10,sick_days,,,,,
pg,10,"int2,",,,,,
pg,10,employee_number,,,,,
pg,10,"int4,",,,,,
pg,10,office_addr_1,,,,,
pg,10,"varchar,",,,,,
pg,10,office_addr_2,,,,,
pg,10,"varchar,",,,,,
pg,10,office_city,,,,,
pg,10,"varchar,",,,,,
pg,10,office_state,,,,,
pg,10,"varchar(2),",,,,,
pg,10,office_zip,,,,,
pg,10,"varchar,",,,,,
pg,10,department,,,,,
pg,10,"varchar,",,,,,
pg,10,title,,,,,
pg,10,"varchar,",,,,,
pg,10,supervisor_id,,,,,
pg,10,int4,,,,,
pg,10,);,,,,,
pg,10,"This design is easy to understand, but isn't very good on several levels",,,,,
pg,10,,,,,,
pg,10,"While it will depend on your particular application, in most cases you",,,,,
pg,10,won't need to access all of this data at one time,,,,,
pg,10,,,,,,
pg,10,In portions of your,,,,,
pg,10,application that deal with HR functions you are probably only interested,,,,,
pg,10,"in their name, salary, vacation time, and sick days",,,,,
pg,10,"However, if the application",,,,,
pg,10,displays an organization chart it would only be concerned with the department,,,,,
pg,10,and supervisor_id portions of the table,,,,,
pg,10,,,,,,
pg,10,By breaking up this table into smaller tables you can get more efficient,,,,,
pg,10,"queries since PostgreSQL has less to read through, not to mention better",,,,,
pg,10,functionality,,,,,
pg,10,Below is one way to make this structure better:,,,,,
pg,10,CREATE TABLE employees (,,,,,
pg,10,id,,,,,
pg,10,"int4 PRIMARY KEY,",,,,,
pg,10,active,,,,,
pg,10,"boolean,",,,,,
pg,10,employee_number,,,,,
pg,10,"int4,",,,,,
pg,10,first_name,,,,,
pg,10,"varchar,",,,,,
pg,10,middle_name,,,,,
pg,10,"varchar,",,,,,
pg,10,last_name,,,,,
pg,10,"varchar,",,,,,
pg,10,department,,,,,
pg,10,"varchar,",,,,,
pg,10,title,,,,,
pg,10,"varchar,",,,,,
pg,10,email,,,,,
pg,10,varchar,,,,,
pg,10,);,,,,,
pg,10,CREATE TABLE employee_address (,,,,,
pg,10,id,,,,,
pg,10,"int4 PRIMARY KEY,",,,,,
pg,10,employee_id,,,,,
pg,10,"int4,",,,,,
pg,10,personal,,,,,
pg,10,"boolean,",,,,,
pg,10,address_1,,,,,
pg,10,"varchar,",,,,,
pg,10,address_2,,,,,
pg,10,"varchar,",,,,,
pg,10,city,,,,,
pg,10,"varchar,",,,,,
pg,10,state,,,,,
pg,10,"varchar(2),",,,,,
pg,10,zip,,,,,
pg,10,varchar,,,,,
pg,10,);,,,,,
pg,10,CREATE TABLE employee_number_type (,,,,,
pg,10,id,,,,,
pg,10,"int4 PRIMARY KEY,",,,,,
pg,10,type,,,,,
pg,10,varchar,,,,,
pg,10,);,,,,,
pg,10,CREATE TABLE employee_number (,,,,,
pg,10,id,,,,,
pg,10,"int4 PRIMARY KEY,",,,,,
pg,10,employee_id,,,,,
pg,10,"int4,",,,,,
pg,10,type_id,,,,,
pg,10,"int4,",,,,,
pg,10,number,,,,,
pg,10,varchar,,,,,
pg,10,);,,,,,
pg,10,CREATE TABLE employee_hr_info (,,,,,
pg,10,id,,,,,
pg,10,"int4 PRIMARY KEY,",,,,,
pg,10,employee_id,,,,,
pg,10,"int4,",,,,,
pg,10,ssn,,,,,
pg,10,"varchar,",,,,,
pg,10,salary,,,,,
pg,10,"int4,",,,,,
pg,10,vacation_days,,,,,
pg,10,"int2,",,,,,
pg,10,sick_days,,,,,
pg,10,int2,,,,,
pg,10,);,,,,,
pg,10,With this table structure the data associated with an employee is broken,,,,,
pg,10,out into logical groupings,,,,,
pg,10,The main table contains the most frequently,,,,,
pg,10,used information and the other tables store all of the rest of the information,,,,,
pg,10,,,,,,
pg,10,The added benefit of this layout is that you can have any number of phone,,,,,
pg,10,numbers and addresses associated with a particular employee now,,,,,
pg,10,,,,,,
pg,10,Another useful tip is to use partial indexes on columns where you typically,,,,,
pg,10,query a certain value more often than another,,,,,
pg,10,,,,,,
pg,10,Take for example the employee,,,,,
pg,10,table above,,,,,
pg,10,,,,,,
pg,10,You're probably only displaying active employees,,,,,
pg,10,"throughout the majority of the application, but creating a partial index",,,,,
pg,10,on that column where the value is true can help speed up the query and may,,,,,
pg,10,help the planner to choose to use the index in cases where it otherwise,,,,,
pg,10,would not,,,,,
pg,10,You can create a partial index like this:,,,,,
pg,10,CREATE INDEX employee_idx2 ON employee(active) WHERE active='t';,,,,,
pg,10,Or you may have a situation where a row has a column named 'employee_id' that,,,,,
pg,10,"is null until the row is associated with an employee, maybe in some trouble",,,,,
pg,10,ticket like system,,,,,
pg,10,,,,,,
pg,10,In that type of application you would probably have a,,,,,
pg,10,'View Unassigned Tickets' portion of the application which would benefit,,,,,
pg,10,from a partial index such as this:,,,,,
pg,10,CREATE INDEX tickets_idx1 ON tickets(employee_id) WHERE employee_id IS NULL;,,,,,
pg,10,Application Development,,,,,
pg,10,There are many different ways to build applications which use a SQL,,,,,
pg,10,"database, but there are two very common themes that I will call",,,,,
pg,10,stateless and stateful,,,,,
pg,10,In the area of performance,,,,,
pg,10,there are different issues that impact each,,,,,
pg,10,,,,,,
pg,10,Stateless is typically the access type used by web based applications,,,,,
pg,10,,,,,,
pg,10,Your,,,,,
pg,10,"software connects to the database, issues a couple of queries, returns to",,,,,
pg,10,"results to the user, and disconnects",,,,,
pg,10,,,,,,
pg,10,The next action the users takes,,,,,
pg,10,"restarts this process with a new connect, new set of queries, etc",,,,,
pg,10,,,,,,
pg,10,Stateful applications are typically non-web based user interfaces where,,,,,
pg,10,an application initiates a database connection and holds it open for the,,,,,
pg,10,duration the application is in use,,,,,
pg,10,,,,,,
pg,10,Stateless Applications,,,,,
pg,10,In web based applications each time something is requested by the user,,,,,
pg,10,", the application initiates a new database connection",,,,,
pg,10,,,,,,
pg,10,While PostgreSQL has a very short connection creation time and in general,,,,,
pg,10,"it is not a very expensive operation, it is best to use some sort of",,,,,
pg,10,database connection pooling method to get maximum performance,,,,,
pg,10,,,,,,
pg,10,"There are several ways to accomplish database connection pooling, here",,,,,
pg,10,is a short list of common ones:,,,,,
pg,10,Pgpool is a small,,,,,
pg,10,server that you run on the same server as your clients that will pool,,,,,
pg,10,database connections to some local or remote server,,,,,
pg,10,,,,,,
pg,10,The application simply,,,,,
pg,10,points at the pgpool instance instead of the normal postmaster,,,,,
pg,10,,,,,,
pg,10,From the,,,,,
pg,10,application's perspective nothing has changed as the connection pooling is,,,,,
pg,10,hidden from it,,,,,
pg,10,,,,,,
pg,10,In a mod_perl environment you can,,,,,
pg,10,use Apache::DBI,,,,,
pg,10,to handle database connection pooling inside of Apache itself,,,,,
pg,10,,,,,,
pg,10,SQLRelay is another db,,,,,
pg,10,connection manager that is somewhat database agnostic,,,,,
pg,10,,,,,,
pg,10,It works with,,,,,
pg,10,with several databases other than PostgreSQL,,,,,
pg,10,,,,,,
pg,10,"You can always write a small bit of code to do this for you yourself,",,,,,
pg,10,but I would highly recommend using an already developed solution to reduce,,,,,
pg,10,the amount of debugging you have to do,,,,,
pg,10,,,,,,
pg,10,It should be noted that in a few bizarre instances I've actually seen,,,,,
pg,10,database connection pooling reduce the performance of web based applications,,,,,
pg,10,,,,,,
pg,10,At a certain point the cost of handling the pooling is more expensive than,,,,,
pg,10,simply creating a new connection,,,,,
pg,10,,,,,,
pg,10,I suggest testing it both ways to see which,,,,,
pg,10,is best for your environment,,,,,
pg,10,,,,,,
pg,10,Stateful Applications,,,,,
pg,10,When building stateful applications you should look into using database,,,,,
pg,10,cursors via the DECLARE command,,,,,
pg,10,,,,,,
pg,10,A cursor allows you to plan and execute,,,,,
pg,10,"a query, but only pull back the data as you need it, for example one row",,,,,
pg,10,at a time,,,,,
pg,10,,,,,,
pg,10,This can greatly increase the snappiness of the UI,,,,,
pg,10,,,,,,
pg,10,General Application Issues,,,,,
pg,10,These issues typically effect both stateful and stateless applications,,,,,
pg,10,in the same fashion,,,,,
pg,10,,,,,,
pg,10,One good technique is to use server side prepared,,,,,
pg,10,queries for any queries you execute often,,,,,
pg,10,,,,,,
pg,10,This reduces the overall,,,,,
pg,10,query time by caching the query plan for later use,,,,,
pg,10,,,,,,
pg,10,It should be noted however if you prepare a query in advance using placeholder,,,,,
pg,10,values ( such as 'column_name = ?' ) then the planner will not always be able,,,,,
pg,10,to choose the best plan,,,,,
pg,10,,,,,,
pg,10,"For example, your query has a placeholder for the",,,,,
pg,10,boolean column 'active' and you have a partial index on false values the,,,,,
pg,10,planner won't use it because it cannot be sure the value passed in on,,,,,
pg,10,execution will be true or false,,,,,
pg,10,,,,,,
pg,10,"You can also obviously utilize stored procedures here to reduce the transmit,",,,,,
pg,10,"parse, and plan portions of the typical query life cycle",,,,,
pg,10,,,,,,
pg,10,It is best to,,,,,
pg,10,profile your application and find commonly used queries and data manipulations,,,,,
pg,10,and put them into a stored procedure,,,,,
pg,10,,,,,,
pg,10,Other Useful Resources,,,,,
pg,10,Here is a short list of other items that may be of help,,,,,
pg,10,,,,,,
pg,10,PostgreSQL Homepage —,,,,,
pg,10,The obvious place for all things PostgreSQL,,,,,
pg,10,,,,,,
pg,10,psql-performance mailing list — This PostgreSQL mailing list is focused on,,,,,
pg,10,performance related questions and discussions,,,,,
pg,10,,,,,,
pg,10,PostgreSQL Tuning Service,,,,,
pg,10,PostgreSQL Support Service,,,,,
pg,10,Recommended Books,,,,,
pg,10,PostgreSQL 9.0 High Performance,,,,,
pg,10,Beginning Databases with PostgreSQL: From Novice to Professional,,,,,
pg,10,PostgreSQL 9 Admin Cookbook,,,,,
pg,10,Practical PostgreSQL (O'Reilly Unix),,,,,
pg,10,PostgreSQL: Introduction and Concepts,,,,,
pg,10,Frank Wiles switched to using PostgreSQL as his primary database system over,,,,,
pg,10,15 years ago and has never looked back,,,,,
pg,10,He has used PostgreSQL in a variety of,,,,,
pg,10,"situations, most often however coupled with Python and Django to build high performance",,,,,
pg,10,browser based applications,,,,,
pg,10,He has published several articles and a book,,,,,
pg,10,on topics ranging from systems administration to application development,,,,,
pg,10,,,,,,
pg,10,He can be reached at frank@revsys,,,,,
pg,10,com,,,,,
pg,10,,,,,,
pg,10,Let’s work together,,,,,
pg,10,,,,,,
pg,10,sales@revsys,,,,,
pg,10,com,,,,,
pg,10,Contact us,,,,,
pg,10,Services,,,,,
pg,10,Django,,,,,
pg,10,PostgreSQL,,,,,
pg,10,Operations,,,,,
pg,10,Development,,,,,
pg,10,Open Source,,,,,
pg,10,Systems Admin,,,,,
pg,10,Products,,,,,
pg,10,Spectrum,,,,,
pg,10,Open Source,,,,,
pg,10,Blog,,,,,
pg,10,News,,,,,
pg,10,Blog,,,,,
pg,10,Quick Tips,,,,,
pg,10,Talks,,,,,
pg,10,Other,,,,,
pg,10,About,,,,,
pg,10,Case Studies,,,,,
pg,10,Team,,,,,
pg,10,Testimonials,,,,,
pg,10,Clients,,,,,
pg,10,Press,,,,,
pg,10,Contact,,,,,
pg,10,Get Connected,,,,,
pg,10,Signup for our newsletter for tips and tricks,,,,,
pg,10,,,,,,
pg,10,Have a comment or suggestion? comments@revsys,,,,,
pg,10,com,,,,,
pg,10,"©2002–2020 Revolution Systems, LLC",,,,,
pg,10,All rights reserved,,,,,
ms,1,10 essential MySQL performance tuning tips | InfoWorld,,,,,
ms,1,Close Ad,,,,,
ms,1,infoworld,,,,,
ms,1,UNITED STATES,,,,,
ms,1,United States,,,,,
ms,1,United Kingdom,,,,,
ms,1,Welcome! Here are the latest Insider stories,,,,,
ms,1,,,,,,
ms,1,Download InfoWorld’s ultimate R data,,,,,
ms,1,table cheat sheet,,,,,
ms,1,"14 technology winners and losers, post-COVID-19",,,,,
ms,1,COVID-19 crisis accelerates rise of virtual call centers,,,,,
ms,1,Q&A: Box CEO Aaron Levie looks at the future of remote work,,,,,
ms,1,More Insider,,,,,
ms,1,Sign Out,,,,,
ms,1,Sign In,,,,,
ms,1,Register,,,,,
ms,1,NEW FROM IDG,,,,,
ms,1,Learn More,,,,,
ms,1,Sign Out,,,,,
ms,1,Sign In,,,,,
ms,1,Register,,,,,
ms,1,NEW Insider PRO,,,,,
ms,1,Learn More,,,,,
ms,1,Latest Insider,,,,,
ms,1,Rethinking collaboration: 6 vendors offer new paths to remote work,,,,,
ms,1,"Amid the pandemic, using trust to fight shadow IT",,,,,
ms,1,5 tips for running a successful virtual meeting,,,,,
ms,1,CIOs reshape IT priorities in wake of COVID-19,,,,,
ms,1,NEW FROM IDG,,,,,
ms,1,Learn More,,,,,
ms,1,NEW FROM IDG,,,,,
ms,1,Subscribe to access expert insight on business technology - in an ad-free environment,,,,,
ms,1,Learn more,,,,,
ms,1,Welcome! Check out the latest Insider stories here,,,,,
ms,1,,,,,,
ms,1,Sign Out,,,,,
ms,1,Sign In,,,,,
ms,1,Register,,,,,
ms,1,More from the IDG Network,,,,,
ms,1,About Us |,,,,,
ms,1,Contact |,,,,,
ms,1,Privacy Policy |,,,,,
ms,1,Cookie Policy |,,,,,
ms,1,Member Preferences |,,,,,
ms,1,Advertising |,,,,,
ms,1,IDG Careers |,,,,,
ms,1,Ad Choices |,,,,,
ms,1,E-commerce Links |,,,,,
ms,1,California: Do Not Sell My Personal Info |,,,,,
ms,1,Follow Us,,,,,
ms,1,×,,,,,
ms,1,Close,,,,,
ms,1,Home,,,,,
ms,1,Data Management,,,,,
ms,1,SQL,,,,,
ms,1,10 essential performance tips for MySQL,,,,,
ms,1,"From workload profiling to the three rules of indexing, these expert insights are sure to make your MySQL servers scream",,,,,
ms,1,By Baron Schwartz,,,,,
ms,1,InfoWorld |,,,,,
ms,1,Thinkstock,,,,,
ms,1,"As with all relational databases, MySQL can prove to be a complicated beast, one that can crawl to a halt at a moment’s notice, leaving your applications in the lurch and your business on the line",,,,,
ms,1,"The truth is, common mistakes underlie most MySQL performance problems",,,,,
ms,1,"To ensure your MySQL server hums along at top speed, providing stable and consistent performance, it is important to eliminate these mistakes, which are often obscured by some subtlety in your workload or a configuration trap",,,,,
ms,1,,,,,,
ms,1,[ Database slow? Improve the speed and scalability of your RDBMS with these 21 rules for faster SQL queries,,,,,
ms,1,| Keep up with the hottest topics in programming with InfoWorld's App Dev Report newsletter,,,,,
ms,1,],,,,,
ms,1,"Luckily, many MySQL performance issues turn out to have similar solutions, making troubleshooting and tuning MySQL a manageable task",,,,,
ms,1,Here are 10 tips for getting great performance out of MySQL,,,,,
ms,1,MySQL performance tip No,,,,,
ms,1,1: Profile your workloadThe best way to understand how your server spends its time is to profile the server’s workload,,,,,
ms,1,"By profiling your workload, you can expose the most expensive queries for further tuning",,,,,
ms,1,"Here, time is the most important metric because when you issue a query against the server, you care very little about anything except how quickly it completes",,,,,
ms,1,The best way to profile your workload is with a tool such as MySQL Enterprise Monitor’s query analyzer or the pt-query-digest from the Percona Toolkit,,,,,
ms,1,"These tools capture queries the server executes and return a table of tasks sorted by decreasing order of response time, instantly bubbling up the most expensive and time-consuming tasks to the top so that you can see where to focus your efforts",,,,,
ms,1,"Workload-profiling tools group similar queries together, allowing you to see the queries that are slow, as well as the queries that are fast but executed many times",,,,,
ms,1,,,,,,
ms,1,MySQL performance tip No,,,,,
ms,1,"2: Understand the four fundamental resourcesTo function, a database server needs four fundamental resources: CPU, memory, disk, and network",,,,,
ms,1,"If any of these is weak, erratic, or overloaded, then the database server is very likely to perform poorly",,,,,
ms,1,Understanding the fundamental resources is important in two particular areas: choosing hardware and troubleshooting problems,,,,,
ms,1,"When choosing hardware for MySQL, ensure good-performing components all around",,,,,
ms,1,"Just as important, balance them reasonably well against each other",,,,,
ms,1,"Often, organizations will select servers with fast CPUs and disks but that are starved for memory",,,,,
ms,1,"In some cases, adding memory is a cheap way of increasing performance by orders of magnitude, especially on workloads that are disk-bound",,,,,
ms,1,"This might seem counterintuitive, but in many cases disks are overutilized because there isn’t enough memory to hold the server’s working set of data",,,,,
ms,1,Another good example of this balance pertains to CPUs,,,,,
ms,1,"In most cases, MySQL will perform well with fast CPUs because each query runs in a single thread and can’t be parallelized across CPUs",,,,,
ms,1,"When it comes to troubleshooting, check the performance and utilization of all four resources, with a careful eye toward determining whether they are performing poorly or are simply being asked to do too much work",,,,,
ms,1,This knowledge can help solve problems quickly,,,,,
ms,1,MySQL performance tip No,,,,,
ms,1,3: Don’t use MySQL as a queueQueues and queue-like access patterns can sneak into your application without your knowing it,,,,,
ms,1,"For example, if you set the status of an item so that a particular worker process can claim it before acting on it, then you’re unwittingly creating a queue",,,,,
ms,1,"Marking emails as unsent, sending them, then marking them as sent is a common example",,,,,
ms,1,"Queues cause problems for two major reasons: They serialize your workload, preventing tasks from being done in parallel, and they often result in a table that contains work in process as well as historical data from jobs that were processed long ago",,,,,
ms,1,Both add latency to the application and load to MySQL,,,,,
ms,1,MySQL performance tip No,,,,,
ms,1,"4: Filter results by cheapest firstA great way to optimize MySQL is to do cheap, imprecise work first, then the hard, precise work on the smaller, resulting set of data",,,,,
ms,1,"For example, suppose you’re looking for something within a given radius of a geographical point",,,,,
ms,1,The first tool in many programmers’ toolbox is the great-circle (Haversine) formula for computing distance along the surface of a sphere,,,,,
ms,1,"The problem with this technique is that the formula requires a lot of trigonometric operations, which are very CPU-intensive",,,,,
ms,1,Great-circle calculations tend to run slowly and make the machine’s CPU utilization skyrocket,,,,,
ms,1,"Before applying the great-circle formula, pare down your records to a small subset of the total, and trim the resulting set to a precise circle",,,,,
ms,1,A square that contains the circle (precisely or imprecisely) is an easy way to do this,,,,,
ms,1,"That way, the world outside the square never gets hit with all those costly trig functions",,,,,
ms,1,MySQL performance tip No,,,,,
ms,1,5: Know the two scalability death trapsScalability is not as vague as you may believe,,,,,
ms,1,"In fact, there are precise mathematical definitions of scalability that are expressed as equations",,,,,
ms,1,These equations highlight why systems don’t scale as well as they should,,,,,
ms,1,"Take the Universal Scalability Law, a definition that is handy in expressing and quantifying a system’s scalability characteristics",,,,,
ms,1,It explains scaling problems in terms of two fundamental costs: serialization and crosstalk,,,,,
ms,1,Parallel processes that must halt for something serialized to take place are inherently limited in their scalability,,,,,
ms,1,"Likewise, if the parallel processes need to chat with each other all the time to coordinate their work, they limit each other",,,,,
ms,1,"Avoid serialization and crosstalk, and your application will scale much better",,,,,
ms,1,"What does this translate into inside of MySQL? It varies, but some examples would be avoiding exclusive locks on rows",,,,,
ms,1,"Queues, point No",,,,,
ms,1,"3 above, tend to scale poorly for this reason",,,,,
ms,1,MySQL performance tip No,,,,,
ms,1,6: Don’t focus too much on configurationDBAs tend to spend a huge amount of time tweaking configurations,,,,,
ms,1,The result is usually not a big improvement and can sometimes even be very damaging,,,,,
ms,1,"I’ve seen a lot of “optimized” servers that crashed constantly, ran out of memory, and performed poorly when the workload got a little more intense",,,,,
ms,1,"The defaults that ship with MySQL are one-size-fits-none and badly outdated, but you don’t need to configure everything",,,,,
ms,1,It’s better to get the fundamentals right and change other settings only if needed,,,,,
ms,1,"In most cases, you can get 95 percent of the server’s peak performance by setting about 10 options correctly",,,,,
ms,1,The few situations where this doesn’t apply are going to be edge cases unique to your circumstances,,,,,
ms,1,"In most cases, server “tuning” tools aren’t recommended because they tend to give guidelines that don’t make sense for specific cases",,,,,
ms,1,"Some even have dangerous, inaccurate advice coded into them – such as cache hit ratios and memory consumption formulas",,,,,
ms,1,"These were never right, and they have become even less correct as time has passed",,,,,
ms,1,MySQL performance tip No,,,,,
ms,1,7: Watch out for pagination queriesApplications that paginate tend to bring the server to its knees,,,,,
ms,1,"In showing you a page of results, with a link to go to the next page, these applications typically group and sort in ways that can’t use indexes, and they employ a LIMIT and offset that cause the server to do a lot of work generating, then discarding rows",,,,,
ms,1,Optimizations can often be found in the user interface itself,,,,,
ms,1,"Instead of showing the exact number of pages in the results and links to each page individually, you can just show a link to the next page",,,,,
ms,1,You can also prevent people from going to pages too far from the first page,,,,,
ms,1,"On the query side, instead of using LIMIT with offset, you can select one more row than you need, and when the user clicks the “next page” link, you can designate that final row as the starting point for the next set of results",,,,,
ms,1,"For example, if the user viewed a page with rows 101 through 120, you would select row 121 as well; to render the next page, you’d query the server for rows greater than or equal to 121, limit 21",,,,,
ms,1,ySQL performance tip No,,,,,
ms,1,"8: Save statistics eagerly, alert reluctantlyMonitoring and alerting are essential, but what happens to the typical monitoring system? It starts sending false positives, and system administrators set up email filtering rules to stop the noise",,,,,
ms,1,Soon your monitoring system is completely useless,,,,,
ms,1,I like to think about monitoring in two ways: capturing metrics and alerting,,,,,
ms,1,It’s very important to capture and save all the metrics you possibly can because you’ll be glad to have them when you’re trying to figure out what changed in the system,,,,,
ms,1,"Someday, a strange problem will crop up, and you’ll love the ability to point to a graph and show a change in the server’s workload",,,,,
ms,1,"By contrast, there’s a tendency to alert way too much",,,,,
ms,1,People often alert on things like the buffer hit ratio or the number of temporary tables created per second,,,,,
ms,1,The problem is that there is no good threshold for such a ratio,,,,,
ms,1,"The right threshold is not only different from server to server, but from hour to hour as your workload changes",,,,,
ms,1,"As a result, alert sparingly and only on conditions that indicate a definite, actionable problem",,,,,
ms,1,"A low buffer hit ratio isn’t actionable, nor does it indicate a real issue, but a server that doesn’t respond to a connection attempt is an actual problem that needs to be solved",,,,,
ms,1,MySQL performance tip No,,,,,
ms,1,9: Learn the three rules of indexingIndexing is probably the most misunderstood topic in databases because there are so many ways to get confused about how indexes work and how the server uses them,,,,,
ms,1,It takes a lot of effort to really understand what’s going on,,,,,
ms,1,"Indexes, when properly designed, serve three important purposes in a database server:",,,,,
ms,1,Indexes let the server find groups of adjacent rows instead of single rows,,,,,
ms,1,"Many people think the purpose of an index is to find individual rows, but finding single rows leads to random disk operations, which is slow",,,,,
ms,1,"It’s much better to find groups of rows, all or most of which are interesting, than to find rows one at a time",,,,,
ms,1,,,,,,
ms,1,Indexes let the server avoid sorting by reading the rows in a desired order,,,,,
ms,1,Sorting is costly,,,,,
ms,1,Reading rows in the desired order is much faster,,,,,
ms,1,,,,,,
ms,1,"Indexes let the server satisfy entire queries from the index alone, avoiding the need to access the table at all",,,,,
ms,1,This is variously known as a covering index or an index-only query,,,,,
ms,1,,,,,,
ms,1,"If you can design your indexes and queries to exploit these three opportunities, you can make your queries several orders of magnitude faster",,,,,
ms,1,MySQL performance tip No,,,,,
ms,1,10: Leverage the expertise of your peersDon’t try to go it alone,,,,,
ms,1,"If you’re puzzling over a problem and doing what seems logical and sensible to you, that’s great",,,,,
ms,1,This will work about 19 times out of 20,,,,,
ms,1,"The other time, you’ll go down a rabbit hole that will be very costly and time-consuming, precisely because the solution you’re trying seems to make a lot of sense",,,,,
ms,1,Build a network of MySQL-related resources – and this goes beyond toolsets and troubleshooting guides,,,,,
ms,1,"There are some extremely knowledgeable people lurking on mailing lists, forums, Q&A websites, and so on",,,,,
ms,1,"Conferences, trade shows, and local user group events provide valuable opportunities for gaining insights and building relationships with peers who can help you in a pinch",,,,,
ms,1,"For those looking for tools to complement these tips, you can check out the Percona Configuration Wizard for MySQL, Percona Query Advisor for MySQL, and Percona Monitoring Plugins",,,,,
ms,1,(Note: You’ll need to create a Percona account to access those first two links,,,,,
ms,1,It’s free,,,,,
ms,1,The configuration wizard can help you generate a baseline my,,,,,
ms,1,cnf file for a new server that’s superior to the sample files that ship with the server,,,,,
ms,1,The query advisor will analyze your SQL to help detect potentially bad patterns such as pagination queries (No,,,,,
ms,1,7),,,,,
ms,1,Percona Monitoring Plugins are a set of monitoring and graphing plugins to help you save statistics eagerly and alert reluctantly (No,,,,,
ms,1,8),,,,,
ms,1,All of these tools are freely available,,,,,
ms,1,,,,,,
ms,1,Related:,,,,,
ms,1,SQL,,,,,
ms,1,Database,,,,,
ms,1,Software Development,,,,,
ms,1,MySQL,,,,,
ms,1,"Baron Schwartz is a database performance and scalability expert, the lead author of ""High Performance MySQL, 3rd Edition"" (2012, O'Reilly), and the founder of VividCortex",,,,,
ms,1,He was previously chief performance architect at Percona,,,,,
ms,1,,,,,,
ms,1,Follow,,,,,
ms,1,"Copyright © 2017 IDG Communications, Inc",,,,,
ms,1,,,,,,
ms,1,"Stay up to date with InfoWorld’s newsletters for software developers, analysts, database programmers, and data scientists",,,,,
ms,1,Get expert insights from our member-only Insider articles,,,,,
ms,1,,,,,,
ms,1,InfoWorld,,,,,
ms,1,Follow us,,,,,
ms,1,About Us,,,,,
ms,1,Contact,,,,,
ms,1,Privacy Policy,,,,,
ms,1,Cookie Policy,,,,,
ms,1,Member Preferences,,,,,
ms,1,Advertising,,,,,
ms,1,IDG Careers,,,,,
ms,1,Ad Choices,,,,,
ms,1,E-commerce Links,,,,,
ms,1,California: Do Not Sell My Personal Info,,,,,
ms,1,"Copyright © 2020 IDG Communications, Inc",,,,,
ms,1,,,,,,
ms,1,Explore the IDG Network descend,,,,,
ms,1,CIO,,,,,
ms,1,Computerworld,,,,,
ms,1,CSO Online,,,,,
ms,1,InfoWorld,,,,,
ms,1,Network World,,,,,
ms,2,5 MySQL Performance Tuning – 5 Steps for Database Developers - Database Management - Blogs - Quest Community,,,,,
ms,2,Products,,,,,
ms,2,View all products,,,,,
ms,2,Free trials,,,,,
ms,2,Buy online,,,,,
ms,2,Product lines,,,,,
ms,2,ApexSQL,,,,,
ms,2,Change Auditor,,,,,
ms,2,Enterprise Reporter,,,,,
ms,2,Foglight Database Monitoring,,,,,
ms,2,Foglight Evolve,,,,,
ms,2,KACE,,,,,
ms,2,Metalogix,,,,,
ms,2,Migration Manager,,,,,
ms,2,NetVault Backup,,,,,
ms,2,One Identity,,,,,
ms,2,QoreStor,,,,,
ms,2,Quest On Demand,,,,,
ms,2,Rapid Recovery,,,,,
ms,2,Recovery Manager,,,,,
ms,2,RemoteScan,,,,,
ms,2,SharePlex,,,,,
ms,2,Spotlight,,,,,
ms,2,Stat,,,,,
ms,2,Toad,,,,,
ms,2,Featured products,,,,,
ms,2,Cloud Management,,,,,
ms,2,Cloud Access Manager,,,,,
ms,2,"Foglight for Virtualization, Enterprise Edition",,,,,
ms,2,Identity Manager,,,,,
ms,2,On Demand Migration for Email,,,,,
ms,2,Quest On Demand,,,,,
ms,2,Rapid Recovery,,,,,
ms,2,Data Protection,,,,,
ms,2,Foglight for Virtualization,,,,,
ms,2,NetVault,,,,,
ms,2,NetVault for Office 365,,,,,
ms,2,QorePortal,,,,,
ms,2,QoreStor,,,,,
ms,2,Rapid Recovery,,,,,
ms,2,vRanger,,,,,
ms,2,Database Management,,,,,
ms,2,Foglight for Databases,,,,,
ms,2,Litespeed for SQL Server,,,,,
ms,2,SharePlex,,,,,
ms,2,Spotlight SQL Server Enterprise,,,,,
ms,2,Toad Data Point,,,,,
ms,2,Toad DevOps Toolkit,,,,,
ms,2,Toad Edge,,,,,
ms,2,Toad for Oracle,,,,,
ms,2,Toad for SQL Server,,,,,
ms,2,Identity & Access Management,,,,,
ms,2,Active Roles,,,,,
ms,2,Defender,,,,,
ms,2,Identity Manager,,,,,
ms,2,Identity Manager Data Governance,,,,,
ms,2,One Identity Safeguard,,,,,
ms,2,Password Manager,,,,,
ms,2,Privileged Access Suite for Unix,,,,,
ms,2,Starling Connect,,,,,
ms,2,Starling Two-Factor Authentication,,,,,
ms,2,syslog-ng,,,,,
ms,2,Microsoft Platform Management,,,,,
ms,2,Active Administrator,,,,,
ms,2,Change Auditor,,,,,
ms,2,Enterprise Reporter,,,,,
ms,2,GPOADmin,,,,,
ms,2,InTrust,,,,,
ms,2,Metalogix,,,,,
ms,2,Migration Manager,,,,,
ms,2,On Demand Migration for Email,,,,,
ms,2,Quest On Demand,,,,,
ms,2,Recovery Manager,,,,,
ms,2,Performance Monitoring,,,,,
ms,2,Foglight Capacity Director,,,,,
ms,2,Foglight Hybrid Cloud Manager,,,,,
ms,2,Foglight for Databases,,,,,
ms,2,Foglight for Operating Systems,,,,,
ms,2,Foglight for Oracle,,,,,
ms,2,Foglight for PostgreSQL,,,,,
ms,2,Foglight for SQL Server,,,,,
ms,2,Foglight for Storage Management,,,,,
ms,2,Foglight for Virtualization,,,,,
ms,2,Spotlight on SQL Server,,,,,
ms,2,Unified Endpoint Management,,,,,
ms,2,Desktop Authority Management Suite,,,,,
ms,2,KACE Cloud Mobile Device Manager,,,,,
ms,2,KACE Desktop Authority,,,,,
ms,2,KACE Privilege Manager,,,,,
ms,2,KACE Systems Deployment Appliance,,,,,
ms,2,KACE Systems Management Appliance,,,,,
ms,2,RemoteScan,,,,,
ms,2,Solutions,,,,,
ms,2,View all Solutions,,,,,
ms,2,Industries,,,,,
ms,2,Education,,,,,
ms,2,Energy,,,,,
ms,2,Federal Government,,,,,
ms,2,Financial Services,,,,,
ms,2,Healthcare,,,,,
ms,2,State & Local Government,,,,,
ms,2,Platforms,,,,,
ms,2,Active Directory,,,,,
ms,2,Cisco,,,,,
ms,2,DB2,,,,,
ms,2,Exchange,,,,,
ms,2,Google,,,,,
ms,2,Hyper-v,,,,,
ms,2,Lotus Notes,,,,,
ms,2,OneDrive for Business,,,,,
ms,2,Office 365,,,,,
ms,2,Oracle,,,,,
ms,2,SAP/Sybase,,,,,
ms,2,SharePoint,,,,,
ms,2,SQL Server,,,,,
ms,2,Teams,,,,,
ms,2,Unix/Linux,,,,,
ms,2,VMware,,,,,
ms,2,Windows Server,,,,,
ms,2,Cloud Management,,,,,
ms,2,Data Protection,,,,,
ms,2,Overview,,,,,
ms,2,Backup & Recovery,,,,,
ms,2,Cloud Management,,,,,
ms,2,Deduplication & Compression,,,,,
ms,2,Disaster Recovery,,,,,
ms,2,Office 365 Data Protection,,,,,
ms,2,Virtualization Management,,,,,
ms,2,Database Management,,,,,
ms,2,Overview,,,,,
ms,2,Administration,,,,,
ms,2,Cloud Migration,,,,,
ms,2,Data Preparation and Provisioning,,,,,
ms,2,Development,,,,,
ms,2,DevOps,,,,,
ms,2,Performance Monitoring,,,,,
ms,2,Replication,,,,,
ms,2,Supported Platforms,,,,,
ms,2,IBM DB2,,,,,
ms,2,MySQL,,,,,
ms,2,Oracle,,,,,
ms,2,PostgreSQL,,,,,
ms,2,SAP Solutions,,,,,
ms,2,SQL Server,,,,,
ms,2,GDPR Compliance,,,,,
ms,2,Identity & Access Management,,,,,
ms,2,Overview,,,,,
ms,2,Identity Administration,,,,,
ms,2,Identity Governance,,,,,
ms,2,Privileged Access Management,,,,,
ms,2,AD Account Lifecycle Management,,,,,
ms,2,Access Control,,,,,
ms,2,Cloud,,,,,
ms,2,Log Management,,,,,
ms,2,Microsoft Platform Management,,,,,
ms,2,Overview,,,,,
ms,2,Mergers & Acquisitions,,,,,
ms,2,Migration & Consolidation,,,,,
ms,2,Office 365 Migration & Management,,,,,
ms,2,Security & Compliance,,,,,
ms,2,Windows Backup & Recovery,,,,,
ms,2,Supported Platforms,,,,,
ms,2,Active Directory,,,,,
ms,2,Cisco,,,,,
ms,2,Exchange,,,,,
ms,2,Google,,,,,
ms,2,Groupwise,,,,,
ms,2,Lotus Notes,,,,,
ms,2,Office 365,,,,,
ms,2,OneDrive for Business,,,,,
ms,2,SharePoint,,,,,
ms,2,SQL Server,,,,,
ms,2,Teams,,,,,
ms,2,Unix/Linux,,,,,
ms,2,Windows Server,,,,,
ms,2,Performance Monitoring,,,,,
ms,2,Overview,,,,,
ms,2,Database Performance Monitoring,,,,,
ms,2,Operating System Monitoring,,,,,
ms,2,Storage Performance & Utilization Management,,,,,
ms,2,Supported Platforms,,,,,
ms,2,Active Directory,,,,,
ms,2,DB2,,,,,
ms,2,Exchange,,,,,
ms,2,Java,,,,,
ms,2,Hyper-V,,,,,
ms,2,,,,,,
ms,2,ET,,,,,
ms,2,Oracle,,,,,
ms,2,SAP/Sybase,,,,,
ms,2,Storage,,,,,
ms,2,SQL Server,,,,,
ms,2,VMware,,,,,
ms,2,Unified Endpoint Management,,,,,
ms,2,Overview,,,,,
ms,2,Endpoint Compliance,,,,,
ms,2,Endpoint Security,,,,,
ms,2,Endpoint Visibility,,,,,
ms,2,Industries,,,,,
ms,2,Education,,,,,
ms,2,Healthcare,,,,,
ms,2,Supported Platforms,,,,,
ms,2,Internet of things,,,,,
ms,2,Microsoft® Windows,,,,,
ms,2,MAC,,,,,
ms,2,UNIX/LinuX,,,,,
ms,2,Resources,,,,,
ms,2,Blogs,,,,,
ms,2,Blogs A to Z,,,,,
ms,2,Data Protection,,,,,
ms,2,Database Management,,,,,
ms,2,Microsoft Platform Management,,,,,
ms,2,Performance Monitoring,,,,,
ms,2,Unified Endpoint Management,,,,,
ms,2,Customer Stories,,,,,
ms,2,Documents,,,,,
ms,2,Events,,,,,
ms,2,Webcasts,,,,,
ms,2,Technical Documentation,,,,,
ms,2,Videos,,,,,
ms,2,Whitepapers,,,,,
ms,2,Trials,,,,,
ms,2,Services,,,,,
ms,2,Consulting Services,,,,,
ms,2,Overview,,,,,
ms,2,Microsoft Platform Services,,,,,
ms,2,Data Protection Services,,,,,
ms,2,Unified Endpoint Management,,,,,
ms,2,Performance Monitoring Services,,,,,
ms,2,Database Management Services,,,,,
ms,2,Educational Services,,,,,
ms,2,Support Services,,,,,
ms,2,Support,,,,,
ms,2,Support Home,,,,,
ms,2,By Product,,,,,
ms,2,All Products,,,,,
ms,2,AppAssure,,,,,
ms,2,Archive Manager,,,,,
ms,2,Change Auditor,,,,,
ms,2,Desktop Authority,,,,,
ms,2,DR Series,,,,,
ms,2,Foglight,,,,,
ms,2,KACE,,,,,
ms,2,Migration Manager,,,,,
ms,2,NetVault,,,,,
ms,2,Rapid Recovery,,,,,
ms,2,SharePlex,,,,,
ms,2,Toad,,,,,
ms,2,vRanger,,,,,
ms,2,Contact Support,,,,,
ms,2,Overview,,,,,
ms,2,Customer Service,,,,,
ms,2,Licensing Assistance,,,,,
ms,2,Renewal Assistance,,,,,
ms,2,Technical Support,,,,,
ms,2,Download Software,,,,,
ms,2,Knowledge Base,,,,,
ms,2,My Account,,,,,
ms,2,My Products,,,,,
ms,2,My Service Requests,,,,,
ms,2,My Licenses,,,,,
ms,2,My Groups,,,,,
ms,2,My Profile,,,,,
ms,2,Policies & Procedures,,,,,
ms,2,Consulting Services,,,,,
ms,2,Microsoft Platform Management,,,,,
ms,2,Data Protection,,,,,
ms,2,Unified Endpoint Management,,,,,
ms,2,Performance Monitoring,,,,,
ms,2,Database Management,,,,,
ms,2,Technical Documentation,,,,,
ms,2,Educational Services,,,,,
ms,2,User Forums,,,,,
ms,2,Video Tutorials,,,,,
ms,2,Partners,,,,,
ms,2,Overview,,,,,
ms,2,Partner Circle Log In,,,,,
ms,2,Become a Partner,,,,,
ms,2,Find a Partner,,,,,
ms,2,Partner Community,,,,,
ms,2,Communities,,,,,
ms,2,Home,,,,,
ms,2,Blogs,,,,,
ms,2,Data Protection,,,,,
ms,2,Database Management,,,,,
ms,2,ITNinja,,,,,
ms,2,Microsoft Platform Management,,,,,
ms,2,Performance Monitoring,,,,,
ms,2,Toad World Blog,,,,,
ms,2,Unified Endpoint Management,,,,,
ms,2,Forums,,,,,
ms,2,All Product Forums,,,,,
ms,2,Active Administrator,,,,,
ms,2,Desktop Authority,,,,,
ms,2,Foglight,,,,,
ms,2,ITNinja,,,,,
ms,2,Migration Manager for Active Directory,,,,,
ms,2,NetVault,,,,,
ms,2,Rapid Recovery,,,,,
ms,2,Toad World Forum,,,,,
ms,2,Social Networks,,,,,
ms,2,Facebook,,,,,
ms,2,LinkedIn,,,,,
ms,2,Twitter@Quest,,,,,
ms,2,Twitter@QuestSupport,,,,,
ms,2,YouTube,,,,,
ms,2,製品情報,,,,,
ms,2,すべての製品情報を見る,,,,,
ms,2,Change Auditor,,,,,
ms,2,Foglight,,,,,
ms,2,KACE,,,,,
ms,2,Metalogix,,,,,
ms,2,Migration Manager,,,,,
ms,2,Migrator for Notes to SharePoint,,,,,
ms,2,NetVault Backup,,,,,
ms,2,On Demand Migration for Email,,,,,
ms,2,QoreStor,,,,,
ms,2,Rapid Recovery,,,,,
ms,2,Recovery Manager,,,,,
ms,2,SharePlex,,,,,
ms,2,Spotlight,,,,,
ms,2,Toad,,,,,
ms,2,ソリューション,,,,,
ms,2,すべてのプラットフォームを見る,,,,,
ms,2,クラウド管理,,,,,
ms,2,GDPRコンプライアンス,,,,,
ms,2,データ保護,,,,,
ms,2,概要,,,,,
ms,2,クラウド管理,,,,,
ms,2,ディザスタリカバリ,,,,,
ms,2,バックアップとリカバリ,,,,,
ms,2,Office 365 データ保護,,,,,
ms,2,仮想化管理,,,,,
ms,2,重複除外と複製,,,,,
ms,2,データベース管理,,,,,
ms,2,概要,,,,,
ms,2,DevOps,,,,,
ms,2,データの準備と分析,,,,,
ms,2,データベースのクラウド移行,,,,,
ms,2,データベースパフォーマンス監視,,,,,
ms,2,データベース管理,,,,,
ms,2,データベース複製ソフトウェアツール,,,,,
ms,2,統合エンドポイント管理,,,,,
ms,2,概要,,,,,
ms,2,エンドポイントコンプライアンス,,,,,
ms,2,エンドポイントセキュリティ,,,,,
ms,2,エンドポイントの可視化,,,,,
ms,2,Microsoftプラットフォーム管理,,,,,
ms,2,概要,,,,,
ms,2,ハイブリッドActive Directoryのセキュリティとガバナンス,,,,,
ms,2,Microsoftプラットフォームの移行計画と統合,,,,,
ms,2,セキュリティとコンプライアンス,,,,,
ms,2,情報アーカイブおよびストレージ管理ソリューション,,,,,
ms,2,Windowsのバックアップとリカバリ,,,,,
ms,2,Microsoft Serverのパフォーマンスと可用性,,,,,
ms,2,レポート作成機能,,,,,
ms,2,グループポリシーと権限,,,,,
ms,2,パフォーマンス監視,,,,,
ms,2,サービス,,,,,
ms,2,コンサルティングサービス,,,,,
ms,2,概要,,,,,
ms,2,Microsoftプラットフォーム管理,,,,,
ms,2,データ保護,,,,,
ms,2,統合エンドポイント管理,,,,,
ms,2,パフォーマンス監視,,,,,
ms,2,データベース管理,,,,,
ms,2,トレーニングと認定資格,,,,,
ms,2,サポートサービス,,,,,
ms,2,サポート,,,,,
ms,2,サポートホーム,,,,,
ms,2,製品で検索,,,,,
ms,2,All Products,,,,,
ms,2,AppAssure,,,,,
ms,2,Archive Manager,,,,,
ms,2,Change Auditor,,,,,
ms,2,Desktop Authority,,,,,
ms,2,DR Series,,,,,
ms,2,Foglight,,,,,
ms,2,KACE,,,,,
ms,2,Migration Manager,,,,,
ms,2,NetVault,,,,,
ms,2,Rapid Recovery,,,,,
ms,2,SharePlex,,,,,
ms,2,Toad,,,,,
ms,2,vRanger,,,,,
ms,2,お問い合わせ,,,,,
ms,2,すべて,,,,,
ms,2,カスタマサービス,,,,,
ms,2,ライセンス アシスタンス,,,,,
ms,2,更新のアシスタンス,,,,,
ms,2,技術サポート,,,,,
ms,2,コミュニティフォーラム,,,,,
ms,2,ソフトウェアのダウンロード,,,,,
ms,2,ナレッジベース,,,,,
ms,2,マイアカウント,,,,,
ms,2,マイ プロダクト,,,,,
ms,2,Myサービスリクエスト,,,,,
ms,2,マイ ライセンス,,,,,
ms,2,マイ グループ,,,,,
ms,2,マイ プロファイル,,,,,
ms,2,ポリシーおよび手順,,,,,
ms,2,コンサルティングサービス,,,,,
ms,2,Microsoftプラットフォーム管理,,,,,
ms,2,データ保護,,,,,
ms,2,統合エンドポイント管理,,,,,
ms,2,パフォーマンス監視,,,,,
ms,2,データベース管理,,,,,
ms,2,リリースノートおよびガイド,,,,,
ms,2,教育サービス,,,,,
ms,2,ビデオチュートリアル,,,,,
ms,2,トライアル,,,,,
ms,2,パートナー,,,,,
ms,2,概要,,,,,
ms,2,Partner Circleへのログイン,,,,,
ms,2,パートナーになる,,,,,
ms,2,Find a Partner,,,,,
ms,2,パートナーコミュニティ,,,,,
ms,2,コミュニティ,,,,,
ms,2,Quest Community,,,,,
ms,2,Site,,,,,
ms,2,Search,,,,,
ms,2,User,,,,,
ms,2,Site,,,,,
ms,2,Search,,,,,
ms,2,User,,,,,
ms,2,Blogs,,,,,
ms,2,Database Management,,,,,
ms,2,5 MySQL Performance Tuning Tips,,,,,
ms,2,Data Protection,,,,,
ms,2,Database Management,,,,,
ms,2,Microsoft Platform Management,,,,,
ms,2,Performance Monitoring,,,,,
ms,2,Unified Endpoint Management,,,,,
ms,2,Quest,,,,,
ms,2,More,,,,,
ms,2,Cancel,,,,,
ms,2,New,,,,,
ms,2,5 MySQL Performance Tuning Tips,,,,,
ms,2,Actions,,,,,
ms,2,Subscribe by email,,,,,
ms,2,Posts RSS,,,,,
ms,2,More,,,,,
ms,2,Cancel,,,,,
ms,2,Tags,,,,,
ms,2,Database Performance,,,,,
ms,2,MySQL,,,,,
ms,2,Janis Griffin,,,,,
ms,2,30 Jul 2020,,,,,
ms,2,"If you pride yourself on your SQL optimization skills, then this is a good time to advance your MySQL performance tuning",,,,,
ms,2,,,,,,
ms,2,"For one thing, MySQL has spent the last seven years as a very close #2 in the race with #1- Oracle and #3- Microsoft SQL Server, according to DB-Engines",,,,,
ms,2,,,,,,
ms,2,"For another, MySQL is an open source database, something you can’t say about #1 or #3",,,,,
ms,2,"If you and your fellow database professionals are gravitating toward open source, MySQL is currently the one to beat",,,,,
ms,2,"It’s available on FreeBSD, Linux, OS X, Solaris and Windows",,,,,
ms,2,"It supports almost 20 different programming languages, from Ada to Tcl, which means it has something for just about every developer",,,,,
ms,2,,,,,,
ms,2,"And, MySQL has made recent news by changing obsolete terminology written into its source code and documentation",,,,,
ms,2,Their creators and engineers are paying attention,,,,,
ms,2,,,,,,
ms,2,The need for MySQL performance tuning,,,,,
ms,2,"But even with the #2 database, you can still write inefficient SQL statements and launch queries that run slowly",,,,,
ms,2,"For that, there’s MySQL performance tuning, which I’ll describe in the five tips below",,,,,
ms,2,,,,,,
ms,2,Tip 1: Monitor wait time,,,,,
ms,2,How long are your users waiting for a response from the database? MySQL provides wait events and thread states to help you answer that question,,,,,
ms,2,"By monitoring each step that a SQL statement takes in the database until it sends back a response, you draw a clear picture of where the query spends time",,,,,
ms,2,And that’s where you start your MySQL performance tuning,,,,,
ms,2,,,,,,
ms,2,"In early versions of MySQL, you couldn’t look at the Performance_Schema database or the Information_Schema database without causing locking or affecting performance",,,,,
ms,2,"Nowadays, MySQL offers better information on both current and historical events at the levels of statements, stages and waits",,,,,
ms,2,"For example, the number of tables in Performance_Schema that you can query for tuning information grew from 17 to 87 between versions 5.5 and 5.7",,,,,
ms,2,Version 8 includes a transactional data dictionary for the database objects (you’ll query those in Tip 3) that used to be stored only in underlying files,,,,,
ms,2,,,,,,
ms,2,Query for wait time data,,,,,
ms,2,Start your MySQL performance tuning with this query on the main tables associated with wait time:,,,,,
ms,2,INSERT INTO wta_data SELECTt,,,,,
ms,2,"processlist_id AS conn_id, t",,,,,
ms,2,"processlist_user AS user, t",,,,,
ms,2,"processlist_host AS host, t",,,,,
ms,2,"processlist_db AS db, LOWER(t",,,,,
ms,2,"processlist_state) AS state, t",,,,,
ms,2,"processlist_info AS current_sql, MD5(t",,,,,
ms,2,"processlist_info) AS current_sql_md5, t",,,,,
ms,2,"processlist_command AS command, w",,,,,
ms,2,"event_id AS wait_event_id, w",,,,,
ms,2,"end_event_id AS wait_event_end_id, w",,,,,
ms,2,"event_name AS wait_event_name, w",,,,,
ms,2,"operation AS wait_operation, w",,,,,
ms,2,"object_schema AS wait_schema, w",,,,,
ms,2,"object_name AS wait_object_name, w",,,,,
ms,2,"object_type AS wait_type, w",,,,,
ms,2,"index_name AS wait_index, s",,,,,
ms,2,"sql_text AS statement_sql, MD5(s",,,,,
ms,2,"sql_text) AS statement_sql_md5, CASE WHEN RIGHT(s",,,,,
ms,2,"digest_text, 3)= '",,,,,
ms,2,,,,,,
ms,2,"THEN 1 ELSE 0 END AS statement_digest_truncated, s",,,,,
ms,2,"digest AS statement_digest, s",,,,,
ms,2,"event_id AS statement_event_id, s",,,,,
ms,2,"end_event_id AS statement_event_end_id, conn",,,,,
ms,2,attr_value AS program_nameFROM performance_schema,,,,,
ms,2,threads AS t LEFT JOINperformance_schema,,,,,
ms,2,events_waits_current AS w ON w,,,,,
ms,2,thread_id = t,,,,,
ms,2,thread_idAND w,,,,,
ms,2,end_event_id IS NULL AND w,,,,,
ms,2,event_name <> 'idle'LEFT JOIN performance_schema,,,,,
ms,2,events_statements_current AS s ON s,,,,,
ms,2,thread_id= t,,,,,
ms,2,thread_id AND s,,,,,
ms,2,"digest IS NOT NULLLEFT JOIN (SELECT processlist_id, GROUP_CONCAT(attr_value ORDER BYattr_name DESC SEPARATOR '~^~') attr_valueFROM performance_schema",,,,,
ms,2,"session_connect_attrs WHERE attr_name IN('program_name','_client_name') GROUP BY processlist_id ) connON t",,,,,
ms,2,processlist_id = conn,,,,,
ms,2,processlist_idWHERE t,,,,,
ms,2,instrumented = 'YES' AND t,,,,,
ms,2,processlist_id <> connection_id()AND (t,,,,,
ms,2,PROCESSLIST_COMMAND <> 'Sleep');Notice that the query excludes threads containing a Sleep command and those with a wait event of idle,,,,,
ms,2,,,,,,
ms,2,"To study wait time, run that query repeatedly at some interval — say, one minute — and save the results to a table (here, wta_data)",,,,,
ms,2,,,,,,
ms,2,Find the queries that are spending the most time in the database,,,,,
ms,2,"Now run a query that groups the data by sql_text, wait_operation and time_in_seconds for each wait event, then sums the total time the query spends",,,,,
ms,2,,,,,,
ms,2,select w,,,,,
ms,2,"sql_text, w",,,,,
ms,2,"wait_operation, w",,,,,
ms,2,"time_in_seconds, tot",,,,,
ms,2,"tot_time from(select substr(current_sql, 1, 60) sql_text,",,,,,
ms,2,"wait_operation, count(*) time_in_seconds",,,,,
ms,2,"from wta_data w group by substr(current_sql, 1, 60), wait_operation) w c(select substr(current_sql, 1,60) sql_text, count(*) tot_time",,,,,
ms,2,from wta_data,,,,,
ms,2,"group by substr(current_sql, 1,60)) totwhere w",,,,,
ms,2,wait_operation is not nulland w,,,,,
ms,2,sql_text = tot,,,,,
ms,2,sql_textorder by tot,,,,,
ms,2,"tot_time, time_in_seconds;",,,,,
ms,2,"Then, examine the query output (this is from a sample database for a rental company):",,,,,
ms,2,The middle two rows reveal that one SQL statement spent 21 seconds on a read and 56 times that long (1183 seconds) on a fetch,,,,,
ms,2,The bottom two rows show that another SQL statement spent 39 seconds on a read and 35 times that long (1370 seconds) on a fetch,,,,,
ms,2,That’s an awful lot of fetching for not much reading,,,,,
ms,2,"Clearly, there’s room for improvement",,,,,
ms,2,,,,,,
ms,2,Analyzing wait time reveals important baseline metrics you’ll need in MySQL performance tuning,,,,,
ms,2,"In this case, the focus is on the big difference between rows examined and rows sent",,,,,
ms,2,Average wait time itself is another useful metric,,,,,
ms,2,"Baseline metrics allow you to set a tuning target, when you can say, “That’s good enough",,,,,
ms,2,Then you move on to the next performance problem,,,,,
ms,2,,,,,,
ms,2,Tip 2: Review the execution plan,,,,,
ms,2,The execution plan reveals the cost of each operation,,,,,
ms,2,"That helps you find the most expensive steps, such as I/O (rows examined, rows sent), full table scans, index scans, filtering predicates and column data types",,,,,
ms,2,,,,,,
ms,2,MySQL gives you several options for generating an execution plan:,,,,,
ms,2,Run explain from a command prompt,,,,,
ms,2,,,,,,
ms,2,"Running EXPLAIN FORMAT=JSON generates a JSON-formatted explain plan with extended and partition information, plus detail on the operations including which part of the key was used",,,,,
ms,2,,,,,,
ms,2,"SET OPTIMIZER_TRACE=""ENABLED=ON""; puts the trace in memory to write information to the optimizer_trace table in information_schema",,,,,
ms,2,It captures the costs of all the operations that the optimizer considered for the current plan (version 5.6.3 and above),,,,,
ms,2,,,,,,
ms,2,"MySQL Workbench offers a graphical view of the plan, shown below",,,,,
ms,2,,,,,,
ms,2,"That execution plan shows table name, type of data access, references and the number of rows that the optimizer estimates it will examine when it runs — all useful in MySQL performance tuning",,,,,
ms,2,,,,,,
ms,2,"In general, the earlier in your query that you apply filtering predicates, the less data you discard later",,,,,
ms,2,The execution plan makes it easy to see how early or late your query is applying filters,,,,,
ms,2,"Does your query launch any temporary or filesort activities? If so, the execution plan shows you where they occur so you can try to reduce the amount of data you’re sending to them",,,,,
ms,2,,,,,,
ms,2,"Note the Cost Hint that MySQL Workbench displays (gray box above), advising you that the full table scan on student can be an expensive operation",,,,,
ms,2,,,,,,
ms,2,Tip 3: Gather object information,,,,,
ms,2,"Next, you’ll want to know as much as possible about the underlying tables in a query",,,,,
ms,2,"Useful information includes table size, whether it’s really a table or just a view, the cardinality of columns in where clauses, and the use of wildcards and scalar functions",,,,,
ms,2,,,,,,
ms,2,A quick way to gather that information is the mysqlshow --status command,,,,,
ms,2,,,,,,
ms,2,"To review indexes and constraints, run show indexes",,,,,
ms,2,,,,,,
ms,2,"That shows you which columns are in the index, especially the left leading column in a multi-column index",,,,,
ms,2,,,,,,
ms,2,"Can the query even use the index? If your query applies functions on an indexed column, the optimizer won’t use the index at all, and you may need to rewrite the query",,,,,
ms,2,,,,,,
ms,2,"Review the existing keys, constraints and relationships",,,,,
ms,2,"For queries that join many tables, create an Entity Relationship Diagram (ERD) that shows you how the tables are related to one another",,,,,
ms,2,,,,,,
ms,2,Tip 4: Find the driving table,,,,,
ms,2,Your goal in MySQL performance tuning is to drive the query with the table that returns the least data,,,,,
ms,2,"In other words, you compare the number of rows in the final result set to the number of rows the query examined",,,,,
ms,2,,,,,,
ms,2,Using the driving table reduces the number of logical reads,,,,,
ms,2,"To find the driving table, you study Joins (Right, Left, Outer) and filtering predicates to figure out how to filter as early in the query as possible",,,,,
ms,2,,,,,,
ms,2,Below is a partial execution plan for a query in a university billing application,,,,,
ms,2,"The red operation shows a high number of rows read (more than 8,700) from the student table",,,,,
ms,2,"In fact, it’s every row in the table, which is inefficient",,,,,
ms,2,,,,,,
ms,2,Here is a sample query for all students taking a class called “MySQL Performance Tuning”:,,,,,
ms,2,SELECT s,,,,,
ms,2,"fname, s",,,,,
ms,2,"lname, r",,,,,
ms,2,signup_dateFROM student sINNER JOIN registration rON s,,,,,
ms,2,student_id = r,,,,,
ms,2,student_idINNER JOIN class cON r,,,,,
ms,2,class_id = c,,,,,
ms,2,class_idWHERE c,,,,,
ms,2,name,,,,,
ms,2,= 'MYSQL PERFORMANCE TUNING'AND r,,,,,
ms,2,"signup_date BETWEENDATE_SUB(@BillDate, INTERVAL 1 DAY) and @BillDateAND r",,,,,
ms,2,cancelled = 'N';,,,,,
ms,2,"Using SQL diagramming, you determine that class is the driving table",,,,,
ms,2,You run the following SQL to add and view two foreign keys:,,,,,
ms,2,"ALTER TABLE registration ADD FOREIGN KEY (student_id) REFERENCES student(student_id);ALTER TABLE registration ADD FOREIGN KEY (class_id) REFERENCES class(class_id);SELECT table_name,column_name,constraint_name,referenced_table_name,referenced_column_nameFROM",,,,,
ms,2,information_schema,,,,,
ms,2,key_column_usageWHERE,,,,,
ms,2,table_schema = 'csu' AND table_name = 'registration'AND referenced_column_name IS NOT NULL;,,,,,
ms,2,"With the addition of those foreign key constraints, the optimizer chooses a better execution plan using class as the driving table",,,,,
ms,2,"Although it’s still running that full table scan, several important numbers are improved:",,,,,
ms,2,Before foreign keys,,,,,
ms,2,After foreign keys,,,,,
ms,2,Executions,,,,,
ms,2,28K,,,,,
ms,2,348K,,,,,
ms,2,Average Wait Time,,,,,
ms,2,114 ms,,,,,
ms,2,4 ms,,,,,
ms,2,Rows Examined/Sent,,,,,
ms,2,84K/2,,,,,
ms,2,1.4K/2,,,,,
ms,2,"To send the same number of rows, just 1/60th of the rows (1.4/84) now need to be examined",,,,,
ms,2,"Plus, the ratio of executions to average wait time is vastly improved",,,,,
ms,2,,,,,,
ms,2,"You may find room for even more improvement, for example, by reviewing your choice of indexes to reduce the number of rows examined",,,,,
ms,2,"In MySQL you can create a covering index, which includes all the columns in the query",,,,,
ms,2,That prevents extra I/O because the index can satisfy the query,,,,,
ms,2,"Or you can create a partial index, say, on a table containing a large varchar column, where the index would be too large to traverse",,,,,
ms,2,"MySQL supports indexes on a virtual column, which works similarly to a function index in Oracle, except that the data is stored only in the index",,,,,
ms,2,,,,,,
ms,2,"Note, though, that adding indexes doesn’t always improve performance",,,,,
ms,2,"Fortunately, MySQL Workbench makes it easy to capture metrics before and after you experiment so you can see whether and how you’ve improved things",,,,,
ms,2,,,,,,
ms,2,Tip 5: Identify performance inhibitors,,,,,
ms,2,"Finally, most of the low-hanging fruit of MySQL performance tuning lies in small programming mistakes that have a big impact:",,,,,
ms,2,Cursor or row-by-row processing,,,,,
ms,2,Parallel query processing — Sometimes it’s better to split a complex report into multiple queries and run them in parallel,,,,,
ms,2,,,,,,
ms,2,Hard-coded hints allow you to execute the query with the plan that you want to test,,,,,
ms,2,But hints can become stale or forgotten over time,,,,,
ms,2,,,,,,
ms,2,"Wild cards like * may seem handy, but they just generate I/O, add to CPU workload and thrash memory",,,,,
ms,2,"Beware of SELECT * (often used by SQL generators such as EMF, LINQ and NHibernate) and the missing where clause",,,,,
ms,2,,,,,,
ms,2,Implicit data conversions are a mismatch of datatypes between the column and a parameter,,,,,
ms,2,They impact CPU consumption and can turn off index usage,,,,,
ms,2,,,,,,
ms,2,Performance is often hampered by mistakes that database developers introduce when they’re rushing to beat a release deadline and feeling pressure to get new features working,,,,,
ms,2,"Usually, the mistakes are easy to fix, but it does take time and effort to find them",,,,,
ms,2,,,,,,
ms,2,Start tuning the performance of your MySQL databases,,,,,
ms,2,"While the details vary from one database vendor to another, the five main steps of MySQL performance tuning apply:",,,,,
ms,2,Monitor wait time,,,,,
ms,2,Review the execution plan,,,,,
ms,2,Gather object information,,,,,
ms,2,Find the driving table,,,,,
ms,2,Identify performance inhibitors,,,,,
ms,2,"As a MySQL database professional or developer, you’ll find that the methodical approach described here will help you get the most out of this open source database",,,,,
ms,2,,,,,,
ms,2,"The Fundamental Guide to SQL Server Query OptimizationWant more background on wait times, execution plans, object information, driving tables and performance inhibitors? Now that you’ve seen how to apply MySQL performance tuning, take a deeper dive into SQL query optimization in general",,,,,
ms,2,,,,,,
ms,2,Learn more about how optimizers use the execution plan,,,,,
ms,2,Walk through SQL diagramming,,,,,
ms,2,See how a covering index can affect I/O,,,,,
ms,2,Follow all 5 tips through a couple of real-world case studies,,,,,
ms,2,,,,,,
ms,2,Download the e-Book,,,,,
ms,2,sales2,,,,,
ms,2,3 months ago,,,,,
ms,2,Above Information is good,,,,,
ms,2,Interested one can also visit INDIA Access web for relevant services,,,,,
ms,2,,,,,,
ms,2,Cancel,,,,,
ms,2,Up,,,,,
ms,2,0,,,,,
ms,2,Down,,,,,
ms,2,Reply,,,,,
ms,2,More,,,,,
ms,2,Cancel,,,,,
ms,2,Mark,,,,,
ms,2,Kurtz,,,,,
ms,2,4 months ago,,,,,
ms,2,very nice,,,,,
ms,2,Thanks for writing this,,,,,
ms,2,,,,,,
ms,2,Cancel,,,,,
ms,2,Up,,,,,
ms,2,0,,,,,
ms,2,Down,,,,,
ms,2,Reply,,,,,
ms,2,More,,,,,
ms,2,Cancel,,,,,
ms,2,Phil,,,,,
ms,2,Rodas,,,,,
ms,2,4 months ago,,,,,
ms,2,As always,,,,,
ms,2,Great job Janice!,,,,,
ms,2,Cancel,,,,,
ms,2,Up,,,,,
ms,2,0,,,,,
ms,2,Down,,,,,
ms,2,Reply,,,,,
ms,2,More,,,,,
ms,2,Cancel,,,,,
ms,2,Related Content,,,,,
ms,2,Company,,,,,
ms,2,About Us,,,,,
ms,2,Buy,,,,,
ms,2,Contact Us,,,,,
ms,2,Careers,,,,,
ms,2,News,,,,,
ms,2,Resources,,,,,
ms,2,Blogs,,,,,
ms,2,Customer Stories,,,,,
ms,2,Documents,,,,,
ms,2,Events,,,,,
ms,2,Videos,,,,,
ms,2,Support,,,,,
ms,2,Professional Services,,,,,
ms,2,Renew Support,,,,,
ms,2,Technical Support,,,,,
ms,2,Training & Certification,,,,,
ms,2,Support Services,,,,,
ms,2,Social Networks,,,,,
ms,2,Facebook,,,,,
ms,2,Instagram,,,,,
ms,2,LinkedIn,,,,,
ms,2,Twitter,,,,,
ms,2,YouTube,,,,,
ms,2,© 2020 Quest Software Inc,,,,,
ms,2,ALL RIGHTS RESERVED,,,,,
ms,2,,,,,,
ms,2,Legal,,,,,
ms,2,Terms of Use,,,,,
ms,2,Privacy,,,,,
ms,2,Community Feedback & Support,,,,,
ms,2,会社名,,,,,
ms,2,会社情報,,,,,
ms,2,購入,,,,,
ms,2,お問い合わせ,,,,,
ms,2,採用情報,,,,,
ms,2,ニュース,,,,,
ms,2,リソース,,,,,
ms,2,ブログ,,,,,
ms,2,お客様の事例,,,,,
ms,2,ドキュメント,,,,,
ms,2,イベント,,,,,
ms,2,ビデオ,,,,,
ms,2,サポート,,,,,
ms,2,プロフェッショナルサービス,,,,,
ms,2,サポートの更新,,,,,
ms,2,テクニカルサポート,,,,,
ms,2,トレーニングと認定資格,,,,,
ms,2,サポートサービス,,,,,
ms,2,ソーシャルネットワーク,,,,,
ms,2,Facebook,,,,,
ms,2,Instagram,,,,,
ms,2,LinkedIn,,,,,
ms,2,Twitter,,,,,
ms,2,YouTube,,,,,
ms,2,© 2020 Quest Software Inc,,,,,
ms,2,ALL RIGHTS RESERVED,,,,,
ms,2,,,,,,
ms,2,「法務」,,,,,
ms,2,ご利用規約,,,,,
ms,2,個人情報保護方針,,,,,
ms,2,コミュニティのフィードバックとサポート,,,,,
ms,3,MySQL Performance Tuning Tips To Optimize Database,,,,,
ms,3,"Chat with us,",,,,,
ms,3,powered by LiveChat,,,,,
ms,3,This website uses cookies,,,,,
ms,3,"Our website, platform and/or any sub domains use cookies to understand how you use our services, and to improve both your experience and our marketing relevance",,,,,
ms,3,,,,,,
ms,3,Continue,,,,,
ms,3,Change settings,,,,,
ms,3,Find,,,,,
ms,3,out more,,,,,
ms,3,Features,,,,,
ms,3,Pricing,,,,,
ms,3,Partners,,,,,
ms,3,Support,,,,,
ms,3,Login,,,,,
ms,3,Start Free,,,,,
ms,3,Categories,,,,,
ms,3,Updates,,,,,
ms,3,Apps,,,,,
ms,3,WordPress,,,,,
ms,3,Plugins,,,,,
ms,3,Themes,,,,,
ms,3,WooCommerce,,,,,
ms,3,Plugins,,,,,
ms,3,Themes,,,,,
ms,3,Magento,,,,,
ms,3,Magento 1,,,,,
ms,3,Magento 2,,,,,
ms,3,Drupal,,,,,
ms,3,Drupal 7,,,,,
ms,3,Drupal 8,,,,,
ms,3,PHP,,,,,
ms,3,Database,,,,,
ms,3,Git,,,,,
ms,3,Symfony,,,,,
ms,3,Yii,,,,,
ms,3,CodeIgniter,,,,,
ms,3,Laravel,,,,,
ms,3,All Topics,,,,,
ms,3,PrestaShop,,,,,
ms,3,All Topics,,,,,
ms,3,Opencart,,,,,
ms,3,All Topics,,,,,
ms,3,Joomla,,,,,
ms,3,All Topics,,,,,
ms,3,Moodle,,,,,
ms,3,All Topics,,,,,
ms,3,Ecommerce,,,,,
ms,3,All Topics,,,,,
ms,3,Dropshipping,,,,,
ms,3,Ecommerce Marketing,,,,,
ms,3,Ecommerce Tutorials,,,,,
ms,3,Success Stories,,,,,
ms,3,Agencies,,,,,
ms,3,Startups,,,,,
ms,3,All Topics,,,,,
ms,3,Startup Tips & Hacks,,,,,
ms,3,Startup Marketing & Growth,,,,,
ms,3,Startup in Spotlight,,,,,
ms,3,Affiliate,,,,,
ms,3,IaaS,,,,,
ms,3,Interviews,,,,,
ms,3,All Topics,,,,,
ms,3,WordPress Interviews,,,,,
ms,3,Magento Interviews,,,,,
ms,3,PHP Interviews,,,,,
ms,3,Marketers Interviews,,,,,
ms,3,Drupal Interviews,,,,,
ms,3,Startup & Entrepreneur Interviews,,,,,
ms,3,Others,,,,,
ms,3,Digital Marketing,,,,,
ms,3,SEO,,,,,
ms,3,Social Media,,,,,
ms,3,Resources,,,,,
ms,3,Ebooks,,,,,
ms,3,Case Studies,,,,,
ms,3,API,,,,,
ms,3,All Topics,,,,,
ms,3,Design and Dev,,,,,
ms,3,All Topics,,,,,
ms,3,Miscellaneous,,,,,
ms,3,Events and Meetups,,,,,
ms,3,Select Category,,,,,
ms,3,Database,,,,,
ms,3,PHP,,,,,
ms,3,Exclusive MySQL Performance Tuning Tips For Better Database Optimization,,,,,
ms,3,Shahroze Nawaz,,,,,
ms,3,"March 19, 2019",,,,,
ms,3,7 Min Read,,,,,
ms,3,"Structured Query Language (SQL) is a special-purpose programming language used to store, manipulate, and retrieve data from the database",,,,,
ms,3,"It has found applications in many relational database systems including MySQL, Postgres, Oracle, SQL Server, and others",,,,,
ms,3,,,,,,
ms,3,"By using SQL statements, developers easily carry out various functional database operations such as creating, updating, and deleting data",,,,,
ms,3,,,,,,
ms,3,"As data volumes grow, and technology becomes increasingly complex, it is becoming more important to optimize MySQL databases properly to deliver end-user experience and to lower infrastructure costs",,,,,
ms,3,"MySQL performance tuning tools can help database professionals quickly identify bottlenecks, target insufficient operations through a review of query execution plans, and eliminate any guessing games",,,,,
ms,3,,,,,,
ms,3,Table of Content,,,,,
ms,3,The Benefits of MySQL Performance Tuning,,,,,
ms,3,Optimize Queries With MySQL Query Optimization Guidelines,,,,,
ms,3,Avoid using functions in predicates,,,,,
ms,3,Avoid using a wildcard (%) at the beginning of a predicate,,,,,
ms,3,Avoid unnecessary columns in SELECT clause,,,,,
ms,3,"Use inner join, instead of outer join if possible",,,,,
ms,3,Use DISTINCT and UNION only if it is necessary,,,,,
ms,3,The ORDER BY clause is mandatory in SQL if you expect to get a sorted result,,,,,
ms,3,Don’t Use MySQL as a Queue,,,,,
ms,3,Understand the Four Fundamental Resources,,,,,
ms,3,Pagination Queries,,,,,
ms,3,Optimizing MySQL Subqueries,,,,,
ms,3,MySQL Query Cache,,,,,
ms,3,Use Memcached for MySQL Caching,,,,,
ms,3,Wrapping up!,,,,,
ms,3,"With the added complexity of growing data volumes and ever-changing workloads, database performance tuning and MySQL query optimization are now necessary to maximize resource utilization and system performance",,,,,
ms,3,,,,,,
ms,3,There are several reasons which make SQL tuning a bit complex for developers,,,,,
ms,3,"Firstly, it requires extensive technical expertise to write and understand different execution plans",,,,,
ms,3,While writing clean and complete SQL statements is the responsibility of the one who garners thorough knowledge of it,,,,,
ms,3,,,,,,
ms,3,"Besides its complexity, tuning is very time-consuming",,,,,
ms,3,"Because when you have a large number of SQL statements to sort through, it brings a bit of uncertainty to find out which statements must you tune up and which one should you leave",,,,,
ms,3,"And while every statement is different, their tuning approach also varies according to their respective functionalities",,,,,
ms,3,,,,,,
ms,3,"In this tutorial, I will discuss how to improve MySQL performance using some handy performance tuning tips",,,,,
ms,3,"So, let’s see them in detail below:",,,,,
ms,3,The Benefits of MySQL Performance Tuning,,,,,
ms,3,The major advantage of identifying the performance driving factor for database allows you to avoid over-provisioning and reducing cost by right-sizing your servers,,,,,
ms,3,"It also gives you insights into whether moving data storage or adding server capacity will bring improvement in performance or not, and if so, then how much will it be",,,,,
ms,3,,,,,,
ms,3,The tuning database for MySQL query performance optimization doesn’t come with pale challenges,,,,,
ms,3,"However, once tuned properly, the database gives worthwhile performance results with great functionalities",,,,,
ms,3,It not only lowers unwanted task load but also optimizes the MySQL database for faster data retrieval,,,,,
ms,3,,,,,,
ms,3,You Might Also Like: PHP Performance Tips to Optimize Your Websites,,,,,
ms,3,Optimize Queries With MySQL Query Optimization Guidelines,,,,,
ms,3,Follow these best practices for your MySQL performance tuning and optimizing database speed,,,,,
ms,3,,,,,,
ms,3,"First of all, ensure indexing of all the predicates in WHERE, JOIN, ORDER BY, and GROUP BY clauses",,,,,
ms,3,WebSphere Commerce strongly emphasizes on indexing of predicates to augment SQL performance,,,,,
ms,3,"Because improper indexing of SQL queries can cause table scans, which eventually lead up to locking problems and other issues",,,,,
ms,3,,,,,,
ms,3,"Therefore, I highly recommend indexing all predicate columns so that database can experience MySQL query optimization",,,,,
ms,3,,,,,,
ms,3,You Might Also Like: Laravel Performance Optimization Guide,,,,,
ms,3,Avoid using functions in predicates,,,,,
ms,3,The database doesn’t use an index if it has some function predefined in the column,,,,,
ms,3,,,,,,
ms,3,For example:,,,,,
ms,3,SELECT * FROM TABLE1 WHERE UPPER(COL1)='ABC'CopySELECT * FROM TABLE1 WHERE UPPER(COL1)='ABC'CopySELECT * FROM TABLE1 WHERE UPPER(COL1)='ABC'Copy,,,,,
ms,3,"Because of the UPPER() function, the database doesn’t utilize the index on COL1",,,,,
ms,3,"If there isn’t any way to avoid that function in SQL, you will have to create a new function-based index or have to generate custom columns in the database to improve performance",,,,,
ms,3,,,,,,
ms,3,Avoid using a wildcard (%) at the beginning of a predicate,,,,,
ms,3,The predicate LIKE '%abc' causes a full table scan,,,,,
ms,3,For example:,,,,,
ms,3,SELECT * FROM TABLE1 WHERE COL1 LIKE '%ABC'CopySELECT * FROM TABLE1 WHERE COL1 LIKE '%ABC'CopySELECT * FROM TABLE1 WHERE COL1 LIKE '%ABC'Copy,,,,,
ms,3,"In most cases, this wildcard usage brings major performance limitations",,,,,
ms,3,,,,,,
ms,3,Avoid unnecessary columns in SELECT clause,,,,,
ms,3,"Instead of using ‘SELECT *’, always specify columns in the SELECT clause to improve MySQL performance",,,,,
ms,3,"Because unnecessary columns cause additional load on the database, slowing down its performance as well whole systematic process",,,,,
ms,3,,,,,,
ms,3,"Use inner join, instead of outer join if possible",,,,,
ms,3,Use outer join only when it is necessary,,,,,
ms,3,"Using it needlessly not only limits database performance but also limits MySQL query optimization options, resulting in slower execution of SQL statements",,,,,
ms,3,,,,,,
ms,3,Use DISTINCT and UNION only if it is necessary,,,,,
ms,3,Using UNION and DISTINCT operators without any major purpose causes unwanted sorting and slowing down of SQL execution,,,,,
ms,3,"Instead of UNION, using UNION ALL brings more efficiency in the process and improves MySQL performance more precisely",,,,,
ms,3,,,,,,
ms,3,The ORDER BY clause is mandatory in SQL if you expect to get a sorted result,,,,,
ms,3,The ORDER BY keyword sorts the result-set in predefined statement columns,,,,,
ms,3,"Though the statement brings advantage for the database admins for getting the sorted data, it also produces a bit performance impact in the SQL execution",,,,,
ms,3,"Because the query first needs to sort the data for producing the final result-set, causing a bit complex operation in the SQL execution",,,,,
ms,3,,,,,,
ms,3,You Might Also Like: How to Join Two Tables in MySQL,,,,,
ms,3,Don’t Use MySQL as a Queue,,,,,
ms,3,Queues can affect your database performance right from the core and could enter in your app databases without your knowledge,,,,,
ms,3,"For instance, if you are setting up a status for a particular item so that a ‘relevant process’ can access it, you are unintentionally creating a queue",,,,,
ms,3,What it does is that it builds up extra load time to access the resource without any major reason,,,,,
ms,3,,,,,,
ms,3,Cloudways Provides Pre-installed Redis & Memcache,,,,,
ms,3,"At Cloudways you can avail the Utilities like Memcache, Supervisord, and Redis to optimize your database",,,,,
ms,3,,,,,,
ms,3,Check Now,,,,,
ms,3,Queues cause problems for two major reasons,,,,,
ms,3,"They serialize your workload, preventing completion of tasks in parallel, and they often result in a table that contains work in process as well as historical data from already completed jobs",,,,,
ms,3,It not only adds latency to the application but also adds hindrance to the MySQL performance tuning,,,,,
ms,3,,,,,,
ms,3,You Might Also Like: How to Use Redis for Queuing,,,,,
ms,3,Understand the Four Fundamental Resources,,,,,
ms,3,You need four fundamental resources to make database functions,,,,,
ms,3,"CPU, disk, memory, and network",,,,,
ms,3,"If anyone of these doesn’t function correctly, it ultimately affects the database server and results in poor performance",,,,,
ms,3,,,,,,
ms,3,"To understand the fundamental resources properly, you need to focus on two particular areas i",,,,,
ms,3,e choosing the right hardware and troubleshooting problems with it,,,,,
ms,3,,,,,,
ms,3,Always ensure to use all-round performance components when choosing hardware for the MySQL database,,,,,
ms,3,Not only opt for the best among the stack but also make sure that there should be the right balance between them,,,,,
ms,3,"We have often seen that organizations tend to select servers with fast CPUs and large disks, but they get mistaken with starved memory which eventually kills performance",,,,,
ms,3,,,,,,
ms,3,"In some scenarios, adding memory becomes highly substantial for improving performance when it comes to the magnitude",,,,,
ms,3,"It does look a bit counterintuitive, but in most cases, the overutilization of disks affects directly to the database performance",,,,,
ms,3,As the deficiency of enough memory to hold the server’s data proves costly in derailing database performance,,,,,
ms,3,,,,,,
ms,3,"When it comes to troubleshooting, always keep in check the performance of all four fundamental resources",,,,,
ms,3,Validate qualitatively that they are performing as per the needs improvement in the norms,,,,,
ms,3,Taking this audit into regular consideration will quickly solve major occurring problems,,,,,
ms,3,,,,,,
ms,3,Pagination Queries,,,,,
ms,3,Applications that paginate tend to bring the server down,,,,,
ms,3,"In showing you a page of results, with a link to go to the next page, these applications typically group and sort in ways that can’t use indexes, and they employ a LIMIT and offset function that causes the server to do a lot of work generating, then discarding rows",,,,,
ms,3,,,,,,
ms,3,You can find optimizations within the user interface itself,,,,,
ms,3,"Instead of showing the exact number of pages in the results and links to an individual page, you can just show a link to the next page",,,,,
ms,3,You can also prevent people from going to irrelevant pages,,,,,
ms,3,,,,,,
ms,3,"On the query side, instead of using LIMIT with offset, you can select one more row than you need, and when the user clicks the “next page” link, you can designate that final row as the starting point for the next set of results",,,,,
ms,3,"For example, if the user has viewed a page with rows 101 through 120, you will have to select row 121 as well; to render the next page, you’d query the server for rows greater than or equal to 121, limit 21",,,,,
ms,3,,,,,,
ms,3,Optimizing MySQL Subqueries,,,,,
ms,3,"The most important advice I can give you about subqueries is that you must prefer a join where possible, at least in current versions of MySQL",,,,,
ms,3,,,,,,
ms,3,"Subqueries are the subject of intense work by the optimizer team, and upcoming versions of MySQL may have more subquery optimizations",,,,,
ms,3,"Do keep a check on which of the optimizations will end up in released code, and how much difference they’ll make",,,,,
ms,3,My point here is that “prefer a join” is not future-proof advice,,,,,
ms,3,"The server is getting smarter all the time, and the cases where you have to tell it how to do something instead of what results to return are becoming fewer",,,,,
ms,3,,,,,,
ms,3,Mysql Query Cache,,,,,
ms,3,One of the most important aspects of measuring performance is caching the content,,,,,
ms,3,MySQL provides database query caching which caches the SELECT statement text and the retrieved result,,,,,
ms,3,"Hence, whenever you make a duplicate database, you call MySQL query cache, it will respond to you and show the result from the cache, and no call will be parsed repeatedly",,,,,
ms,3,"In this way, you can maximize the MySQL cache optimization process",,,,,
ms,3,,,,,,
ms,3,"To set up MySQL query cache, you must add a few settings to MySQL",,,,,
ms,3,"First of all, you must check if query cache is available or not with the following command:",,,,,
ms,3,mysql> SHOW VARIABLES LIKE 'have_query_cache';mysql> SHOW VARIABLES LIKE 'have_query_cache';mysql> SHOW VARIABLES LIKE 'have_query_cache';,,,,,
ms,3,"This will show the result, YES",,,,,
ms,3,This means MySQL cache is working fine,,,,,
ms,3,,,,,,
ms,3,+------------------+-------+,,,,,
ms,3,| Variable_name    | Value |,,,,,
ms,3,+------------------+-------+,,,,,
ms,3,| have_query_cache | YES   |,,,,,
ms,3,+------------------+-------++------------------+-------+| Variable_name,,,,,
ms,3,| Value |+------------------+-------+| have_query_cache | YES,,,,,
ms,3,|+------------------+-------++------------------+-------+,,,,,
ms,3,| Variable_name,,,,,
ms,3,| Value |,,,,,
ms,3,+------------------+-------+,,,,,
ms,3,| have_query_cache | YES,,,,,
ms,3,|,,,,,
ms,3,+------------------+-------+,,,,,
ms,3,"Now, you can set up the MySQL query cache size and type",,,,,
ms,3,Remember the minimum default size is 40KB,,,,,
ms,3,The maximum size can be 32MB,,,,,
ms,3,You can set up the MySQL query_cache_size by using the following command:,,,,,
ms,3,mysql> SET GLOBAL query_cache_size = 40000;mysql> SET GLOBAL query_cache_size = 40000;mysql> SET GLOBAL query_cache_size = 40000;,,,,,
ms,3,Query cache type can determine the behavior of all connections,,,,,
ms,3,You can also disable the Query cache for queries like:,,,,,
ms,3,mysql> SET SESSION query_cache_type = OFF;mysql> SET SESSION query_cache_type = OFF;mysql> SET SESSION query_cache_type = OFF;,,,,,
ms,3,"You can also set values like 0,1 and 2 for setting up the connection status",,,,,
ms,3,,,,,,
ms,3,Use Memcached for MySQL Caching,,,,,
ms,3,Memcached is a distributed memory caching system,,,,,
ms,3,"It speeds up websites having large dynamic databases by storing database object in Dynamic Memory to reduce the pressure on a server, whenever an external data source requests a read",,,,,
ms,3,A Memcached layer reduces the number of times the database makes a request,,,,,
ms,3,,,,,,
ms,3,"Memcached stores the values (v) with the key (k), and retrieves the values (v) with the key (k) without even parsing the database queries and stays away from all these hassles",,,,,
ms,3,,,,,,
ms,3,"To read more about Memcached, you can read the guide on how to set up Memcache in php",,,,,
ms,3,,,,,,
ms,3,Wrapping up!,,,,,
ms,3,"This article provides in detail, the account of the best practices for database optimization and handy MySQL performance tuning tips every developer must know",,,,,
ms,3,"It’s a complete guide for those backend devs, who are uncertain about their poor database performance and need some handy techniques to optimize MySQL database from the core",,,,,
ms,3,,,,,,
ms,3,"If you want to add your thoughts on the topic or want to ask some questions regarding it, feel free to write your comments in the comments section",,,,,
ms,3,,,,,,
ms,3,Share your opinion in the comment section,,,,,
ms,3,,,,,,
ms,3,COMMENT NOW,,,,,
ms,3,Share This Article,,,,,
ms,3,Launch PHP websites without the worry of Server Management,,,,,
ms,3,,,,,,
ms,3,"Pre-Installed Optimized Stack with Git, Composer & SSH",,,,,
ms,3,Deploy PHP Apps Now,,,,,
ms,3,Shahroze Nawaz,,,,,
ms,3,Shahroze is a PHP Community Manager at Cloudways - A Managed PHP Hosting Platform,,,,,
ms,3,"Besides his work life, he loves movies and travelling",,,,,
ms,3,You can email him at shahroze,,,,,
ms,3,nawaz@cloudways,,,,,
ms,3,com,,,,,
ms,3,Get Connected on:,,,,,
ms,3,Twitter,,,,,
ms,3,Community Forum,,,,,
ms,3,×,,,,,
ms,3,Get Our Newsletter Be the first to get the latest updates and tutorials,,,,,
ms,3,,,,,,
ms,3,Subscribe,,,,,
ms,3,I agree to the Cloudways Terms of Service & Privacy Policy,,,,,
ms,3,Thankyou for Subscribing Us!,,,,,
ms,3,Do you like what you read?,,,,,
ms,3,Get the Latest Updates,,,,,
ms,3,I agree to the Cloudways Terms of Service & Privacy Policy,,,,,
ms,3,Share Your Feedback,,,,,
ms,3,Please insert Content,,,,,
ms,3,Thank you for your feedback!,,,,,
ms,3,Get Our Newsletter Be the first to get the latest updates and tutorials,,,,,
ms,3,,,,,,
ms,3,Subscribe,,,,,
ms,3,I agree to the Cloudways Terms of Service & Privacy Policy,,,,,
ms,3,Do you like what you read?,,,,,
ms,3,Get the Latest Updates,,,,,
ms,3,I agree to the Cloudways Terms of Service & Privacy Policy,,,,,
ms,3,Share Your Feedback,,,,,
ms,3,Please insert Content,,,,,
ms,3,Thank you for your feedback!,,,,,
ms,3,THERE’S MORE TO READ,,,,,
ms,3,,,,,,
ms,3,PHP,,,,,
ms,3,5 Min Read,,,,,
ms,3,How To Add Facebook Login to PHP Website,,,,,
ms,3,Shahroze Nawaz,,,,,
ms,3,Published on 7th December,,,,,
ms,3,PHP,,,,,
ms,3,5 Min Read,,,,,
ms,3,8 Powerful Continuous Deployment Tools to Consider in 2021,,,,,
ms,3,Salman Siddique,,,,,
ms,3,Published on 1st December,,,,,
ms,3,PHP,,,,,
ms,3,4 Min Read,,,,,
ms,3,Integrate Contentful with Your Web Application Using Cloudways,,,,,
ms,3,Salman Siddique,,,,,
ms,3,Published on 23rd November,,,,,
ms,3,PRODUCT & SOLUTION,,,,,
ms,3,WordPress Hosting,,,,,
ms,3,Magento Hosting,,,,,
ms,3,PHP Cloud Hosting,,,,,
ms,3,Laravel Hosting,,,,,
ms,3,Drupal Hosting,,,,,
ms,3,Joomla Hosting,,,,,
ms,3,PrestaShop Hosting,,,,,
ms,3,WooCommerce Hosting,,,,,
ms,3,Cloudways Platform,,,,,
ms,3,Cloudways API,,,,,
ms,3,Breeze – Free WordPress Cache,,,,,
ms,3,Add-ons,,,,,
ms,3,CloudwaysCDN,,,,,
ms,3,CloudwaysBot,,,,,
ms,3,COMPANY,,,,,
ms,3,About us,,,,,
ms,3,Reviews,,,,,
ms,3,Media Kit,,,,,
ms,3,Testimonials,,,,,
ms,3,Sitemap,,,,,
ms,3,Terms,,,,,
ms,3,SUPPORT,,,,,
ms,3,Knowledge base,,,,,
ms,3,Contact us,,,,,
ms,3,Blog,,,,,
ms,3,Resource Center,,,,,
ms,3,Community,,,,,
ms,3,Feedback,,,,,
ms,3,Free Website Migration,,,,,
ms,3,QUICK LINKS,,,,,
ms,3,Features,,,,,
ms,3,Pricing,,,,,
ms,3,Partners,,,,,
ms,3,Mavericks Program,,,,,
ms,3,Cloud Affiliate Program,,,,,
ms,3,Write For Us,,,,,
ms,3,Promo Code,,,,,
ms,3,Follow Us On,,,,,
ms,3,"52 Springvale, Pope Pius XII Street Mosta MST2653, Malta",,,,,
ms,3,© 2020 Cloudways Ltd,,,,,
ms,3,All rights reserved,,,,,
ms,3,×,,,,,
ms,3,×,,,,,
ms,3,Choose the best Managed Cloud Hosting experience for your business!,,,,,
ms,3,Join over 1 million designers who get our content first Join over 1 million,,,,,
ms,3,designers who get our content first,,,,,
ms,3,,,,,,
ms,3,Subscribe,,,,,
ms,3,×,,,,,
ms,3,×,,,,,
ms,3,0,,,,,
ms,3,Days,,,,,
ms,3,8,,,,,
ms,3,Hours,,,,,
ms,3,25,,,,,
ms,3,Mins,,,,,
ms,3,20,,,,,
ms,3,Secs,,,,,
ms,3,×,,,,,
ms,4,MySQL Performance Tuning: 11 Optimization Tips | PhoenixNAP KB,,,,,
ms,4,Support,,,,,
ms,4,Sales,,,,,
ms,4,Login,,,,,
ms,4,Bare Metal Cloud,,,,,
ms,4,Channel Partners,,,,,
ms,4,Billing Portal,,,,,
ms,4,Partners,,,,,
ms,4,phoenixNAP Home,,,,,
ms,4,Contact Support,,,,,
ms,4,Blog,,,,,
ms,4,Search,,,,,
ms,4,Support,,,,,
ms,4,Sales,,,,,
ms,4,Login,,,,,
ms,4,Bare Metal Cloud,,,,,
ms,4,Channel Partners,,,,,
ms,4,Billing Portal,,,,,
ms,4,Partners,,,,,
ms,4,How to Improve MySQL Performance With Tuning,,,,,
ms,4,"Posted January 15, 2020",,,,,
ms,4,How to Improve MySQL Performance With TuningHomeSysAdminHow to Improve MySQL Performance With Tuning,,,,,
ms,4,ContentsSystem Performance Tuning for MySQL1,,,,,
ms,4,Balance the Four Main Hardware Resources2,,,,,
ms,4,"Use InnoDB, Not MyISAM3",,,,,
ms,4,Use the Latest Version of MySQLSoftware Performance Tuning4,,,,,
ms,4,Consider Using an Automatic Performance Improvement Tool5,,,,,
ms,4,Optimize Queries6,,,,,
ms,4,Use Indexes Where Appropriate7,,,,,
ms,4,Functions in Predicates8,,,,,
ms,4,Avoid % Wildcard in a Predicate9,,,,,
ms,4,Specify Columns in SELECT Function10,,,,,
ms,4,Use ORDER BY Appropriately11,,,,,
ms,4,"JOIN, UNION, DISTINCT12",,,,,
ms,4,Use the EXPLAIN Function13,,,,,
ms,4,MySQL Server Configuration,,,,,
ms,4,IntroductionMySQL is a popular open-source database application that stores and structures data in a way that is meaningful and readily accessible,,,,,
ms,4,,,,,,
ms,4,"With large applications, the sheer amount of data can lead to performance problems",,,,,
ms,4,This guide provides several tuning tips on how to improve the performance of a MySQL database,,,,,
ms,4,,,,,,
ms,4,Prerequisites,,,,,
ms,4,"A Linux system with MySQL installed and running, Centos or Ubuntu",,,,,
ms,4,An existing database,,,,,
ms,4,Administrator credentials for the operating system and the database,,,,,
ms,4,"System Performance Tuning for MySQLAt the system level, you’ll adjust hardware and software options to improve MySQL performance",,,,,
ms,4,,,,,,
ms,4,1,,,,,
ms,4,Balance the Four Main Hardware Resources,,,,,
ms,4,StorageTake a moment to evaluate your storage,,,,,
ms,4,"If you’re using traditional hard disk drives (HDD), you can upgrade to solid-state drives (SSD) for a performance improvement",,,,,
ms,4,,,,,,
ms,4,Use a tool like iotop or sar from the sysstat package to monitor your disk input/output rates,,,,,
ms,4,"If disk usage is much higher than usage of other resources, consider adding more storage or upgrading to faster storage",,,,,
ms,4,,,,,,
ms,4,ProcessorProcessors are usually considered the measure of how fast your system is,,,,,
ms,4,Use the Linux top command for a breakdown of how your resources are used,,,,,
ms,4,Pay attention to the MySQL processes and the percentage of processor usage they require,,,,,
ms,4,,,,,,
ms,4,"Processors are more expensive to upgrade, but if your CPU is a bottleneck, an upgrade might be necessary",,,,,
ms,4,,,,,,
ms,4,MemoryMemory represents the total amount of RAM in your MySQL server,,,,,
ms,4,You can adjust the memory cache (more on that later) to improve performance,,,,,
ms,4,"If you don’t have enough memory, or if the existing memory isn’t optimized, you can end up damaging your performance instead of improving it",,,,,
ms,4,,,,,,
ms,4,"Like other bottlenecks, if your server is constantly running out of memory, you can upgrade by adding more",,,,,
ms,4,"If you run short of memory, your server will cache data storage (like a hard drive) to act as memory",,,,,
ms,4,Database caching slows down your performance,,,,,
ms,4,,,,,,
ms,4,NetworkIt’s important to monitor network traffic to make sure you have sufficient infrastructure to manage the load,,,,,
ms,4,,,,,,
ms,4,"Overloading your network can lead to latency, dropped packets, and even server outages",,,,,
ms,4,Make sure you have enough network bandwidth to accommodate your normal levels of database traffic,,,,,
ms,4,,,,,,
ms,4,2,,,,,
ms,4,"Use InnoDB, Not MyISAMMyISAM is an older database style used for some MySQL databases",,,,,
ms,4,It is a less efficient database design,,,,,
ms,4,The newer InnoDB supports more advanced features and has in-built optimization mechanics,,,,,
ms,4,,,,,,
ms,4,"InnoDB uses a clustered index and keeps data in pages, which are stored in consecutive physical blocks",,,,,
ms,4,"If a value is too large for a page, InnoDB moves it to another location, then indexes the value",,,,,
ms,4,"This feature helps keep relevant data in the same place on the storage device, meaning it takes the physical hard drive less time to access the data",,,,,
ms,4,,,,,,
ms,4,3,,,,,
ms,4,Use the Latest Version of MySQLUsing the latest version is not always feasible for older and legacy databases,,,,,
ms,4,"But whenever possible, you should check the version of MySQL in use and upgrade to the latest",,,,,
ms,4,,,,,,
ms,4,A part of the ongoing development includes performance enhancements,,,,,
ms,4,Some common performance adjustments may be rendered obsolete by newer versions of MySQL,,,,,
ms,4,"In general, it’s always better to use native MySQL performance enhancement over scripting and configuration files",,,,,
ms,4,,,,,,
ms,4,"Software Performance TuningThese methods involve tweaking the MySQL configuration files, writing more efficient database queries, and structuring the database to retrieve data more efficiently",,,,,
ms,4,,,,,,
ms,4,"Note: When adjusting configuration settings, it's best to make small incremental adjustments",,,,,
ms,4,A major adjustment may overburden another value and degrade performance,,,,,
ms,4,"Also, it is recommended that you make one change at a time and then test",,,,,
ms,4,It’s easier to track errors or misconfigurations when you only change one variable at a time,,,,,
ms,4,,,,,,
ms,4,4,,,,,
ms,4,"Consider Using an Automatic Performance Improvement ToolAs with most software, not all tools work on all versions of MySQL",,,,,
ms,4,We will examine three utilities to evaluate your MySQL database and recommend changes to improve performance,,,,,
ms,4,,,,,,
ms,4,The first is tuning-primer,,,,,
ms,4,"This tool is a bit older, designed for MySQL 5.5 – 5.7",,,,,
ms,4,It can analyze your database and suggest settings to improve performance,,,,,
ms,4,"For example, it may suggest that you raise the query_cache_size parameter if it feels like your system can’t process queries quickly enough to keep the cache clear",,,,,
ms,4,,,,,,
ms,4,"The second tuning tool, useful for most modern MySQL databases, is MySQLTuner",,,,,
ms,4,This script (mysqltuner,,,,,
ms,4,pl) is written in Perl,,,,,
ms,4,"Like tuning-primer, it analyzes your database configuration looking for bottlenecks and inefficiencies",,,,,
ms,4,The output shows metrics and recommendations:,,,,,
ms,4,"At the top of the output, you can see the version of the MySQLTuner tool and your database",,,,,
ms,4,,,,,,
ms,4,The script works with MySQL 8,,,,,
ms,4,,,,,,
ms,4,"Log file recommendations are the first on the list, but if you scroll to the bottom, you can see general recommendations for improving MySQL performance",,,,,
ms,4,,,,,,
ms,4,"The third utility, which you may already have, is the phpMyAdmin Advisor",,,,,
ms,4,"Like the other two utilities, it evaluates your database and recommends adjustments",,,,,
ms,4,"If you’re already using phpMyAdmin, the Advisor is a helpful tool you can use within the GUI",,,,,
ms,4,,,,,,
ms,4,5,,,,,
ms,4,Optimize QueriesA query is a coded request to search the database for data that matches a certain value,,,,,
ms,4,"There are some query operators that, by their very nature, take a long time to run",,,,,
ms,4,"If your environment relies on automated queries, they may be impacting performance",,,,,
ms,4,Check and terminate MySQL processes that may pile up in time,,,,,
ms,4,,,,,,
ms,4,6,,,,,
ms,4,Use Indexes Where AppropriateMany database queries use a structure similar to this:,,,,,
ms,4,SELECT … WHERE,,,,,
ms,4,"These queries involve evaluating, filtering, and retrieving results",,,,,
ms,4,You can restructure these by adding a small set of indexes for the related tables,,,,,
ms,4,The query can be directed at the index to speed up the query,,,,,
ms,4,,,,,,
ms,4,7,,,,,
ms,4,Functions in PredicatesAvoid using a function in the predicate of a query,,,,,
ms,4,For example:,,,,,
ms,4,SELECT * FROM MYTABLE WHERE UPPER(COL1)='123'Copy,,,,,
ms,4,"The UPPER notation creates a function, which has to operate during the SELECT operation",,,,,
ms,4,"This doubles the work the query is doing, and you should avoid it if possible",,,,,
ms,4,,,,,,
ms,4,8,,,,,
ms,4,Avoid % Wildcard in a PredicateThe wildcard % stands for zero or more characters,,,,,
ms,4,If your query looks like this:,,,,,
ms,4,SELECT * FROM MYTABLE WHERE COL1 LIKE '%123'Copy,,,,,
ms,4,The expression ‘%123’ includes all values that end with 123,,,,,
ms,4,"The % sign stands for any type or number of characters preceding, including no characters",,,,,
ms,4,The query must now perform a full table scan to test for this condition,,,,,
ms,4,,,,,,
ms,4,9,,,,,
ms,4,Specify Columns in SELECT FunctionA common expression is to use SELECT * to scan all of the database columns,,,,,
ms,4,"If you specify the columns you need, your query won’t need to scan irrelevant columns",,,,,
ms,4,,,,,,
ms,4,10,,,,,
ms,4,Use ORDER BY AppropriatelyThe ORDER BY expression sorts results by the specified column,,,,,
ms,4,It can be used to sort by two columns at once,,,,,
ms,4,"These should be sorted in the same order, ascending or descending",,,,,
ms,4,"If you try to sort different columns in different order, it will slow down performance",,,,,
ms,4,You may combine this with an index to speed up the sorting,,,,,
ms,4,,,,,,
ms,4,11,,,,,
ms,4,"JOIN, UNION, DISTINCTTry to use an inner join whenever possible",,,,,
ms,4,An outer join looks at additional data outside the specified columns,,,,,
ms,4,"That’s fine if you need that data, but it’s a waste of performance to include data that won’t be required",,,,,
ms,4,,,,,,
ms,4,The UNION and DISTINCT commands are sometimes included in queries,,,,,
ms,4,"Like an outer join, it’s fine to use these expressions if they are necessary",,,,,
ms,4,"However, they add additional sorting and reading of the database",,,,,
ms,4,"If you don’t need them, it’s better to find a more efficient expression",,,,,
ms,4,,,,,,
ms,4,12,,,,,
ms,4,Use the EXPLAIN FunctionModern MySQL databases include an EXPLAIN function,,,,,
ms,4,,,,,,
ms,4,Appending the EXPLAIN expression to the beginning of a query will read and evaluate the query,,,,,
ms,4,"If there are inefficient expressions or confusing structures, EXPLAIN can help you find them",,,,,
ms,4,You can then adjust the phrasing of your query to avoid unintentional table scans or other performance hits,,,,,
ms,4,,,,,,
ms,4,13,,,,,
ms,4,MySQL Server ConfigurationThis configuration involves making changes to your /etc/mysql/my,,,,,
ms,4,cnf file,,,,,
ms,4,Proceed with caution and make minor changes at a time,,,,,
ms,4,,,,,,
ms,4,query_cache_size – Specifies the size of the cache of MySQL queries waiting to run,,,,,
ms,4,The recommendation is to start with small values around 10MB and then increase to no more than 100-200MB,1,4553,query_cache_size,P <= 200MB,
ms,4,"With too many cached queries, you can experience a cascade of queries “Waiting for cache lock",,,,,
ms,4,"If your queries keep backing up, a better procedure is to use EXPLAIN to evaluate each query and find ways to make them more efficient",,,,,
ms,4,,,,,,
ms,4,max_connection – Refers to the number of connections allowed into the database,,,,,
ms,4,"If you’re getting errors citing “Too many connections,” increasing this value may help",,,,,
ms,4,,,,,,
ms,4,innodb_buffer_pool_size – This setting allocates system memory as a data cache for your database,,,,,
ms,4,"If you have large chunks of data, increase this value",,,,,
ms,4,Take note of the RAM required to run other system resources,,,,,
ms,4,,,,,,
ms,4,innodb_io_capacity – This variable sets the rate for input/output from your storage device,,,,,
ms,4,This is directly related to the type and speed of your storage drive,,,,,
ms,4,A 5400-rpm HDD will have a much lower capacity than a high-end SSD or Intel Optane,,,,,
ms,4,You can adjust this value to better match your hardware,,,,,
ms,4,,,,,,
ms,4,ConclusionYou should now know how to improve MySQL performance and tune your database,,,,,
ms,4,,,,,,
ms,4,"Look for bottlenecks (hardware and software), queries that are doing more work than needed, and consider using automated tools and the EXPLAIN function to evaluate your database",,,,,
ms,4,,,,,,
ms,4,Next you should also read,,,,,
ms,4,"Databases,MySQLHow To Find Duplicate Values in MySQLMarch 4, 2020Learn how to find the duplicate entries in your MySQL databases",,,,,
ms,4,"The guide shows you how to use the GROUP BY,…Read More",,,,,
ms,4,"Databases,MySQLHow to Find and Terminate / Kill MySQL ProcessJanuary 23, 2020Killing a MySQL process can help you boost the performance of your server",,,,,
ms,4,"By running a few commands, you can…Read More",,,,,
ms,4,"SysAdmin,Databases,MySQLInstall and Get Started with MySQL Workbench on Ubuntu 18.04November 19, 2019Workbench is a visual tool for managing MySQL databases",,,,,
ms,4,Its graphical interface allows administrators and…Read More,,,,,
ms,4,"Databases,MySQLHow to List All Users in a MySQL DatabaseNovember 18, 2019This simple tutorial analyses the commands used to list all user accounts in MySQL",,,,,
ms,4,Learn about additional…Read More,,,,,
ms,4,"Databases,MySQLHow To Show a List of All Databases in MySQLJuly 23, 2019With Structured Query Language (SQL), you can easily access and manage content in all your databases",,,,,
ms,4,This…Read More,,,,,
ms,4,"Web Servers,Databases,MySQLHow to Connect to MySQL using PHPMay 6, 2019To access and add content to a MySQL database, you must first establish a connection between the database and…Read More",,,,,
ms,4,Author,,,,,
ms,4,"Goran JevticGoran combines his passions for research, writing and technology as a technical writer at phoenixNAP",,,,,
ms,4,"Working with multiple departments and on a variety of projects, he has developed extraordinary understanding of cloud and virtualization technology trends and best practices",,,,,
ms,4,,,,,,
ms,4,Recent Posts,,,,,
ms,4,How to Resolve the “cannot connect to the Docker daemon” Error,,,,,
ms,4,How to Configure Proxy Settings on Ubuntu 20.04,,,,,
ms,4,"How to Install Helm on Ubuntu, Mac and Windows",,,,,
ms,4,CategoriesSysAdmin,,,,,
ms,4,Virtualization,,,,,
ms,4,DevOps and Development,,,,,
ms,4,Security,,,,,
ms,4,Backup and Recovery,,,,,
ms,4,Bare Metal Servers,,,,,
ms,4,Web Servers,,,,,
ms,4,Networking,,,,,
ms,4,Databases,,,,,
ms,4,CompanyAbout Us,,,,,
ms,4,GitHub,,,,,
ms,4,Blog,,,,,
ms,4,RFP Template,,,,,
ms,4,Careers,,,,,
ms,4,ProductsColocation,,,,,
ms,4,Servers,,,,,
ms,4,Cloud Services,,,,,
ms,4,Solutions,,,,,
ms,4,Locations,,,,,
ms,4,ConnectEvents,,,,,
ms,4,Press,,,,,
ms,4,Contact Us,,,,,
ms,4,Live Chat,,,,,
ms,4,Get a Quote,,,,,
ms,4,Support | 1-855-330-1509,,,,,
ms,4,Sales | 1-877-588-5918,,,,,
ms,4,Privacy PolicyGDPRSitemap,,,,,
ms,4,© 2020 Copyright phoenixNAP | Global IT Services,,,,,
ms,4,All Rights Reserved,,,,,
ms,4,,,,,,
ms,4,Privacy Preference Center,,,,,
ms,4,Privacy Preferences,,,,,
ms,5,MySQL :: MySQL Performance Tuning and Optimization Resources,,,,,
ms,5,Contact MySQL,,,,,
ms,5,|,,,,,
ms,5,Login  |,,,,,
ms,5,Register,,,,,
ms,5,The world's most popular open source database,,,,,
ms,5,MySQL,,,,,
ms,5,com,,,,,
ms,5,Downloads,,,,,
ms,5,Documentation,,,,,
ms,5,Developer Zone,,,,,
ms,5,Developer Zone,,,,,
ms,5,Documentation,,,,,
ms,5,Downloads,,,,,
ms,5,MySQL,,,,,
ms,5,com,,,,,
ms,5,Products,,,,,
ms,5,Cloud,,,,,
ms,5,Services,,,,,
ms,5,Partners,,,,,
ms,5,Customers,,,,,
ms,5,Why MySQL?,,,,,
ms,5,News & Events,,,,,
ms,5,How to Buy,,,,,
ms,5,Downloads,,,,,
ms,5,Documentation,,,,,
ms,5,Developer Zone,,,,,
ms,5,Section Menu:,,,,,
ms,5,White Papers,,,,,
ms,5,Presentations,,,,,
ms,5,Case Studies,,,,,
ms,5,Books,,,,,
ms,5,Performance,,,,,
ms,5,Benchmarks,,,,,
ms,5,Migration,,,,,
ms,5,TCO Savings,,,,,
ms,5,Industries,,,,,
ms,5,MySQL Performance Tuning and Optimization Resources,,,,,
ms,5,White Papers,,,,,
ms,5,What's New in MySQL 8.0,,,,,
ms,5,MySQL Enterprise Edition Product Guide,,,,,
ms,5,A Guide for SaaS Vendors: Gaining Competitive Advantage with MySQL,,,,,
ms,5,Guide to Optimizing Performance of the MySQL Cluster Database,,,,,
ms,5,Presentations,,,,,
ms,5,How to Analyze and Tune MySQL Queries for Better Performance,,,,,
ms,5,Millions of Real Time IOPS,,,,,
ms,5,with MySQL Cluster,,,,,
ms,5,MySQL 8.0 Overview,,,,,
ms,5,MySQL Performance Tuning 101,,,,,
ms,5,MySQL Performance Schema & Sys Schema,,,,,
ms,5,More (2) »,,,,,
ms,5,MySQL Performance: Demystified Tuning & Best Practices,,,,,
ms,5,MySQL Enterprise Edition,,,,,
ms,5,Case Studies,,,,,
ms,5,RTTS’ QuerySurge Automates Data Testing with MySQL Embedded as Powerful Backend,,,,,
ms,5,BSE Takes Online Trading from Milliseconds to Microseconds with MySQL Enterprise Edition,,,,,
ms,5,TMON Builds ‪Korea’s Number One Online Malling Platform ‬‬‬on MySQL Enterprise Edition‬‬‬‬‬‬‬‬‬‬‬‬‬‬‬‬‬‬‬‬‬‬,,,,,
ms,5,Globo Adopts MySQL Enterprise Edition as Platform for Content Development,,,,,
ms,5,University of Toronto Empowers Astronomers to Research Dark Matter with Massive Space Image Database,,,,,
ms,5,More (71) »,,,,,
ms,5,France Billet Stakes Online TicketSales on High Availability of MySQL Enteperprise Edition,,,,,
ms,5,Mobitel Achieves Optimum Price Performance Ratio for 2 Tier Applications,,,,,
ms,5,Certigna Gains Maximum Availability Through Enhance Performance of MySQL Cluster Carrier Grade Edition,,,,,
ms,5,"Plusnet Supports Rapid Growth of Customer Base by Improving Visibility, Performance, and Scalability",,,,,
ms,5,BitCash Supports Future Business Growth with MySQL Cluster Carrier Grade Edition,,,,,
ms,5,Isibet Achieve 24x7 Uptime with High Availability MySQL Enterprise,,,,,
ms,5,"LINE Enhances Database Availability, Scalability, and Security with MySQL",,,,,
ms,5,IoT based Big Data System for Chungho-Nais With MySQL,,,,,
ms,5,Anura,,,,,
ms,5,io uses MySQL to reduce wasted advertising dollars spent on fraudulent traffic by as much as 90%,,,,,
ms,5,Fabrikant,,,,,
ms,5,ru Enjoys Near-Zero Downtime,,,,,
ms,5,Gina Tricot Scales Online Sales with MySQL Enterprise Edition,,,,,
ms,5,Atos Manages Transaction Clearing for the Euronext Markets in Continental Europe with MySQL Enterprise Edition,,,,,
ms,5,IOOF Cuts Time to Complete Online Trades from Days to Seconds with MySQL,,,,,
ms,5,Big Fish Selects MySQL Cluster for Real-Time Web Recommendations,,,,,
ms,5,PayPal Powers its Global Fraud Detection System with MySQL Cluster,,,,,
ms,5,"MySQL Cluster Powers El Chavo from Playful Play, Latin America's Most Popular Facebook Game",,,,,
ms,5,Verizon Wireless Supports its Mission-Critical Employee Portal with MySQL,,,,,
ms,5,Polystar Improves Telecom Networks Performance with Embedded MySQL,,,,,
ms,5,Waiting Room Solutions Relies on MySQL for Web-Based Medical Management Systems,,,,,
ms,5,iStockphoto Grows to a Top-100 U,,,,,
ms,5,S,,,,,
ms,5,Website with MySQL Enterprise Unlimited,,,,,
ms,5,Zillow,,,,,
ms,5,com Deploys MySQL Cluster for High Growth with High Availability,,,,,
ms,5,Zappos Uses MySQL to Power its Growth &amp; Exceptional Customer Service,,,,,
ms,5,Gumtree Relies on MySQL Enterprise to Help Tame Explosive Growth,,,,,
ms,5,F5 Relies on MySQL to Improve Performance 1000%,,,,,
ms,5,Tralix Delivers High SLAs and Extreme Performance with MySQL,,,,,
ms,5,MySQL Powers the Market Leading Telecoms Network Management Framework,,,,,
ms,5,Adobe Relies on MySQL to Make Creative Professionals More Productive,,,,,
ms,5,MySQL Cluster Scores with Pyro and Cell C at the FIFA World Cup,,,,,
ms,5,MySQL Enterprise powers 2 Million Referrals in Central Hospital Registry,,,,,
ms,5,MySQL Cluster Powers Leading Document Management Web Service,,,,,
ms,5,Promovacances,,,,,
ms,5,com boosts its performance with MySQL Enterprise & the Query Analyzer,,,,,
ms,5,UCR Selects MySQL Enterprise to Power the Medical Registries of 1.5 Million Patients,,,,,
ms,5,MySQL Enterprise powers SaaS ERP for Italian local and central authorities,,,,,
ms,5,Aito Technologies Selects MySQL to Manage Mobile Traffic Data and Customer Information,,,,,
ms,5,Cashpoint Saves Half a Million Euros per Year as it Bets on MySQL,,,,,
ms,5,Symantec Benefits from MySQL Embedded Server's Rock-Solid Quality and Low Administrative Costs For Over Six Years,,,,,
ms,5,be2 scales fast growing matchmaking web site with MySQL Enterprise,,,,,
ms,5,MySQL Cluster Powers Rapidly Growing eCommerce Service,,,,,
ms,5,Caspur relies on MySQL Enterprise to support its scientific research,,,,,
ms,5,TweetMeme Manages Explosive Growth with MySQL Enterprise,,,,,
ms,5,"MySQL Helps Simply Accounting by Sage Increase Revenue, Market Share, and Customer Satisfaction",,,,,
ms,5,MySQL Delivers 50% Lower Database Costs as NetHawk Develops Network Monitoring Solutions,,,,,
ms,5,Tema Networks Selects MySQL Embedded Server to Power its Real Time Mobile Billing Solution,,,,,
ms,5,KURIER,,,,,
ms,5,at Powers its High-Traffic News Portal with MySQL Cluster,,,,,
ms,5,SPEECH DESIGN Delivers Next Generation Call Completion Services with MySQL Cluster,,,,,
ms,5,Xceedium Relies on MySQL Embedded Server's Resilience and Performance for Its High-Risk User Security Appliance,,,,,
ms,5,Big Fish Games Triples Database Performance with MySQL Query Analyzer,,,,,
ms,5,Shinsei Bank Relies on MySQL and SugarCRM to Radically Accelerate Enterprise Application Deployment,,,,,
ms,5,KACE Relies on MySQL to Deliver Mission-Critical Systems Management Solution,,,,,
ms,5,Italtel enables Networking Convergence using MySQL Cluster Carrier Grade Edition,,,,,
ms,5,CONCEIVIUM Relies on MySQL to Perform Real-Time Analytics for BlackBerry Enterprise Server,,,,,
ms,5,Gorilla Nation Relies on MySQL to Power its Advertising Network Business Intelligence Platform,,,,,
ms,5,FairWarning Relies on MySQL to Automate HIPAA Healthcare Security Compliance,,,,,
ms,5,Paggo Relies on MySQL Cluster and Java to Deliver Financial Transactions over Telecom Networks,,,,,
ms,5,Supply Dynamics Delivers Business-Critical SaaS Solution using MySQL,,,,,
ms,5,Logicworks Delivers Managed Database Hosting Service with MySQL Enterprise,,,,,
ms,5,M1 Deploys MySQL Cluster Carrier Grade Solution from hSenid to Improve Telecom Subscriber Revenue,,,,,
ms,5,RightNow Delivers Software as a Service using MySQL,,,,,
ms,5,ScienceLogic Relies on MySQL to Deliver Integrated Network Management Appliance,,,,,
ms,5,NetQoS Delivers Distributed Network Management Solution with Embedded MySQL,,,,,
ms,5,Pricer Increases Retailer Efficiency with MySQL,,,,,
ms,5,Alcatel-Lucent Delivers Next Generation Converged Services with MySQL Cluster Carrier Grade Edition,,,,,
ms,5,Quantel,,,,,
ms,5,Alcatel-Lucent uses MySQL Cluster Carrier Grade Edition to Handle over 60 million Subscribers,,,,,
ms,5,Aastra Telecom Schweiz Delivers Highly Reliable Telecom Equipment using MySQL,,,,,
ms,5,Deal Group Media scales out online advertising with MySQL,,,,,
ms,5,Alcatel-Lucent utilise MySQL Cluster Carrier Grade Edition pour gérer plus de 60 millions d'abonnés,,,,,
ms,5,BBC News Website uses MySQL to Monitor Reader Interest,,,,,
ms,5,Bredbandsbolaget (B2) Makes the Connection with MySQL Cluster,,,,,
ms,5,Jajja Communications Optimizes Search Engine Traffic with MySQL Network,,,,,
ms,5,Local County Government Turns to MySQL to Help Support its Citizens,,,,,
ms,5,Webinars,,,,,
ms,5,MySQL Performance Tuning,,,,,
ms,5,(2020-05-27),,,,,
ms,5,Thoughts on Performance Tuning and War Stories,,,,,
ms,5,(2019-06-26),,,,,
ms,5,Top 10 Performance Tricks and Techniques for MySQL,,,,,
ms,5,(2019-06-19),,,,,
ms,5,Demos,,,,,
ms,5,Remotely Monitor MySQL in the Cloud,,,,,
ms,5,Performance Tuning with MySQL Query Analyzer,,,,,
ms,5,Real-time MySQL Performance & Availability Monitoring,,,,,
ms,5,Installing MySQL Enterprise Monitor,,,,,
ms,5,Articles,,,,,
ms,5,One Giant Leap For SQL: MySQL 8.0 Released,,,,,
ms,5,Forums,,,,,
ms,5,Replication,,,,,
ms,5,Partitioning,,,,,
ms,5,Performance & Scalability,,,,,
ms,5,MySQL Cluster,,,,,
ms,5,InnoDB,,,,,
ms,5,Contact MySQL Sales,,,,,
ms,5,USA/Canada: +1-866-221-0634,,,,,
ms,5,(More Countries »),,,,,
ms,5,"© 2020, Oracle Corporation and/or its affiliates",,,,,
ms,5,Products,,,,,
ms,5,MySQL Database Service,,,,,
ms,5,MySQL Enterprise Edition,,,,,
ms,5,MySQL Standard Edition,,,,,
ms,5,MySQL Classic Edition,,,,,
ms,5,MySQL Cluster CGE,,,,,
ms,5,MySQL Embedded (OEM/ISV),,,,,
ms,5,Services,,,,,
ms,5,Training,,,,,
ms,5,Certification,,,,,
ms,5,Consulting,,,,,
ms,5,Support,,,,,
ms,5,Downloads,,,,,
ms,5,MySQL Community Server,,,,,
ms,5,MySQL NDB Cluster,,,,,
ms,5,MySQL Shell,,,,,
ms,5,MySQL Router,,,,,
ms,5,MySQL Workbench,,,,,
ms,5,Documentation,,,,,
ms,5,MySQL Reference Manual,,,,,
ms,5,MySQL Workbench,,,,,
ms,5,MySQL NDB Cluster,,,,,
ms,5,MySQL Connectors,,,,,
ms,5,Topic Guides,,,,,
ms,5,About MySQL,,,,,
ms,5,Contact Us,,,,,
ms,5,How to Buy,,,,,
ms,5,Partners,,,,,
ms,5,Job Opportunities,,,,,
ms,5,Site Map,,,,,
ms,5,English,,,,,
ms,5,(,,,,,
ms,5,Deutsch |,,,,,
ms,5,Français |,,,,,
ms,5,Italiano |,,,,,
ms,5,日本 |,,,,,
ms,5,中文,,,,,
ms,5,),,,,,
ms,5,"© 2020, Oracle Corporation and/or its affiliates",,,,,
ms,5,Legal Policies |,,,,,
ms,5,Your Privacy Rights |,,,,,
ms,5,Terms of Use |,,,,,
ms,5,Trademark Policy |,,,,,
ms,5,Contributor Agreement |,,,,,
ms,6,MySQL 101: Parameters to Tune for MySQL Performance - Percona Database Performance Blog,,,,,
ms,6,Percona LiveAbout UsContact Us,,,,,
ms,6,Services,,,,,
ms,6,Support,,,,,
ms,6,MySQL Support,,,,,
ms,6,MongoDB Support,,,,,
ms,6,MariaDB Support,,,,,
ms,6,PostgreSQL Support,,,,,
ms,6,DBaaS Support,,,,,
ms,6,High Availability Support,,,,,
ms,6,Flexible Pricing,,,,,
ms,6,Support Tiers,,,,,
ms,6,Technical Account Managers,,,,,
ms,6,Managed Services,,,,,
ms,6,Percona Managed Database Services,,,,,
ms,6,Percona Advanced Managed Database Service,,,,,
ms,6,Consulting,,,,,
ms,6,Percona Cloud Cover,,,,,
ms,6,Percona Open Source Advance,,,,,
ms,6,Percona and Microsoft Azure Partnership,,,,,
ms,6,Policies,,,,,
ms,6,Training,,,,,
ms,6,Products,,,,,
ms,6,MySQL Database Software,,,,,
ms,6,Percona Distribution for MySQL,,,,,
ms,6,Percona Server for MySQL,,,,,
ms,6,Percona XtraDB Cluster,,,,,
ms,6,Percona XtraBackup,,,,,
ms,6,MongoDB Database Software,,,,,
ms,6,Percona Distribution for MongoDB,,,,,
ms,6,Percona Server for MongoDB,,,,,
ms,6,Percona Backup for MongoDB,,,,,
ms,6,PostgreSQL Database Software,,,,,
ms,6,Percona Monitoring and Management,,,,,
ms,6,Percona Kubernetes Operators,,,,,
ms,6,Open Source Database Tools,,,,,
ms,6,Percona Toolkit,,,,,
ms,6,Percona DBaaS Command Line Tool,,,,,
ms,6,Solutions,,,,,
ms,6,Eliminate Vendor Lock-In,,,,,
ms,6,Embrace the Cloud,,,,,
ms,6,Optimize Database Performance,,,,,
ms,6,Reduce Costs and Complexity,,,,,
ms,6,Resources,,,,,
ms,6,Calculators,,,,,
ms,6,Solution Briefs,,,,,
ms,6,White Papers,,,,,
ms,6,Webinars,,,,,
ms,6,Datasheets,,,,,
ms,6,Case Studies,,,,,
ms,6,Ebooks,,,,,
ms,6,Videos,,,,,
ms,6,Technical Presentations,,,,,
ms,6,About,,,,,
ms,6,About Percona,,,,,
ms,6,Contact Us,,,,,
ms,6,Customers,,,,,
ms,6,Careers,,,,,
ms,6,In The News,,,,,
ms,6,Percona Live,,,,,
ms,6,Events,,,,,
ms,6,Survey,,,,,
ms,6,Community,,,,,
ms,6,Forums,,,,,
ms,6,Community Blog,,,,,
ms,6,PMM Community Contributions,,,,,
ms,6,MySQL 101: Parameters to Tune for MySQL Performance,,,,,
ms,6,Back to the Homepage 30 Jun 2020 Brian Sumpter2020-07-02T12:09:44-04:00 By Brian Sumpter,,,,,
ms,6,"Insight for DBAs, Monitoring, MySQL",,,,,
ms,6,"insight for DBAs, Monitoring, MySQL, mysql-and-variants",,,,,
ms,6,"3 CommentsWhile there is no magic bullet for MySQL tuning, there are a few areas that can be focused on upfront that can dramatically improve the performance of your MySQL installation",,,,,
ms,6,"While much information has been published on this topic over the years, I wanted to break down some of the more critical settings that anyone can implement with no guesswork required",,,,,
ms,6,"Depending on the version of MySQL you are running, some of the default values used in this post may differ from your install, but the premise is still largely the same",,,,,
ms,6,"Initial MySQL performance tuning can be broken down to the following categories:Tuning for your hardwareTuning for best performance / best practicesTuning for your workloadTuning MySQL for Your HardwareDepending on the hardware you have installed MySQL on, some variables need to be set based on the machine (or VM) specifications",,,,,
ms,6,"The following variables are largely dependent on your hardware:innodb_buffer_pool_sizeGenerally, set to 50% – 70% of your total RAM as a starting point",1,,innodb_buffer_pool_size;innodb_buffer_pool_size,P >= 0.5 * memory; P <= 0.7 * memory,
ms,6,It does not need to be set any larger than the total database size,,,,,
ms,6,"Percona Monitoring and Management (PMM) can offer additional insight, showing your buffer pool usage and allowing you to tune accordingly",,,,,
ms,6,innodb_log_file_sizeThis is generally set between 128M – 2G,1,,innodb_log_file_size,P >= 128M; P <= 2G,
ms,6,Should be large enough to hold at most an hour or so of logs,,,,,
ms,6,This is more than enough so that MySQL can reorder writes to use sequential I/O during the flushing and checkpointing processes,,,,,
ms,6,"PMM can offer additional insight, as if you are using more than 50% of your log space, you may benefit from a log file size increase",,,,,
ms,6,innodb_flush_log_at_trx_commitSetting to “1” (default in 5.7) gives the most durability,,,,,
ms,6,"Setting to “0” or “2” will give more performance, but less durability",1,4913,innodb_flush_log_at_trx_commit,"P in {0, 2}",
ms,6,innodb_flush_methodSetting this to O_DIRECT will avoid a performance penalty from double buffering,,,,,
ms,6,MySQL Tuning for Best Performance/Best Practicesinnodb_file_per_tableSetting this to “ON” will generate an independent InnoDB table space for every table in the database,,,,,
ms,6,innodb_stats_on_metadataSetting this to “OFF” avoids unnecessary updating of InnoDB statistics and can greatly improve read speeds,1,,innodb_stats_on_metadata,P = off,
ms,6,"innodb_buffer_pool_instancesA best practice is to set this to “8” unless the buffer pool size is < 1G, in which case set to “1”",1,,innodb_buffer_pool_instances;innodb_buffer_pool_instances,P = 8; P = 1,Pool size >= 1G;Pool size < 1G
ms,6,uery_cache_type & query_cache_sizeSetting both of these to “0” will entirely disable the query cache,,,,,
ms,6,"Tuning for Your WorkloadTo tune further, more information will be required",,,,,
ms,6,The best way to gather this information is to install a MySQL monitoring / graphing tool like Percona Monitoring and Management platform,,,,,
ms,6,"Once you have a tool installed, we can dive into the individual metrics and start customizing based on the data",,,,,
ms,6,I would recommend starting with one of the most impactful variables – the innodb_buffer_pool_size,,,,,
ms,6,Compare the RAM and number of free pages on your instance to the total buffer pool size,,,,,
ms,6,"Based on these metrics, you can determine if you need to increase or decrease your overall buffer pool size setting",,,,,
ms,6,"Next, take a look at your metrics for the InnoDB Log File usage",,,,,
ms,6,The rule of thumb is that your log files should hold approximately one hour of data,,,,,
ms,6,"If you see that your data written to the log files hourly exceeds the total size of the log files, you would want to increase the innodb_log_file_size variable and restart MySQL",,,,,
ms,6,You could also verify with “SHOW ENGINE INNODB STATUS;” via the MySQL CLI to assist in calculating a good InnoDB log file size,,,,,
ms,6,Other SettingsOther InnoDB settings that can be further tuned for better performance are:innodb_autoinc_lock_modeSetting this to “2” (interleaved mode) can remove the need for an auto-inc lock (at the table level) and can increase performance when using multi-row insert statements to insert values into a table with an auto increment primary key,1,,innodb_autoinc_lock_mode,P = 2,
ms,6,Note that this requires either ROW or MIXED binlog format,,,,,
ms,6,innodb_io_capacity / innodb_io_capacity_maxThese settings will impact your database if you are utilizing a write-heavy workflow,,,,,
ms,6,This does not apply to read (SELECT) traffic,,,,,
ms,6,"To tune these values, it is best to know how many iops your system can perform",,,,,
ms,6,It is a good idea to run sysbench or another benchmark tool to determine your storage throughput,,,,,
ms,6,"PMM can offer additional insight, showing your IO usage and allowing you to tune accordingly",,,,,
ms,6,"In SummaryWhile this is by no means a comprehensive article on MySQL tuning, the suggestions above should clear some of the low hanging fruit and get your system closer to an ideal setup",,,,,
ms,6,"As with all database tuning, your process should be an ongoing one based on current information",,,,,
ms,6,"Examine the settings proposed above, and implement if they make sense for your environment/workload",,,,,
ms,6,Install a good monitoring tool to give insight into the database (Percona Monitoring and Management is our suggestion),,,,,
ms,6,tay current on your monitoring graphs to determine other areas where you may need to tune,,,,,
ms,6,Our solution brief “Get Up and Running with Percona Server for MySQL” outlines setting up a MySQL® database on-premises using Percona Server for MySQL,,,,,
ms,6,It includes failover and basic business continuity components,,,,,
ms,6,Download PDFRelated,,,,,
ms,6,AuthorBrian SumpterShare this postFacebookTwitterLinkedInEmailComments (3),,,,,
ms,6,Jim Tommaney,,,,,
ms,6,Reply,,,,,
ms,6,"Hi Brian,Great write-up!",,,,,
ms,6,Impact of innodb_stats_on_metadata was completely new to me,,,,,
ms,6,"We also evaluated innodb_io_capacity and innodb_read_ahead_threshold at various settings, no measurable benefit for query workloads that I could find either",,,,,
ms,6,"We found good results with changing buffer_pool instances and read_io_threads together in our environment: Cloud storage, analytic queries, concurrent workload, parallel query enabled (Ali Cloud), 64 cores, o_direct",,,,,
ms,6,innodb_buffer_pool_instances (change from 8 to 32) innodb_read_io_threads (change from 4 to 16)Under a 100% physical I/O workload this resulted in a 4x speedup,,,,,
ms,6,,,,,,
ms,6,"You mileage will vary, test before production usage",,,,,
ms,6,,,,,,
ms,6,"Most query workloads are not 100% PIO, so actual benefits likely much lower",,,,,
ms,6,"Cheers, Jim June 30, 2020 at 2:08 pm",,,,,
ms,6,Jie Zhou,,,,,
ms,6,Reply,,,,,
ms,6,"Why innodb_buffer_pool_instances has a best practice to set it to “8” July 1, 2020 at 12:04 pm",,,,,
ms,6,Brian Sumpter,,,,,
ms,6,Reply,,,,,
ms,6,Hi Jie Zhou,,,,,
ms,6,The MySQL default is to set innodb_buffer_pool_instances to 8 (in MySQL version 5.7 and up) as this is a good starting point for most general use cases,,,,,
ms,6,"As per the MySQL documentation, this option takes effect only when you set innodb_buffer_pool_size to a size of 1GB or more",,,,,
ms,6,The total size you specify is divided among all the buffer pools,,,,,
ms,6,"For best efficiency, specify a combination of innodb_buffer_pool_instances and innodb_buffer_pool_size so that each buffer pool instance is at least 1GB",,,,,
ms,6,"July 8, 2020 at 1:11 pmLeave a Reply Cancel reply",,,,,
ms,6,"How Can We Help? Percona's experts can maximize your application performance with our open source database support, managed services or consulting",,,,,
ms,6,Contact usSubscribeWant to get weekly updates listing the latest blog posts? Subscribe now and we'll send you an update every Friday at 1pm ET,,,,,
ms,6,Subscribe to our blog CategoriesMySQL(3355)Insight for DBAs(1528)Percona Software(1479)Percona Events(870)MongoDB(549)Insight for Developers(472)Benchmarks(340)Percona Live(332)Webinars(287)Cloud(276)PostgreSQL(176)Monitoring(164)MariaDB(157)Percona Services(138)ProxySQL(127)Security(125)Hardware and Storage(105)Storage Engine(52)Database Trends(46)Percona Announcements(10)  Percona Blog RSS Feed,,,,,
ms,6,Upcoming WebinarsThe Open Source Alternative to Paying for MongoDBWhy PostgreSQL Is Becoming A Migration Target For EnterpriseHow To Measure Linux Performance WrongConverting MongoDB to Percona Server for MongoDBMoving MongoDB to the Cloud: Strategies and Points To ConsiderAll Webinars,,,,,
ms,6,"»ServicesSupportManaged ServicesConsultingTrainingProductsMySQL SoftwareMongoDB SoftwarePostgreSQL DistributionKubernetesMonitoring & ManagementResourcesSolution BriefsWhite PapersWebinarsCase StudiesDatasheetsMoreBlogCommunity BlogTechnical Forum HelpAboutCustomersNewsroomAboutCareers Contact UsSales & General Inquiries (888) 316-9775 (USA) (208) 473-2904 (USA) +44 203 608 6727 (UK) 0-808-169-6490 (UK) 0-800-724-4569 (GER)MySQL, InnoDB, MariaDB and MongoDB are trademarks of their respective owners",,,,,
ms,6,Proudly running Percona Server for MySQL,,,,,
ms,6,Terms of Use |,,,,,
ms,6,Privacy |,,,,,
ms,6,Copyright |,,,,,
ms,6,LegalCopyright © 2006-2020 Percona LLC,,,,,
ms,6,,,,,,
ms,7,"MySQL Performance Tuning: Tips, Scripts and Tools",,,,,
ms,7,"hayden_james@linuxhayden-james@linux:~$ _home/about/services/feedback/sponsors/contact/MySQL Performance Tuning: Tips, Scripts and Tools August 10, 2020 by Hayden James, in Blog LinuxWith MySQL, common configuration mistakes can cause serious performance problems",,,,,
ms,7,"In fact, if you misconfigure just one of the many config parameters, it can cripple performance",,,,,
ms,7,"Of course, the performance of MySQL is often tied to the efficiency of your MySQL queries",,,,,
ms,7,It’s important to ensure that your performance issues are not due to poorly written MySQL queries,,,,,
ms,7,"You can use MySQL’s slow query log, log_queries_not_using_indexes or APM tools which offer MySQL performance monitoring such as Datadog, Instrumental, Panopta, Site24x7, Solarwinds, and other monitoring tools",,,,,
ms,7,MySQL tuning is quite an expansive topic,,,,,
ms,7,"As such, today I won’t try to place any recommended config lines, values, or settings here",,,,,
ms,7,Be very cautious with recommended-settings based articles,,,,,
ms,7,This post assumes that you’ve already optimized your queries and now seek guidance with selecting the best performance config options (ex: my,,,,,
ms,7,cnf) for MySQL,,,,,
ms,7,This can vary greatly case by case as there’s very little no one-size-fits-all advice,,,,,
ms,7,"Therefore, also included below the tips, are additional links to popular free MySQL tuning scripts and tools",,,,,
ms,7,"Stay up to date with the latest MySQL server versionsWith each new version of MySQL released, there’s substantial performance and feature enhancements over previous versions",,,,,
ms,7,"So the most important advice would be to upgrade, upgrade, upgrade",,,,,
ms,7,Have a look at some version performance comparisons here,,,,,
ms,7,"If you are seeking additional features or flexibility you may already be using MariaDB, or Percona, which are enhanced drop-in replacements for MySQL Server",,,,,
ms,7,If you’ve seen notable improvements in using MariaDB or Percona over stock MySQL please share your experience below,,,,,
ms,7,They are both great options,,,,,
ms,7,"MySQL Performance Tuning AdviceBefore continuing please have a look at the following MySQL performance tuning articles: MySQL Database Performance: Avoid this common mistake and note that due to the limitations of MySQL query cache, it has been deprecated as of MySQL 5.7.20 and is removed in MySQL 8.0",,,,,
ms,7,"ther than the tuning scripts listed below, try to avoid online advice unless its via mysql",,,,,
ms,7,"com or those that reference directly MySQL, Pecona’s, or MariaDB articles or documentation",,,,,
ms,7,You will notice that both of the above blog posts reference or quote MySQL’s docs,,,,,
ms,7,There’s a ton of conflicting advice and opinions online,,,,,
ms,7,"As such, my advice is to always crosscheck your config changes with official documentation",,,,,
ms,7,This includes everything I say here,,,,,
ms,7,"In fact, when venturing to change MySQL’s defaults, unless you have a basis for changes, its best to leave it as is",,,,,
ms,7,When there’s doubt… stick with the defaults,,,,,
ms,7,"Always, base your changes on benchmarks, comparisons, and time-tested firsthand data",,,,,
ms,7,"Selecting MySQL Storage EngineThis is simple, use InnoDB and avoid MyISAM when possible",,,,,
ms,7,For these reasons:Versions of MySQL 5.5 and greater have switched to the InnoDB engine to ensure referential integrity constraints and higher concurrency,,,,,
ms,7,InnoDB has better crash recovery,,,,,
ms,7,"InnoDB has row-level locking, MyISAM can only do full table-level locking",,,,,
ms,7,"Like MyISAM, InnoDB now has FULLTEXT search indexes as of MySQL 5.6InnoDB supports transactions, foreign keys and relationship constraints, MyISAM does not",,,,,
ms,7,MySQL Performance Tuning ScriptsYou cannot replace Professional MySQL tuning with scripts,,,,,
ms,7,"Scripts serve as basic guides, sometimes spot-on, but most times loose guides which will only solve the most grievous misconfigured parameters",,,,,
ms,7,Use them as a starting point,,,,,
ms,7,"Meaning, before you contact a professional to tune MySQL use these tuning scripts so that at the very least you don’t have any so-called embarrassing config in your my",,,,,
ms,7,cnf file,,,,,
ms,7,"For example, join_buffer_size set to 4GB when the total DB size is less than 1GB",1,,join_buffer_size,P != 4GB,Dbsize < 1GB
ms,7,"Now, let’s look at popular scripts and tools available for MySQL performance tuning: MySqlTuner, Tuning-Primer, MySQLreport, Percona Toolkit, and phpMyAdmin Advisor",,,,,
ms,7,MySQLTunerA script thas is written in Perl that will assist you with your MySQL configuration and make recommendations for increased performance and stability,,,,,
ms,7,"MySQLTuner is maintained and indicator collect is increasing week after week supporting a lot of configurations such as Galera Cluster, TokuDB, Performance schema, Linux OS metrics, InnoDB, MyISAM, Aria, etc",,,,,
ms,7,– MySQLTuner on Github,,,,,
ms,7,Tuning-PrimerThis script takes information from “SHOW STATUS LIKE…” and “SHOW VARIABLES LIKE…” to produce sane recommendations for tuning server variables,,,,,
ms,7,It is compatible with all versions of MySQL 3.23 and higher (including 5.1),,,,,
ms,7,he original script is no longer updated,,,,,
ms,7,I’ve been using this Tuning-primer version on Github which fully supports MariaDB,,,,,
ms,7,"Percona ToolkitPercona Toolkit is a collection of advanced open-source command-line tools, developed to perform a variety of MySQL tasks that are too difficult or complex to perform manually – freeing your DBAs for work that helps you achieve your business goals",,,,,
ms,7,"Useful tools include: pt-align, pt-archiver, pt-config-diff, pt-deadlock-logger, pt-diskstats, pt-duplicate-key-checker, pt-fifo-split, pt-find, pt-fingerprint, pt-fk-error-logger, pt-heartbeat, pt-index-usage, pt-ioprofile, pt-kill, pt-mext, pt-mongodb-query-digest, pt-mongodb-summary, pt-mysql-summary, pt-online-schema-change, pt-pg-summary, pt-pmp, pt-query-digest, pt-secure-collect, pt-show-grants, pt-sift, pt-slave-delay, pt-slave-find, pt-slave-restart, pt-stalk, pt-summary, pt-table-checksum, pt-table-sync, pt-table-usage, pt-upgrade, pt-variable-advisor and pt-visual-explain",,,,,
ms,7,phpMyAdmin AdvisorThe Advisor system provides recommendations on server variables by analyzing MySQL status variables,,,,,
ms,7,"phpMyAdmin is a free software tool written in PHP, intended to handle the administration of MySQL over the Web",,,,,
ms,7,Visit: phpmyadmin,,,,,
ms,7,MysqlreportMysqlreport transforms the values from SHOW STATUS into an easy-to-read report that provides an in-depth understanding of how well MySQL is running,,,,,
ms,7,mysqlreport is a better alternative (and practically the only alternative) to manually interpreting SHOW STATUS,,,,,
ms,7,"Tags: apm, mariadb, mysql, performance, scripts, sysadminsDownload my free 101 Useful Linux Commands (PDF)",,,,,
ms,7,"lso, I'll notify you when new Linux articles are published",,,,,
ms,7,- Subscribe now and receive my free PDF,,,,,
ms,7,"(Average of 1 or 2 emails per month, sent only on Mondays",,,,,
ms,7,"← 60 Linux Networking commands and scriptsLinux Commands frequently used by Linux Sysadmins – Part 1 →Popular Topicssysadmins, linux, performance, server, apm, security, debian, hosting, php, mysqlWith over 4 million readers, this blog features Linux server administration and Linux server performance articles",,,,,
ms,7,"Most Popular Articles100 Top Server Monitoring & APM Solutions60 Linux Networking commands and scriptsChoosing the Best Linux Distro for DesktopHome Lab Beginners guide – HardwareUnderstanding PHP memory_limit“MySQL server has gone away” error – Solution(s)Is disk I/O slowing your application?Almost Always Add Swap Space | Part 2 (ZRAM)atop for Linux server performance analysisHow to Securely Copy Files Using SCP examplesRecent Articles Linux on iPad, PiHole bypassed, Tiny Core Linux, and more",,,,,
ms,7,"| biweekly #4 Best Linux Distros in 2021 for Beginner, Experienced and Expert users",,,,,
ms,7,"All New Raspberry Pi 400, WinApps, Uno Platform, and more",,,,,
ms,7,"| biweekly #3 df command in Linux with examples Linux top: Here’s how to customize it ls command in Linux, with examples Is Cloudflare Argo worth it? Linux News, articles and other cool stuff | biweekly #2 90 Linux Commands frequently used by Linux Sysadmins Linux Commands frequently used by Linux Sysadmins – Part 5© 2020 Hayden James",,,,,
ms,7,"Privacy Policy, Terms",,,,,
ms,7,"Connect: Twitter, Linkedin, Newsletter",,,,,
ms,7,>_,,,,,
ms,8,Tips for MySQL 5.7 Database Tuning and Performance - Percona Database Performance Blog,,,,,
ms,8,Percona LiveAbout UsContact Us,,,,,
ms,8,Services,,,,,
ms,8,Support,,,,,
ms,8,MySQL Support,,,,,
ms,8,MongoDB Support,,,,,
ms,8,MariaDB Support,,,,,
ms,8,PostgreSQL Support,,,,,
ms,8,DBaaS Support,,,,,
ms,8,High Availability Support,,,,,
ms,8,Flexible Pricing,,,,,
ms,8,Support Tiers,,,,,
ms,8,Technical Account Managers,,,,,
ms,8,Managed Services,,,,,
ms,8,Percona Managed Database Services,,,,,
ms,8,Percona Advanced Managed Database Service,,,,,
ms,8,Consulting,,,,,
ms,8,Percona Cloud Cover,,,,,
ms,8,Percona Open Source Advance,,,,,
ms,8,Percona and Microsoft Azure Partnership,,,,,
ms,8,Policies,,,,,
ms,8,Training,,,,,
ms,8,Products,,,,,
ms,8,MySQL Database Software,,,,,
ms,8,Percona Distribution for MySQL,,,,,
ms,8,Percona Server for MySQL,,,,,
ms,8,Percona XtraDB Cluster,,,,,
ms,8,Percona XtraBackup,,,,,
ms,8,MongoDB Database Software,,,,,
ms,8,Percona Distribution for MongoDB,,,,,
ms,8,Percona Server for MongoDB,,,,,
ms,8,Percona Backup for MongoDB,,,,,
ms,8,PostgreSQL Database Software,,,,,
ms,8,Percona Monitoring and Management,,,,,
ms,8,Percona Kubernetes Operators,,,,,
ms,8,Open Source Database Tools,,,,,
ms,8,Percona Toolkit,,,,,
ms,8,Percona DBaaS Command Line Tool,,,,,
ms,8,Solutions,,,,,
ms,8,Eliminate Vendor Lock-In,,,,,
ms,8,Embrace the Cloud,,,,,
ms,8,Optimize Database Performance,,,,,
ms,8,Reduce Costs and Complexity,,,,,
ms,8,Resources,,,,,
ms,8,Calculators,,,,,
ms,8,Solution Briefs,,,,,
ms,8,White Papers,,,,,
ms,8,Webinars,,,,,
ms,8,Datasheets,,,,,
ms,8,Case Studies,,,,,
ms,8,Ebooks,,,,,
ms,8,Videos,,,,,
ms,8,Technical Presentations,,,,,
ms,8,About,,,,,
ms,8,About Percona,,,,,
ms,8,Contact Us,,,,,
ms,8,Customers,,,,,
ms,8,Careers,,,,,
ms,8,In The News,,,,,
ms,8,Percona Live,,,,,
ms,8,Events,,,,,
ms,8,Survey,,,,,
ms,8,Community,,,,,
ms,8,Forums,,,,,
ms,8,Community Blog,,,,,
ms,8,PMM Community Contributions,,,,,
ms,8,Tips for MySQL 5.7 Database Tuning and Performance,,,,,
ms,8,Back to the Homepage 01 Apr 2020 Brian Sumpter2020-04-01T12:30:51-04:00 By Brian Sumpter,,,,,
ms,8,"Insight for DBAs, Monitoring, MySQL, Percona Software",,,,,
ms,8,"insight for DBAs, Monitoring, MySQL, Percona Software",,,,,
ms,8,"0 CommentsWhile there is no magic bullet for MySQL 5.7 database tuning, there are a few areas that can be focused on upfront that can dramatically improve the performance of your MySQL installation",,,,,
ms,8,"While much information has been published on this topic over the years, I wanted to break down some of the more critical settings that anyone can implement – with no guesswork required",,,,,
ms,8,"Depending on the version of MySQL you are running, some of the default values used in this post may differ from your install, but the premise is still largely the same",,,,,
ms,8,We will focus on MySQL 5.7 for the purposes of this article,,,,,
ms,8,"Initial MySQL performance tuning can be broken down to the following categories:Tuning for your hardwareTuning for best performance/best practicesTuning for your workloadMySQL 5.7 Database TuningTuning For Your HardwareDepending on the hardware you have installed MySQL on, some variables need to be set based on the machine (or VM) specifications",,,,,
ms,8,"The following variables are largely dependent on your hardware:innodb_buffer_pool_sizeGenerally, set to 50% – 70% of your total RAM as a starting point",1,,innodb_buffer_pool_size;innodb_buffer_pool_size,P >= 0.5 * memory; P <= 0.7 * memory,
ms,8,It does not need to be set any larger than the total database size,,,,,
ms,8,innodb_log_file_sizeThis is generally set between 128M – 2G,1,,innodb_log_file_size;innodb_log_file_size,P >= 128M; P <= 2G,
ms,8,It does not need to be any larger than the buffer pool,,,,,
ms,8,innodb_flush_log_at_trx_commitSetting to “1” (default in 5.7) gives the most durability,,,,,
ms,8,"Setting to “0” or “2” will give more performance, but less durability",1,5126,innodb_flush_log_at_trx_commit,"P in {0, 2}",
ms,8,innodb_flush_methodSetting this to O_DIRECT will avoid the performance penalty from double buffering,1,,innodb_flush_method,P = O_DIRECT,
ms,8,Tuning For Best Performance / Best Practicesinnodb_file_per_tableSetting this to “ON” will generate an independent InnoDB table space for every table in the database,,,,,
ms,8,innodb_stats_on_metadataSetting this to “OFF” avoids unnecessary updating of InnoDB statistics and can greatly improve read speeds,1,,innodb_stats_on_metadata,P = off,
ms,8,"innodb_buffer_pool_instancesA best practice is to set this to “8” unless the buffer pool size is < 1G, in which case set to “1”",1,,innodb_buffer_pool_instances;innodb_buffer_pool_instances,P = 8; P = 1,Pool size >= 1G; Pool size < 1G
ms,8,uery_cache_type & query_cache_sizeSetting both of these to “0” will entirely disable the query cache,,,,,
ms,8,"Tuning For Your WorkloadTo tune further, more information will be required",,,,,
ms,8,The best way to gather this information is to install a MySQL monitoring/graphing tool like Percona Monitoring and Management (PMM),,,,,
ms,8,"Once you have a tool installed, we can dive into the individual metrics and start customizing based on the data",,,,,
ms,8,I would recommend starting with one of the most impactful variables – the innodb_buffer_pool_size,,,,,
ms,8,Compare the RAM and number of free pages on your instance to the total buffer pool size,,,,,
ms,8,"Based on these metrics, you can determine if you need to increase or decrease your overall buffer pool size setting",,,,,
ms,8,"Next, take a look at your metrics for the InnoDB Log File usage",,,,,
ms,8,The rule of thumb is that your log files should hold approximately one hour of data,,,,,
ms,8,"If you see that the data written to the log files hourly exceeds the total size of the log files, you would want to increase the innodb_log_file_size variable and restart MySQL",,,,,
ms,8,You could also verify with “SHOW ENGINE INNODB STATUS;” via the MySQL CLI to assist in calculating a good InnoDB log file size,,,,,
ms,8,"In SummaryWhile this is by no means a comprehensive article on MySQL 5.7 database tuning, the suggestions above should clear some of the low hanging fruit and get your system closer to an ideal setup",,,,,
ms,8,"As with all database tuning, your process should be an ongoing one based on current information",,,,,
ms,8,"Examine the settings proposed above, and implement if they make sense for your environment/workload",,,,,
ms,8,Install a good monitoring tool to give insight into the database (Percona Monitoring and Management is our suggestion),,,,,
ms,8,tay current on your monitoring graphs to determine other areas where you may need to tune,,,,,
ms,8,Related,,,,,
ms,8,AuthorBrian SumpterShare this postFacebookTwitterLinkedInEmailLeave a Reply Cancel reply,,,,,
ms,8,"How Can We Help? Percona's experts can maximize your application performance with our open source database support, managed services or consulting",,,,,
ms,8,Contact usSubscribeWant to get weekly updates listing the latest blog posts? Subscribe now and we'll send you an update every Friday at 1pm ET,,,,,
ms,8,Subscribe to our blog CategoriesMySQL(3355)Insight for DBAs(1528)Percona Software(1479)Percona Events(870)MongoDB(549)Insight for Developers(472)Benchmarks(340)Percona Live(332)Webinars(287)Cloud(276)PostgreSQL(176)Monitoring(164)MariaDB(157)Percona Services(138)ProxySQL(127)Security(125)Hardware and Storage(105)Storage Engine(52)Database Trends(46)Percona Announcements(10)  Percona Blog RSS Feed,,,,,
ms,8,Upcoming WebinarsThe Open Source Alternative to Paying for MongoDBWhy PostgreSQL Is Becoming A Migration Target For EnterpriseHow To Measure Linux Performance WrongConverting MongoDB to Percona Server for MongoDBMoving MongoDB to the Cloud: Strategies and Points To ConsiderAll Webinars,,,,,
ms,8,"»ServicesSupportManaged ServicesConsultingTrainingProductsMySQL SoftwareMongoDB SoftwarePostgreSQL DistributionKubernetesMonitoring & ManagementResourcesSolution BriefsWhite PapersWebinarsCase StudiesDatasheetsMoreBlogCommunity BlogTechnical Forum HelpAboutCustomersNewsroomAboutCareers Contact UsSales & General Inquiries (888) 316-9775 (USA) (208) 473-2904 (USA) +44 203 608 6727 (UK) 0-808-169-6490 (UK) 0-800-724-4569 (GER)MySQL, InnoDB, MariaDB and MongoDB are trademarks of their respective owners",,,,,
ms,8,Proudly running Percona Server for MySQL,,,,,
ms,8,Terms of Use |,,,,,
ms,8,Privacy |,,,,,
ms,8,Copyright |,,,,,
ms,8,LegalCopyright © 2006-2020 Percona LLC,,,,,
ms,8,,,,,,
ms,9,MySQL Performance Cheat Sheet | Severalnines,,,,,
ms,9,Login,,,,,
ms,9,Sign up,,,,,
ms,9,ProductClusterControl Free Community Edition,,,,,
ms,9,ClusterControl Enterprise Edition,,,,,
ms,9,Severalnines Labs,,,,,
ms,9,Download,,,,,
ms,9,Pricing Plans,,,,,
ms,9,ResourcesWebinars,,,,,
ms,9,Whitepapers,,,,,
ms,9,Tutorials,,,,,
ms,9,Trainings,,,,,
ms,9,ClusterControl Certification,,,,,
ms,9,SupportDocumentation,,,,,
ms,9,Community Help,,,,,
ms,9,ClusterControl on Slack,,,,,
ms,9,Knowledge Base,,,,,
ms,9,Blog,,,,,
ms,9,About usCompany,,,,,
ms,9,Careers,,,,,
ms,9,Customers,,,,,
ms,9,Partners,,,,,
ms,9,Contact us,,,,,
ms,9,Login / Sign Up,,,,,
ms,9,Subscribe for newsletter,,,,,
ms,9,Filters,,,,,
ms,9,Severalnines Database Blog,,,,,
ms,9,Back to Home Page,,,,,
ms,9,Clear all,,,,,
ms,9,Apply,,,,,
ms,9,Filters,,,,,
ms,9,Close Filters,,,,,
ms,9,Subscribe,,,,,
ms,9,Categories:,,,,,
ms,9,ClusterControl,,,,,
ms,9,Backup Management,,,,,
ms,9,Monitoring & Alerting,,,,,
ms,9,Deployment & Scaling,,,,,
ms,9,Upgrades & Patches,,,,,
ms,9,Security & Compliance,,,,,
ms,9,Operational Reporting,,,,,
ms,9,Configuration Management,,,,,
ms,9,Recovery & Repair,,,,,
ms,9,Performance Management,,,,,
ms,9,Cloud,,,,,
ms,9,Industry News & Events,,,,,
ms,9,Database - General,,,,,
ms,9,Technologies:,,,,,
ms,9,Docker,,,,,
ms,9,Galera Cluster,,,,,
ms,9,MariaDB,,,,,
ms,9,MongoDB,,,,,
ms,9,MySQL,,,,,
ms,9,MySQL NDB Cluster,,,,,
ms,9,PostgreSQL,,,,,
ms,9,TimescaleDB,,,,,
ms,9,Tags:,,,,,
ms,9,Home Page,,,,,
ms,9,MySQL Performance Cheat Sheet,,,,,
ms,9,Paul Namuag,,,,,
ms,9,"January 04, 2019",,,,,
ms,9,Severalnines,,,,,
ms,9,"April 06, 2020",,,,,
ms,9,Posted in:,,,,,
ms,9,ClusterControl,,,,,
ms,9,Configuration Management,,,,,
ms,9,Performance Management,,,,,
ms,9,MySQL,,,,,
ms,9,MySQL is extensive and has lots of areas to optimize and tweak for the desired performance,,,,,
ms,9,"Some changes can be performed dynamically, others require a server restart",,,,,
ms,9,"It is pretty common to find a MySQL installation with a default configuration, although the latter may not be appropriate per se from your workload and setup",,,,,
ms,9,,,,,,
ms,9,"Here are the key areas in MySQL which I have taken from different expert sources in the MySQL world, as well as our own experiences here at Severalnines",,,,,
ms,9,This blog would serve as your cheat sheet to tune performance and make your MySQL great again :-),,,,,
ms,9,Let’s take a look on these by outlining the key areas in MySQL,,,,,
ms,9,,,,,,
ms,9,System Variables,,,,,
ms,9,MySQL has lots of variables that you can consider to change,,,,,
ms,9,Some variables are dynamic which means they can be set using the SET statement,,,,,
ms,9,"Others require a server restart, after they are set in the configuration file (e",,,,,
ms,9,g,,,,,
ms,9,/etc/my,,,,,
ms,9,"cnf, etc/mysql/my",,,,,
ms,9,cnf),,,,,
ms,9,"However, I’ll go over the common things that are pretty common to tune to make the server optimized",,,,,
ms,9,,,,,,
ms,9,sort_buffer_size,,,,,
ms,9,"This variable controls how large your filesort buffer is, which means that whenever a query needs to sort the rows, the value of this variable is used to limit the size that needs to be allocated",,,,,
ms,9,"Take note that this variable is per-query that is processed (or per-connection) basis, which means that it would be a memory hungry when you set this higher and if you have multiple connections that requires sorting of your rows",,,,,
ms,9,"However, you can monitor your needs by checking the global status variable Sort_merge_passes",,,,,
ms,9,"If this value is large, you should consider increasing the value of the sort_buffer_size system variable",,,,,
ms,9,"Otherwise, take it to the moderate limit that you need",,,,,
ms,9,"If you set this too low or if you have large queries to process, the effect of sorting your rows can be slower than expected because data is retrieved randomly doing disk dives",,,,,
ms,9,This can cause performance degradation,,,,,
ms,9,"However, it is best to fix your queries",,,,,
ms,9,"Otherwise, if your application is designed to pull large queries and requires sorting, then it is efficient to use tools that handles query caching like Redis",,,,,
ms,9,"By default, in MySQL 8.0, the current value set is 256 KiB",,,,,
ms,9,Set this accordingly only when you have queries that are heavily using or calling sorts,,,,,
ms,9,,,,,,
ms,9,read_buffer_size,,,,,
ms,9,"MySQL documentation mentions that for each request that performs a sequential scan of a table, it allocates a read buffer",,,,,
ms,9,The read_buffer_size system variable determines the buffer size,,,,,
ms,9,"It is also useful for MyISAM, but this variable affects all storage engines as well",,,,,
ms,9,"For MEMORY tables, it is use to determine the memory block size",,,,,
ms,9,,,,,,
ms,9,"Basically, each thread that does a sequential scan for a MyISAM table allocates a buffer of this size (in bytes) for each table it scans",,,,,
ms,9,"It does applies for all storage engines (that includes InnoDB) as well, so it’s helpful for queries that are sorting rows using ORDER BY and caching its indexes in a temporary file",,,,,
ms,9,"If you do many sequential scans, bulk insert into partition tables, caching results of nested queries, then consider increasing its value",,,,,
ms,9,The value of this variable should be a multiple of 4KB,,,,,
ms,9,"If it is set to a value that is not a multiple of 4KB, its value will be rounded down to the nearest multiple of 4KB",,,,,
ms,9,Take into account that setting this to a higher value will consume a large chunk of your server’s memory,,,,,
ms,9,I suggest not to use this without proper benchmarking and monitoring of your environment,,,,,
ms,9,,,,,,
ms,9,read_rnd_buffer_size,,,,,
ms,9,"This variable deals with reading rows from a MyISAM table in sorted order following a key-sorting operation, the rows are read through this buffer to avoid disk seeks",,,,,
ms,9,"The documentation says, when reading rows in an arbitrary sequence or from a MyISAM table in sorted order following a key-sorting operation, the rows are read through this buffer (and determined through this buffer size) to avoid disk seeks",,,,,
ms,9,Setting the variable to a large value can improve ORDER BY performance by quite a lot,,,,,
ms,9,"However, this is a buffer allocated for each client, so you should not set the global variable to a large value",,,,,
ms,9,"Instead, change the session variable only from within those clients that need to run large queries",,,,,
ms,9,"However, you should take into account that this does not apply to MariaDB, especially when taking advantage of MRR",,,,,
ms,9,MariaDB uses mrr_buffer_size while MySQL uses read_buffer_size read_rnd_buffer_size,,,,,
ms,9,,,,,,
ms,9,join_buffer_size,,,,,
ms,9,"By default, value is of 256K",,,,,
ms,9,"The minimum size of the buffer that is used for plain index scans, range index scans, and joins that do not use indexes and thus perform full table scans",,,,,
ms,9,Also used by the BKA optimization (which is disabled by default),,,,,
ms,9,Increase its value to get faster full joins when adding indexes is not possible,,,,,
ms,9,Caveat though might be memory issues if you set this too high,,,,,
ms,9,Remember that one join buffer is allocated for each full join between two tables,,,,,
ms,9,"For a complex join between several tables for which indexes are not used, multiple join buffers might be necessary",,,,,
ms,9,Best left low globally and set high in sessions (by using SET SESSION syntax) that require large full joins,,,,,
ms,9,"In 64-bit platforms, Windows truncates values above 4GB to 4GB-1 with a warning",1,5283,join_buffer_size,P <= 4GB,"Bits = 64, OS = Windows"
ms,9,,,,,,
ms,9,max_heap_table_size,,,,,
ms,9,This is the maximum size in bytes for user-created MEMORY tables are permitted to grow,,,,,
ms,9,This is helpful when your application is dealing with MEMORY storage engine tables,,,,,
ms,9,Setting the variable while the server is active has no effect on existing tables unless they are recreated or altered,,,,,
ms,9,The smaller of max_heap_table_size and tmp_table_size also limits internal in-memory tables,,,,,
ms,9,"This variable is also in conjunction with tmp_table_size to limit the size of internal in-memory tables (this differs from the tables created explicitly as Engine=MEMORY as it only applies max_heap_table_size), whichever is smaller is applied between the two",,,,,
ms,9,,,,,,
ms,9,tmp_table_size,,,,,
ms,9,The largest size for temporary tables in-memory (not MEMORY tables) although if max_heap_table_size is smaller the lower limit will apply,,,,,
ms,9,"If an in-memory temporary table exceeds the limit, MySQL automatically converts it to an on-disk temporary table",,,,,
ms,9,Increase the value of tmp_table_size (and max_heap_table_size if necessary) if you do many advanced GROUP BY queries and you have large available memory space,,,,,
ms,9,You can compare the number of internal on-disk temporary tables created to the total number of internal temporary tables created by comparing the values of the Created_tmp_disk_tables and Created_tmp_tables variables,,,,,
ms,9,"In ClusterControl, you can monitor this via Dashboard -> Temporary Objects graph",,,,,
ms,9,,,,,,
ms,9,table_open_cache,,,,,
ms,9,You can increase the value of this variable if you have large number of tables that are frequently accessed in your data set,,,,,
ms,9,"It will be applied for all threads, meaning per connection basis",,,,,
ms,9,The value indicates the maximum number of tables the server can keep open in any one table cache instance,,,,,
ms,9,"Although increasing this value increases the number of file descriptors that mysqld requires, so you might as well consider checking your open_files_limit value or check how large is the SOFT and HARD limit set in your *nix operating system",,,,,
ms,9,You can monitor this whether you need to increase the table cache by checking the Opened_tables status variable,,,,,
ms,9,"If the value of Opened_tables is large and you do not use FLUSH TABLES often (which just forces all tables to be closed and reopened), then you should increase the value of the table_open_cache variable",,,,,
ms,9,"If you have a small value for table_open_cache, and a high number of tables are frequently accessed, this can affect the performance of your server",,,,,
ms,9,"If you notice many entries in the MySQL processlistwith status “Opening tables” or “Closing tables”, then it’s time to adjust the value of this variable but take note of the caveat mentioned earlier",,,,,
ms,9,"In ClusterControl, you can check this under Dashboards -> Table Open Cache Status or Dashboards -> Open Tables",,,,,
ms,9,You can check it here for more info,,,,,
ms,9,,,,,,
ms,9,table_open_cache_instances,,,,,
ms,9,"Setting this variable would help improve scalability, and of course, performance which would reduce contention among sessions",,,,,
ms,9,The value you set here limits the number of open tables cache instances,,,,,
ms,9,The open tables cache can be partitioned into several smaller cache instances of size table_open_cache / table_open_cache_instances,,,,,
ms,9,A session needs to lock only one instance to access it for DML statements,,,,,
ms,9,"This segments cache access among instances, permitting higher performance for operations that use the cache when there are many sessions accessing tables",,,,,
ms,9,"(DDL statements still require a lock on the entire cache, but such statements are much less frequent than DML statements",,,,,
ms,9,A value of 8 or 16 is recommended on systems that routinely use 16 or more cores,1,5323,table_open_cache_instances,"P in {8, 16}",Cores >= 16
ms,9,,,,,,
ms,9,table_definition_cache,,,,,
ms,9,Cache table definitions i,,,,,
ms,9,e,,,,,
ms,9,this is where the CREATE TABLE are cached to speed up opening of tables and only one entry per table,,,,,
ms,9,It would be reasonable to increase the value if you have large number of tables,,,,,
ms,9,"The table definition cache takes less space and does not use file descriptors, unlike the normal table cache",,,,,
ms,9,"Peter Zaitsev of Percona suggest if you can try the setting of the formula below,",,,,,
ms,9,The number of user-defined tables + 10% unless 50K+ tables,1,5329,table_definition_cache,P = tables * 1.1,Tables <= 50000
ms,9,But take note that the default value is based on the following formula capped to a limit of 2000,1,5329,table_definition_cache,P <= 2000,
ms,9,,,,,,
ms,9,"MIN(400 + table_open_cache / 2, 2000)",,,,,
ms,9,"So in case you have larger number of tables compared to the default, then it’s reasonable you increase its value",,,,,
ms,9,"Take into account that with InnoDB, this variable is used as a soft limit of the number of open table instances for the data dictionary cache",,,,,
ms,9,It will apply the LRU mechanism once it exceeds the current value of this variable,,,,,
ms,9,The limit helps address situations in which significant amounts of memory would be used to cache rarely used table instances until the next server restart,,,,,
ms,9,"Hence, parent and child table instances with foreign key relationships are not placed on the LRU list and could impose a higher than the limit defined by table_definition_cache and are not subject to eviction in memory during LRU",,,,,
ms,9,"Additionally, the table_definition_cache defines a soft limit for the number of InnoDB file-per-table tablespaces that can be open at one time, which is also controlled by innodb_open_files and in fact, the highest setting between these variables is used, if both are set",,,,,
ms,9,"If neither variable is set, table_definition_cache, which has a higher default value, is used",,,,,
ms,9,"If the number of open tablespace file handles exceeds the limit defined by table_definition_cache or innodb_open_files, the LRU mechanism searches the tablespace file LRU list for files that are fully flushed and are not currently being extended",,,,,
ms,9,This process is performed each time a new tablespace is opened,,,,,
ms,9,"If there are no “inactive” tablespaces, no tablespace files are closed",,,,,
ms,9,So keep this in mind,,,,,
ms,9,,,,,,
ms,9,max_allowed_packet,,,,,
ms,9,This is the per-connection maximum size of an SQL query or row returned,,,,,
ms,9,The value was last increased in MySQL 5.6,,,,,
ms,9,"However in MySQL 8.0 (at least on 8.0.3), the current default value is 64 MiB",,,,,
ms,9,"You might consider adjusting this if you have large BLOB rows that need to be pulled out (or read), otherwise you can leave this default settings with 8.0 but in older versions, default is 4 MiB so you might take care of that in case you encounter ER_NET_PACKET_TOO_LARGE error",1,5352,max_allowed_packet,P = 64 MiB,
ms,9,The largest possible packet that can be transmitted to or from a MySQL 8.0 server or client is 1GB,,,,,
ms,9,,,,,,
ms,9,skip_name_resolve,,,,,
ms,9,MySQL server handles incoming connections by hostname resolution,,,,,
ms,9,"By default, MySQL does not disable any hostname resolution which means it will perform a DNS lookups, and by chance, if DNS is slow, it could be the cause of awful performance to your database",,,,,
ms,9,Consider turning this on if you do not need DNS resolution and take advantage of improving your MySQL performance when this DNS lookup is disabled,1,5359,skip_name_resolve,P = on,
ms,9,"Take into account that this variable is not dynamic, therefore a server restart is required if you set this in your MySQL config file",,,,,
ms,9,"You may optionally start mysqld daemon, passing --skip-name-resolve option to enable this",,,,,
ms,9,,,,,,
ms,9,max_connections,,,,,
ms,9,This is the number of permitted connections for your MySQL server,,,,,
ms,9,"If you find out the error in MySQL ‘Too many connections’, you might consider setting it higher",,,,,
ms,9,"By default, the value of 151 isn’t enough especially on a production database, and considering that you have greater resources of the server (do not waste your server resources especially if it’s a dedicated MySQL server)",,,,,
ms,9,"However, you must have enough file descriptors otherwise you will run out of them",,,,,
ms,9,"In that case, consider adjusting your SOFT and HARD limit of your *nix operating systems and set a higher value of open_files_limit in MySQL (5000 is the default limit)",,,,,
ms,9,"Take into account that it is very frequent that the application does not close connections to the database correctly, and setting a high max_connections can result to some unresponsive or high load of your server",,,,,
ms,9,Using a connection pool at the application level can help resolve the issue here,,,,,
ms,9,,,,,,
ms,9,thread_cache_size,,,,,
ms,9,This is the cache to prevent excessive thread creation,,,,,
ms,9,"When a client disconnects, the client's threads are put in the cache if there are fewer than thread_cache_size threads there",,,,,
ms,9,"Requests for threads are satisfied by reusing threads taken from the cache if possible, and only when the cache is empty is a new thread created",,,,,
ms,9,This variable can be increased to improve performance if you have a lot of new connections,,,,,
ms,9,"Normally, this does not provide a notable performance improvement if you have a good thread implementation",,,,,
ms,9,"However, if your server sees hundreds of connections per second you should normally set thread_cache_size high enough so that most new connections use cached threads",,,,,
ms,9,"By examining the difference between the Connections and Threads_created status variables, you can see how efficient the thread cache is",,,,,
ms,9,"Using the formula stated in the documentation, 8 + (max_connections / 100) is good enough",1,5381,thread_cache_size,P = 8 + (max_connections / 100),
ms,9,,,,,,
ms,9,query_cache_size,,,,,
ms,9,"For some setup, this variable is their worst enemy",,,,,
ms,9,"For some systems experiencing high load and are busy with high reads, this variable will bog you down",,,,,
ms,9,There has been benchmarks that were well-and-tested by e,,,,,
ms,9,g,,,,,
ms,9,Percona,,,,,
ms,9,This variable must be set to 0 along with query_cache_type = 0 as well to turn it off,1,5385,query_cache_size,P = 0,
ms,9,"The good news in MySQL 8.0 is that, the MySQL Team has stopped supporting this, as this variable can really cause performance issues",,,,,
ms,9,I have to agree on their blog that it is unlikely to improve predictability of performance,,,,,
ms,9,"If you are engaged to use query caching, I suggest to use Redis or ProxySQL",,,,,
ms,9,,,,,,
ms,9,Storage Engine - InnoDB,,,,,
ms,9,InnoDB is an ACID-compliant storage engine with various features to offer along with foreign key support (Declarative Referential Integrity),,,,,
ms,9,This has a lot of things to say here but certain variables to consider for tuning:,,,,,
ms,9,innodb_buffer_pool_size,,,,,
ms,9,This variable acts like a key buffer of MyISAM but it has lots of things to offer,,,,,
ms,9,"Since InnoDB relies heavily on the buffer pool, you would consider setting this value typically to 70%-80% of your server’s memory",1,5399,innodb_buffer_pool_size;innodb_buffer_pool_size,P >= 0.7 * memory; P <= 0.8 * memory,
ms,9,"It is favorable also that you have a larger memory space than your data set, and setting a higher value for your buffer pool but not by too much",,,,,
ms,9,"In ClusterControl, this can be monitored using our Dashboards -> InnoDB Metrics -> InnoDB Buffer Pool Pages graph",,,,,
ms,9,You may also monitor this with SHOW GLOBAL STATUS using the variables Innodb_buffer_pool_pages*,,,,,
ms,9,,,,,,
ms,9,innodb_buffer_pool_instances,,,,,
ms,9,"For your concurrency workload, setting this variable can improve concurrency and reduce contention as different threads of read/write to cached pages",,,,,
ms,9,Minimum innodb_buffer_pool_instances should be lie between 1 (minimum) & 64 (maximum),,,,,
ms,9,"Each page that is stored in or read from the buffer pool is assigned to one of the buffer pool instances randomly, using a hashing function",,,,,
ms,9,"Each buffer pool manages its own free lists, flush lists, LRUs, and all other data structures connected to a buffer pool, and is protected by its own buffer pool mutex",,,,,
ms,9,Take note that this option takes effect only when innodb_buffer_pool_size >= 1GiB and its size is divided among the buffer pool instances,,,,,
ms,9,,,,,,
ms,9,innodb_log_file_size,,,,,
ms,9,This variable is the log file in a log group,,,,,
ms,9,The combined size of log files (innodb_log_file_size * innodb_log_files_in_group) cannot exceed a maximum value that is slightly less than 512GB,,,,,
ms,9,"According to Vadim, a bigger log file size is better for performance, but it has a drawback (a significant one) that you need to worry about: the recovery time after a crash",,,,,
ms,9,You need to balance recovery time in the rare event of a crash recovery versus maximizing throughput during peak operations,,,,,
ms,9,This limitation can translate to a 20x longer crash recovery process!,,,,,
ms,9,"To elaborate it, a larger value would be good for InnoDB transaction logs and are crucial for good and stable write performance",,,,,
ms,9,"The larger the value, the less checkpoint flush activity is required in the buffer pool, saving disk I/O",,,,,
ms,9,"However, the recovery process is pretty slow once your database was abnormally shutdown (crash or killed, either OOM or accidental)",,,,,
ms,9,"Ideally, you can have 1-2GiB in production but of course you can adjust this",1,,innodb_log_file_size;innodb_log_file_size,P >= 1Gib; P <= 2GiB,
ms,9,Benchmarking this changes can be a great advantage to see how it performs especially during after a crash,,,,,
ms,9,,,,,,
ms,9,innodb_log_buffer_size,,,,,
ms,9,"To save disk I/O, InnoDB’s writes the change data into lt’s log buffer and it uses the value of innodb_log_buffer_size having a default value of 8MiB",,,,,
ms,9,This is beneficial especially for large transactions as it does not need to write the log of changes to disk before transaction commit,,,,,
ms,9,"If your write traffic is too high (inserts, deletes, updates), making the buffer larger saves disk I/O",,,,,
ms,9,,,,,,
ms,9,innodb_flush_log_at_trx_commit,,,,,
ms,9,When innodb_flush_log_at_trx_commit is set to 1 the log buffer is flushed on every transaction commit to the log file on disk and provides maximum data integrity but it also has performance impact,,,,,
ms,9,Setting it to 2 means log buffer is flushed to OS file cache on every transaction commit,,,,,
ms,9,"The implication of 2 is optimal and improves performance if you can relax your ACID requirements, and can afford to lose transactions for the last second or two in case of OS crashes",1,5431,innodb_flush_log_at_trx_commit,P = 2,
ms,9,,,,,,
ms,9,innodb_thread_concurrency,,,,,
ms,9,"With improvements to the InnoDB engine, it is recommended to allow the engine to control the concurrency by keeping it to default value (which is zero)",,,,,
ms,9,"If you see concurrency issues, you can tune this variable",,,,,
ms,9,A recommended value is 2 times the number of CPUs plus the number of disks,1,5435,innodb_thread_concurrency,P = 2 * cores + disks,
ms,9,It’s dynamic variable means it can set without restarting MySQL server,,,,,
ms,9,,,,,,
ms,9,innodb_flush_method,,,,,
ms,9,This variable though must be tried and tested on which hardware fits you best,,,,,
ms,9,"If you are using a RAID with battery-backed cache, DIRECT_IO helps relieve I/O pressure",1,5441,innodb_flush_method,P = DIRECT_IO,RAID + battery
ms,9,Direct I/O is not cached so it avoids double buffering with buffer pool and filesystem cache,,,,,
ms,9,"If your disk is stored in SAN, O_DSYNC might be faster for a read-heavy workload with mostly SELECT statements",1,5441,innodb_flush_method,P = O_DSYNC,"SAN, read-heavy"
ms,9,,,,,,
ms,9,innodb_file_per_table,,,,,
ms,9,innodb_file_per_table is ON by default from MySQL 5.6,,,,,
ms,9,This is usually recommended as it avoids having a huge shared tablespace and as it allows you to reclaim space when you drop or truncate a table,,,,,
ms,9,Separate tablespace also benefits for Xtrabackup partial backup scheme,,,,,
ms,9,,,,,,
ms,9,innodb_stats_on_metadata,,,,,
ms,9,"This attempts to keep the percentage of dirty pages under control, and before the Innodb plugin, this was really the only way to tune dirty buffer flushing",,,,,
ms,9,"However, I have seen servers with 3% dirty buffers and they are hitting their max checkpoint age",,,,,
ms,9,"The way this increases dirty buffer flushing also doesn’t scale well on high io subsystems, it effectively just doubles the dirty buffer flushing per second when the % dirty pages exceeds this amount",,,,,
ms,9,,,,,,
ms,9,innodb_io_capacity,,,,,
ms,9,"This setting, in spite of all our grand hopes that it would allow Innodb to make better use of our IO in all operations, simply controls the amount of dirty page flushing per second (and other background tasks like read-ahead)",,,,,
ms,9,"Make this bigger, you flush more per second",,,,,
ms,9,"This does not adapt, it simply does that many iops every second if there are dirty buffers to flush",,,,,
ms,9,"It will effectively eliminate any optimization of IO consolidation if you have a low enough write workload (that is, dirty pages get flushed almost immediately, we might be better off without a transaction log in this case)",,,,,
ms,9,It also can quickly starve data reads and writes to the transaction log if you set this too high,,,,,
ms,9,,,,,,
ms,9,innodb_write_io_threads,,,,,
ms,9,Controls how many threads will have writes in progress to the disk,,,,,
ms,9,I’m not sure why this is still useful if you can use Linux native AIO,,,,,
ms,9,These can also be rendered useless by filesystems that don’t allow parallel writing to the same file by more than one thread (particularly if you have relatively few tables and/or use the global tablespaces),,,,,
ms,9,innodb_adaptive_flushing,,,,,
ms,9,Specifies whether to dynamically adjust the rate of flushing dirty pages in the InnoDB buffer pool based on the workload,,,,,
ms,9,Adjusting the flush rate dynamically is intended to avoid bursts of I/O activity,,,,,
ms,9,"Typically, this is enabled by default",,,,,
ms,9,"This variable, when enabled, tries to be smarter about flushing more aggressively based on the number of dirty pages and the rate of transaction log growth",,,,,
ms,9,,,,,,
ms,9,innodb_dedicated_server,,,,,
ms,9,This variable is new in MySQL 8.0 which is applied globally and requires a MySQL restart since it’s not a dynamic variable,,,,,
ms,9,"However, as documentation states that this variable is desired to be enabled only if your MySQL is running on a dedicated server",1,5474,innodb_dedicated_server,P = on,Dedicated server
ms,9,"Otherwise, do not enable this on a shared host or shares system resources with other applications",,,,,
ms,9,"When this is enabled, InnoDB will do an automatic configuration for the amount of memory detected for variables innodb_buffer_pool_size, innodb_log_file_size, innodb_flush_method",,,,,
ms,9,The downside only is that you cannot have the feasibility to apply your desired values on the detected variables mentioned,,,,,
ms,9,,,,,,
ms,9,MyISAM,,,,,
ms,9,key_buffer_size,,,,,
ms,9,"InnoDB is the default storage engine now of MySQL, the default for key_buffer_size can probably be decreased unless you are using MyISAM productively as part of your application (but who uses MyISAM in production now?)",,,,,
ms,9,I would suggest here to set perhaps 1% of RAM or 256 MiB at start if you have larger memory and dedicate the remaining memory for your OS cache and InnoDB buffer pool,1,5482,key_buffer_size,P = 0.01 * memory,
ms,9,,,,,,
ms,9,Other Provisions For Performance,,,,,
ms,9,slow_query_log,,,,,
ms,9,"Of course, this variable does not help boost your MySQL server",1,5487,slow_query_log,P = off,
ms,9,"However, this variable can help you out analyze slow performing queries",,,,,
ms,9,Value can be set to 0 or OFF to disable logging,,,,,
ms,9,Setting it to 1 or ON to enable this,,,,,
ms,9,The default value depends on whether the --slow_query_log option is given,,,,,
ms,9,"The destination for log output is controlled by the log_output system variable; if that value is NONE, no log entries are written even if the log is enabled",,,,,
ms,9,You might set the filename or destination of the query log file by setting the variable slow_query_log_file,,,,,
ms,9,,,,,,
ms,9,long_query_time,,,,,
ms,9,"If a query takes longer than this many seconds, the server increments the Slow_queries status variable",,,,,
ms,9,"If the slow query log is enabled, the query is logged to the slow query log file",,,,,
ms,9,"This value is measured in real time, not CPU time, so a query that is under the threshold on a lightly loaded system might be above the threshold on a heavily loaded one",,,,,
ms,9,"The minimum and default values of long_query_time are 0 and 10, respectively",,,,,
ms,9,"Take note also that if variable min_examined_row_limit is set > 0, it won’t log queries even if it takes too long if the number of rows returned are less than the value set in min_examined_row_limit",,,,,
ms,9,,,,,,
ms,9,"For more info on tuning your slow query logging, check the documentation here",,,,,
ms,9,,,,,,
ms,9,sync_binlog,,,,,
ms,9,This variable controls how often MySQL will sync binlogs to the disk,,,,,
ms,9,"By default (>=5.7.7), this is set to 1 which means it will sync to disk before transactions are committed",,,,,
ms,9,"However, this impose a negative impact on performance due to increased number of writes",,,,,
ms,9,But this is the safest setting if you want strictly ACID compliant along with your slaves,,,,,
ms,9,"Alternatively, you can set this to 0 if you want to disable disk synchronization and just rely on the OS to flush the binary log to disk from time to time",1,5505,sync_binlog,P = 0,
ms,9,"Setting it higher than 1 means the binlog is sync to disk after N binary log commit groups have been collected, where N is > 1",,,,,
ms,9,,,,,,
ms,9,Dump/Restore Buffer Pool,,,,,
ms,9,It is pretty common thing that your production database needs to warm up from a cold start/restart,,,,,
ms,9,"By dumping the current buffer pool before a restart, it would save the contents from the buffer pool and once it’s up, it’ll load the contents back into the buffer pool",,,,,
ms,9,"Thus, this avoids the need to warm up your database back to the cache",,,,,
ms,9,"Take note that, this version was since introduced in 5.6 but Percona Server 5.5 has it already available, just in case you wonder",,,,,
ms,9,"To enable this feature, set both variables innodb_buffer_pool_dump_at_shutdown = ON and innodb_buffer_pool_load_at_startup = ON",1,,innodb_buffer_pool_dump_at_shutdown;innodb_buffer_pool_load_at_startup,P = on; P = on,
ms,9,,,,,,
ms,9,Hardware,,,,,
ms,9,"We’re now in 2019, there has been a lot of new hardware improvements",,,,,
ms,9,"Typically, there’s no hard requirement that MySQL would require a specific hardware, but this depends on what you need the database to do",,,,,
ms,9,I would expect that you are not reading this blog because you are doing a test if it runs on an Intel Pentium 200 MHz,,,,,
ms,9,,,,,,
ms,9,"For CPU, faster processors with multiple cores will be optimal for MySQL in most recent versions at least since 5.6",,,,,
ms,9,Intel’s Xeon/Itanium processors can be expensive but tested for scalable and reliable computing platforms,,,,,
ms,9,Amazon has been shipping their EC2 instances running on ARM architecture,,,,,
ms,9,"Though I personally haven’t tried running or recall running MySQL on ARM architecture, there are benchmarks that had been made years ago",,,,,
ms,9,"Modern CPU’s can scale their frequencies up and down based on temperature, load, and OS power saving policies",,,,,
ms,9,"However, there’s a chance that your CPU settings in your Linux OS set to a different governor",,,,,
ms,9,You can check that out or set with “performance” governor by doing the following:,,,,,
ms,9,echo performance | sudo tee /sys/devices/system/cpu/cpu[0-9]*/cpufreq/scaling_governor,,,,,
ms,9,"For Memory, it is very important that your memory is large and can equate the size of your dataset",,,,,
ms,9,Ensure that you have swappiness = 1,1,,swappiness,P = 1,
ms,9,You can check it out by checking sysctl or checking the file in procfs,,,,,
ms,9,This is achieved by doing the following:,,,,,
ms,9,$ sysctl -e vm,,,,,
ms,9,swappiness,,,,,
ms,9,vm,,,,,
ms,9,swappiness = 1,,,,,
ms,9,Or setting it to a value of 1 as follows,,,,,
ms,9,$ sudo sysctl vm,,,,,
ms,9,swappiness=1,,,,,
ms,9,vm,,,,,
ms,9,swappiness = 1,,,,,
ms,9,Another great thing to consider for your Memory management is considering turning off THP (Transparrent Huge Pages),1,,THP,P = off,
ms,9,"In the past, I do recall we have some weird issues encountered with CPU utilization and thought it was due to disk I/O",,,,,
ms,9,"It turned out, the problem was with kernel khugepaged thread which allocates memory dynamically during runtime",,,,,
ms,9,"Not only this, during kernel goes for defragmentation, your memory will be quickly allocated as it passes it to THP",,,,,
ms,9,"Standard HugePages memory is pre-allocated at startup, and does not change during runtime",,,,,
ms,9,You can verify and disable this by doing the following:,,,,,
ms,9,$ cat /sys/kernel/mm/transparent_hugepage/enabled,,,,,
ms,9,"$ echo ""never"" > /sys/kernel/mm/transparent_hugepage/enabled",,,,,
ms,9,"For Disk, it is important that you have a good throughput",,,,,
ms,9,Using RAID10 is the best setup for a database with a battery backup unit,,,,,
ms,9,"With the advent of flash drives that offers high disk throughput and high disk I/O for read/writes, it is important that it can manage the high disk utilization and disk I/O",,,,,
ms,9,,,,,,
ms,9,Operating System,,,,,
ms,9,Most production systems running on MySQL runs on Linux,,,,,
ms,9,"It is because MySQL had been tested and benchmarked on Linux, and sounds that it’s the de facto standard for a MySQL installation",,,,,
ms,9,"However, of course, there’s nothing stopping you from using it on Unix or Windows platform",,,,,
ms,9,"It would be easier if your platform has been tested and there is a wide community to help, in case you experience some trouble",,,,,
ms,9,Most setups runs on RHEL/Centos/Fedora and Debian/Ubuntu systems,,,,,
ms,9,"In AWS, Amazon has their Amazon Linux which I see as well being used in production by some",,,,,
ms,9,,,,,,
ms,9,Most important to consider with your setup is that your file system is using either XFS or Ext4,,,,,
ms,9,"For sure, there are pros and cons between these two file systems but I won’t go to the details here",,,,,
ms,9,Some say XFS outperform Ext4 but there are reports as well that Ext4 outperforms XFS,,,,,
ms,9,ZFS is also coming out of the picture as a good candidate for an alternative file system,,,,,
ms,9,"Jervin Real (from Percona) has a great resource on this one, you can check this presentation during the ZFS conference",,,,,
ms,9,,,,,,
ms,9,External Links,,,,,
ms,9,https://developer,,,,,
ms,9,okta,,,,,
ms,9,com/blog/2015/05/22/tcmalloc,,,,,
ms,9,https://www,,,,,
ms,9,percona,,,,,
ms,9,com/blog/2012/07/05/impact-of-memory-allocators-on-mysql-performance/,,,,,
ms,9,https://www,,,,,
ms,9,percona,,,,,
ms,9,com/live/18/sessions/benchmark-noise-reduction-how-to-configure-your-machines-for-stable-results,,,,,
ms,9,https://zfs,,,,,
ms,9,datto,,,,,
ms,9,com/2018_slides/real,,,,,
ms,9,pdf,,,,,
ms,9,https://docs,,,,,
ms,9,oracle,,,,,
ms,9,com/en/database/oracle/oracle-database/12.2/ladbi/disabling-transparent-hugepages,,,,,
ms,9,html#GUID-02E9147D-D565-4AF8-B12A-8E6E9F74BEEA,,,,,
ms,9,Previous blog,,,,,
ms,9,Next blog,,,,,
ms,9,Related resources:,,,,,
ms,9,Technology,,,,,
ms,9,ClusterControl for MySQL,,,,,
ms,9,Blog,,,,,
ms,9,A Performance Cheat Sheet for MongoDB,,,,,
ms,9,Blog,,,,,
ms,9,A Performance Cheat Sheet for PostgreSQL,,,,,
ms,9,Next blog,,,,,
ms,9,read more by:,,,,,
ms,9,Paul Namuag,,,,,
ms,9,Paul Namuag has been able to work with various roles and is grateful to have a chance on different kinds of technologies for the past 18 years,,,,,
ms,9,He was a Graphic Artist and MS,,,,,
ms,9,et Developer and switched to open source technologies since 2005 and was a Web Developer working with LAMP stack,,,,,
ms,9,"After that, he was a Software Engineer/Game Engineer works with various companies developing for mobile or desktop and web applications",,,,,
ms,9,"Later in 2013, he switched roles to a MySQL Support Engineer then Remote DBA at Percona which he was able to get a chance to understand how big data, highly scalable, highly available application works",,,,,
ms,9,,,,,,
ms,9,More from This Author,,,,,
ms,9,How to Deploy MariaDB Cluster 10.5 for High Availability,,,,,
ms,9,"Dec 07, 2020",,,,,
ms,9,by Paul Namuag,,,,,
ms,9,This blog will guide you on how to achieve high availability with MariaDB Cluster 10.5 together with highlights of the features that were added in the release,,,,,
ms,9,,,,,,
ms,9,Severalnines,,,,,
ms,9,"December 07, 2020",,,,,
ms,9,A Look at the Percona Toolkit,,,,,
ms,9,"Nov 25, 2020",,,,,
ms,9,by Paul Namuag,,,,,
ms,9,The Percona Toolkit is a set of tools to help DBAs efficiently perform their daily routine duties,,,,,
ms,9,This blog will show you how to use these tools (and when to be extra cautious),,,,,
ms,9,,,,,,
ms,9,Severalnines,,,,,
ms,9,"November 25, 2020",,,,,
ms,9,An Overview of the Percona MongoDB Kubernetes Operator,,,,,
ms,9,"Nov 12, 2020",,,,,
ms,9,by Paul Namuag,,,,,
ms,9,Percona's Kubernetes Operator for MongoDB helps manage the scalability and high-availability of deployment,,,,,
ms,9,This blog goes over a simple setup that can be run on-prem and showcases how feasible this operator is when managing Percona Server for MongoDB,,,,,
ms,9,,,,,,
ms,9,Severalnines,,,,,
ms,9,"November 13, 2020",,,,,
ms,9,View the discussion thread,,,,,
ms,9,,,,,,
ms,9,ClusterControl,,,,,
ms,9,The only management system you’ll ever need to take control of your open source database infrastructure,,,,,
ms,9,,,,,,
ms,9,Learn more,,,,,
ms,9,Products,,,,,
ms,9,Full-Ops Management,,,,,
ms,9,Configuration Management,,,,,
ms,9,Database Backups,,,,,
ms,9,ResourcesDatabase Blog,,,,,
ms,9,Whitepapers,,,,,
ms,9,Tutorials,,,,,
ms,9,Webinars,,,,,
ms,9,Trainings,,,,,
ms,9,Certification,,,,,
ms,9,SupportGet Support,,,,,
ms,9,ClusterControl Documentation,,,,,
ms,9,Backup Ninja Documentation,,,,,
ms,9,ClusterControl on Slack,,,,,
ms,9,BlogMySQL,,,,,
ms,9,PostgreSQL,,,,,
ms,9,MariaDB,,,,,
ms,9,Galera Cluster,,,,,
ms,9,MongoDB,,,,,
ms,9,TimescaleDB,,,,,
ms,9,MySQL NDB Cluster,,,,,
ms,9,Docker,,,,,
ms,9,About usCareers,,,,,
ms,9,Customers,,,,,
ms,9,Partners,,,,,
ms,9,Contact us,,,,,
ms,9,Sign up for Planets9s,,,,,
ms,9,Your e-mail *,,,,,
ms,9,© Copyright 2014-2020 Severalnines AB,,,,,
ms,9,All rights reserved,,,,,
ms,9,,,,,,
ms,9,Website Policies,,,,,
ms,9,Sitemap,,,,,
ms,10,MySQL :: MySQL 8.0 Reference Manual :: 8 Optimization,,,,,
ms,10,Contact MySQL,,,,,
ms,10,|,,,,,
ms,10,Login  |,,,,,
ms,10,Register,,,,,
ms,10,The world's most popular open source database,,,,,
ms,10,MySQL,,,,,
ms,10,com,,,,,
ms,10,Downloads,,,,,
ms,10,Documentation,,,,,
ms,10,Developer Zone,,,,,
ms,10,Developer Zone,,,,,
ms,10,Downloads,,,,,
ms,10,MySQL,,,,,
ms,10,com,,,,,
ms,10,Documentation,,,,,
ms,10,MySQL Server,,,,,
ms,10,MySQL Enterprise,,,,,
ms,10,Workbench,,,,,
ms,10,InnoDB Cluster,,,,,
ms,10,MySQL NDB Cluster,,,,,
ms,10,Connectors,,,,,
ms,10,More,,,,,
ms,10,MySQL,,,,,
ms,10,com,,,,,
ms,10,Downloads,,,,,
ms,10,Developer Zone,,,,,
ms,10,Section Menu:,,,,,
ms,10,Documentation Home,,,,,
ms,10,MySQL 8.0 Reference Manual,,,,,
ms,10,Preface and Legal Notices,,,,,
ms,10,General Information,,,,,
ms,10,Installing and Upgrading MySQL,,,,,
ms,10,Tutorial,,,,,
ms,10,MySQL Programs,,,,,
ms,10,MySQL Server Administration,,,,,
ms,10,Security,,,,,
ms,10,Backup and Recovery,,,,,
ms,10,Optimization,,,,,
ms,10,Optimization Overview,,,,,
ms,10,Optimizing SQL Statements,,,,,
ms,10,Optimizing SELECT Statements,,,,,
ms,10,WHERE Clause Optimization,,,,,
ms,10,Range Optimization,,,,,
ms,10,Index Merge Optimization,,,,,
ms,10,Hash Join Optimization,,,,,
ms,10,Engine Condition Pushdown Optimization,,,,,
ms,10,Index Condition Pushdown Optimization,,,,,
ms,10,Nested-Loop Join Algorithms,,,,,
ms,10,Nested Join Optimization,,,,,
ms,10,Outer Join Optimization,,,,,
ms,10,Outer Join Simplification,,,,,
ms,10,Multi-Range Read Optimization,,,,,
ms,10,Block Nested-Loop and Batched Key Access Joins,,,,,
ms,10,Condition Filtering,,,,,
ms,10,Constant-Folding Optimization,,,,,
ms,10,IS NULL Optimization,,,,,
ms,10,ORDER BY Optimization,,,,,
ms,10,GROUP BY Optimization,,,,,
ms,10,DISTINCT Optimization,,,,,
ms,10,LIMIT Query Optimization,,,,,
ms,10,Function Call Optimization,,,,,
ms,10,Window Function Optimization,,,,,
ms,10,Row Constructor Expression Optimization,,,,,
ms,10,Avoiding Full Table Scans,,,,,
ms,10,"Optimizing Subqueries, Derived Tables, View References, and Common Table",,,,,
ms,10,Expressions,,,,,
ms,10,Optimizing IN and EXISTS Subquery Predicates with Semijoin,,,,,
ms,10,Transformations,,,,,
ms,10,Optimizing Subqueries with Materialization,,,,,
ms,10,Optimizing Subqueries with the EXISTS Strategy,,,,,
ms,10,"Optimizing Derived Tables, View References, and Common Table Expressions",,,,,
ms,10,with Merging or Materialization,,,,,
ms,10,Derived Condition Pushdown Optimization,,,,,
ms,10,Optimizing INFORMATION_SCHEMA Queries,,,,,
ms,10,Optimizing Performance Schema Queries,,,,,
ms,10,Optimizing Data Change Statements,,,,,
ms,10,Optimizing INSERT Statements,,,,,
ms,10,Optimizing UPDATE Statements,,,,,
ms,10,Optimizing DELETE Statements,,,,,
ms,10,Optimizing Database Privileges,,,,,
ms,10,Other Optimization Tips,,,,,
ms,10,Optimization and Indexes,,,,,
ms,10,How MySQL Uses Indexes,,,,,
ms,10,Primary Key Optimization,,,,,
ms,10,SPATIAL Index Optimization,,,,,
ms,10,Foreign Key Optimization,,,,,
ms,10,Column Indexes,,,,,
ms,10,Multiple-Column Indexes,,,,,
ms,10,Verifying Index Usage,,,,,
ms,10,InnoDB and MyISAM Index Statistics Collection,,,,,
ms,10,Comparison of B-Tree and Hash Indexes,,,,,
ms,10,Use of Index Extensions,,,,,
ms,10,Optimizer Use of Generated Column Indexes,,,,,
ms,10,Invisible Indexes,,,,,
ms,10,Descending Indexes,,,,,
ms,10,Indexed Lookups from TIMESTAMP Columns,,,,,
ms,10,Optimizing Database Structure,,,,,
ms,10,Optimizing Data Size,,,,,
ms,10,Optimizing MySQL Data Types,,,,,
ms,10,Optimizing for Numeric Data,,,,,
ms,10,Optimizing for Character and String Types,,,,,
ms,10,Optimizing for BLOB Types,,,,,
ms,10,Optimizing for Many Tables,,,,,
ms,10,How MySQL Opens and Closes Tables,,,,,
ms,10,Disadvantages of Creating Many Tables in the Same Database,,,,,
ms,10,Internal Temporary Table Use in MySQL,,,,,
ms,10,Limits on Number of Databases and Tables,,,,,
ms,10,Limits on Table Size,,,,,
ms,10,Limits on Table Column Count and Row Size,,,,,
ms,10,Optimizing for InnoDB Tables,,,,,
ms,10,Optimizing Storage Layout for InnoDB Tables,,,,,
ms,10,Optimizing InnoDB Transaction Management,,,,,
ms,10,Optimizing InnoDB Read-Only Transactions,,,,,
ms,10,Optimizing InnoDB Redo Logging,,,,,
ms,10,Bulk Data Loading for InnoDB Tables,,,,,
ms,10,Optimizing InnoDB Queries,,,,,
ms,10,Optimizing InnoDB DDL Operations,,,,,
ms,10,Optimizing InnoDB Disk I/O,,,,,
ms,10,Optimizing InnoDB Configuration Variables,,,,,
ms,10,Optimizing InnoDB for Systems with Many Tables,,,,,
ms,10,Optimizing for MyISAM Tables,,,,,
ms,10,Optimizing MyISAM Queries,,,,,
ms,10,Bulk Data Loading for MyISAM Tables,,,,,
ms,10,Optimizing REPAIR TABLE Statements,,,,,
ms,10,Optimizing for MEMORY Tables,,,,,
ms,10,Understanding the Query Execution Plan,,,,,
ms,10,Optimizing Queries with EXPLAIN,,,,,
ms,10,EXPLAIN Output Format,,,,,
ms,10,Extended EXPLAIN Output Format,,,,,
ms,10,Obtaining Execution Plan Information for a Named Connection,,,,,
ms,10,Estimating Query Performance,,,,,
ms,10,Controlling the Query Optimizer,,,,,
ms,10,Controlling Query Plan Evaluation,,,,,
ms,10,Switchable Optimizations,,,,,
ms,10,Optimizer Hints,,,,,
ms,10,Index Hints,,,,,
ms,10,The Optimizer Cost Model,,,,,
ms,10,Optimizer Statistics,,,,,
ms,10,Buffering and Caching,,,,,
ms,10,InnoDB Buffer Pool Optimization,,,,,
ms,10,The MyISAM Key Cache,,,,,
ms,10,Shared Key Cache Access,,,,,
ms,10,Multiple Key Caches,,,,,
ms,10,Midpoint Insertion Strategy,,,,,
ms,10,Index Preloading,,,,,
ms,10,Key Cache Block Size,,,,,
ms,10,Restructuring a Key Cache,,,,,
ms,10,Caching of Prepared Statements and Stored Programs,,,,,
ms,10,Optimizing Locking Operations,,,,,
ms,10,Internal Locking Methods,,,,,
ms,10,Table Locking Issues,,,,,
ms,10,Concurrent Inserts,,,,,
ms,10,Metadata Locking,,,,,
ms,10,External Locking,,,,,
ms,10,Optimizing the MySQL Server,,,,,
ms,10,Optimizing Disk I/O,,,,,
ms,10,Using Symbolic Links,,,,,
ms,10,Using Symbolic Links for Databases on Unix,,,,,
ms,10,Using Symbolic Links for MyISAM Tables on Unix,,,,,
ms,10,Using Symbolic Links for Databases on Windows,,,,,
ms,10,Optimizing Memory Use,,,,,
ms,10,How MySQL Uses Memory,,,,,
ms,10,Enabling Large Page Support,,,,,
ms,10,Measuring Performance (Benchmarking),,,,,
ms,10,Measuring the Speed of Expressions and Functions,,,,,
ms,10,Using Your Own Benchmarks,,,,,
ms,10,Measuring Performance with performance_schema,,,,,
ms,10,Examining Server Thread (Process) Information,,,,,
ms,10,Accessing the Process List,,,,,
ms,10,Thread Command Values,,,,,
ms,10,General Thread States,,,,,
ms,10,Replication Source Thread States,,,,,
ms,10,Replication I/O Thread States,,,,,
ms,10,Replication SQL Thread States,,,,,
ms,10,Replication Connection Thread States,,,,,
ms,10,NDB Cluster Thread States,,,,,
ms,10,Event Scheduler Thread States,,,,,
ms,10,Language Structure,,,,,
ms,10,"Character Sets, Collations, Unicode",,,,,
ms,10,Data Types,,,,,
ms,10,Functions and Operators,,,,,
ms,10,SQL Statements,,,,,
ms,10,MySQL Data Dictionary,,,,,
ms,10,The InnoDB Storage Engine,,,,,
ms,10,Alternative Storage Engines,,,,,
ms,10,Replication,,,,,
ms,10,Group Replication,,,,,
ms,10,MySQL Shell,,,,,
ms,10,Using MySQL as a Document Store,,,,,
ms,10,InnoDB Cluster,,,,,
ms,10,InnoDB ReplicaSet,,,,,
ms,10,MySQL NDB Cluster 8.0,,,,,
ms,10,Partitioning,,,,,
ms,10,Stored Objects,,,,,
ms,10,INFORMATION_SCHEMA Tables,,,,,
ms,10,MySQL Performance Schema,,,,,
ms,10,MySQL sys Schema,,,,,
ms,10,Connectors and APIs,,,,,
ms,10,MySQL Enterprise Edition,,,,,
ms,10,MySQL Workbench,,,,,
ms,10,MySQL on the OCI Marketplace,,,,,
ms,10,MySQL 8.0 Frequently Asked Questions,,,,,
ms,10,Error Messages and Common Problems,,,,,
ms,10,Indexes,,,,,
ms,10,MySQL Glossary,,,,,
ms,10,Related Documentation,,,,,
ms,10,MySQL 8.0 Release Notes,,,,,
ms,10,MySQL 8.0 Source Code Documentation,,,,,
ms,10,Download,,,,,
ms,10,this Manual,,,,,
ms,10,PDF (US Ltr),,,,,
ms,10,- 40.5Mb,,,,,
ms,10,PDF (A4),,,,,
ms,10,- 40.5Mb,,,,,
ms,10,PDF (RPM),,,,,
ms,10,- 39.8Mb,,,,,
ms,10,HTML Download (TGZ),,,,,
ms,10,- 10.5Mb,,,,,
ms,10,HTML Download (Zip),,,,,
ms,10,- 10.5Mb,,,,,
ms,10,HTML Download (RPM),,,,,
ms,10,- 9.1Mb,,,,,
ms,10,Man Pages (TGZ),,,,,
ms,10,- 244.2Kb,,,,,
ms,10,Man Pages (Zip),,,,,
ms,10,- 349.2Kb,,,,,
ms,10,Info (Gzip),,,,,
ms,10,- 3.9Mb,,,,,
ms,10,Info (Zip),,,,,
ms,10,- 3.9Mb,,,,,
ms,10,Excerpts from this Manual,,,,,
ms,10,MySQL Backup and Recovery,,,,,
ms,10,MySQL Globalization,,,,,
ms,10,MySQL Information Schema,,,,,
ms,10,MySQL Installation Guide,,,,,
ms,10,Security in MySQL,,,,,
ms,10,Starting and Stopping MySQL,,,,,
ms,10,MySQL and Linux/Unix,,,,,
ms,10,MySQL and Windows,,,,,
ms,10,MySQL and OS X,,,,,
ms,10,MySQL and Solaris,,,,,
ms,10,Building MySQL from Source,,,,,
ms,10,MySQL Restrictions and Limitations,,,,,
ms,10,MySQL Partitioning,,,,,
ms,10,MySQL Secure Deployment Guide,,,,,
ms,10,MySQL Tutorial,,,,,
ms,10,MySQL Performance Schema,,,,,
ms,10,MySQL Replication,,,,,
ms,10,Using the MySQL Yum Repository,,,,,
ms,10,MySQL NDB Cluster 8.0,,,,,
ms,10,version 8.0,,,,,
ms,10,5.7,,,,,
ms,10,5.6,,,,,
ms,10,5.6,,,,,
ms,10,Japanese,,,,,
ms,10,MySQL 8.0 Reference Manual  /,,,,,
ms,10,Optimization,,,,,
ms,10,Chapter 8 Optimization,,,,,
ms,10,"Table of Contents8.1 Optimization Overview8.2 Optimizing SQL Statements8.2.1 Optimizing SELECT Statements8.2.2 Optimizing Subqueries, Derived Tables, View References, and Common Table",,,,,
ms,10,Expressions8.2.3 Optimizing INFORMATION_SCHEMA Queries8.2.4 Optimizing Performance Schema Queries8.2.5 Optimizing Data Change Statements8.2.6 Optimizing Database Privileges8.2.7 Other Optimization Tips8.3 Optimization and Indexes8.3.1 How MySQL Uses Indexes8.3.2 Primary Key Optimization8.3.3 SPATIAL Index Optimization8.3.4 Foreign Key Optimization8.3.5 Column Indexes8.3.6 Multiple-Column Indexes8.3.7 Verifying Index Usage8.3.8 InnoDB and MyISAM Index Statistics Collection8.3.9 Comparison of B-Tree and Hash Indexes8.3.10 Use of Index Extensions8.3.11 Optimizer Use of Generated Column Indexes8.3.12 Invisible Indexes8.3.13 Descending Indexes8.3.14 Indexed Lookups from TIMESTAMP Columns8.4 Optimizing Database Structure8.4.1 Optimizing Data Size8.4.2 Optimizing MySQL Data Types8.4.3 Optimizing for Many Tables8.4.4 Internal Temporary Table Use in MySQL8.4.5 Limits on Number of Databases and Tables8.4.6 Limits on Table Size8.4.7 Limits on Table Column Count and Row Size8.5 Optimizing for InnoDB Tables8.5.1 Optimizing Storage Layout for InnoDB Tables8.5.2 Optimizing InnoDB Transaction Management8.5.3 Optimizing InnoDB Read-Only Transactions8.5.4 Optimizing InnoDB Redo Logging8.5.5 Bulk Data Loading for InnoDB Tables8.5.6 Optimizing InnoDB Queries8.5.7 Optimizing InnoDB DDL Operations8.5.8 Optimizing InnoDB Disk I/O8.5.9 Optimizing InnoDB Configuration Variables8.5.10 Optimizing InnoDB for Systems with Many Tables8.6 Optimizing for MyISAM Tables8.6.1 Optimizing MyISAM Queries8.6.2 Bulk Data Loading for MyISAM Tables8.6.3 Optimizing REPAIR TABLE Statements8.7 Optimizing for MEMORY Tables8.8 Understanding the Query Execution Plan8.8.1 Optimizing Queries with EXPLAIN8.8.2 EXPLAIN Output Format8.8.3 Extended EXPLAIN Output Format8.8.4 Obtaining Execution Plan Information for a Named Connection8.8.5 Estimating Query Performance8.9 Controlling the Query Optimizer8.9.1 Controlling Query Plan Evaluation8.9.2 Switchable Optimizations8.9.3 Optimizer Hints8.9.4 Index Hints8.9.5 The Optimizer Cost Model8.9.6 Optimizer Statistics8.10 Buffering and Caching8.10.1 InnoDB Buffer Pool Optimization8.10.2 The MyISAM Key Cache8.10.3 Caching of Prepared Statements and Stored Programs8.11 Optimizing Locking Operations8.11.1 Internal Locking Methods8.11.2 Table Locking Issues8.11.3 Concurrent Inserts8.11.4 Metadata Locking8.11.5 External Locking8.12 Optimizing the MySQL Server8.12.1 Optimizing Disk I/O8.12.2 Using Symbolic Links8.12.3 Optimizing Memory Use8.13 Measuring Performance (Benchmarking)8.13.1 Measuring the Speed of Expressions and Functions8.13.2 Using Your Own Benchmarks8.13.3 Measuring Performance with performance_schema8.14 Examining Server Thread (Process) Information8.14.1 Accessing the Process List8.14.2 Thread Command Values8.14.3 General Thread States8.14.4 Replication Source Thread States8.14.5 Replication I/O Thread States8.14.6 Replication SQL Thread States8.14.7 Replication Connection Thread States8.14.8 NDB Cluster Thread States8.14.9 Event Scheduler Thread States,,,,,
ms,10,This chapter explains how to optimize MySQL performance and provides,,,,,
ms,10,examples,,,,,
ms,10,"Optimization involves configuring, tuning, and measuring",,,,,
ms,10,"performance, at several levels",,,,,
ms,10,Depending on your job role,,,,,
ms,10,"(developer, DBA, or a combination of both), you might optimize at",,,,,
ms,10,"the level of individual SQL statements, entire applications, a",,,,,
ms,10,"single database server, or multiple networked database servers",,,,,
ms,10,,,,,,
ms,10,"Sometimes you can be proactive and plan in advance for performance,",,,,,
ms,10,while other times you might troubleshoot a configuration or code,,,,,
ms,10,issue after a problem occurs,,,,,
ms,10,Optimizing CPU and memory usage can,,,,,
ms,10,"also improve scalability, allowing the database to handle more load",,,,,
ms,10,without slowing down,,,,,
ms,10,,,,,,
ms,10,PREV,,,,,
ms,10,HOME,,,,,
ms,10,UP,,,,,
ms,10,NEXT,,,,,
ms,10,Related Documentation,,,,,
ms,10,MySQL 8.0 Release Notes,,,,,
ms,10,MySQL 8.0 Source Code Documentation,,,,,
ms,10,Download,,,,,
ms,10,this Manual,,,,,
ms,10,PDF (US Ltr),,,,,
ms,10,- 40.5Mb,,,,,
ms,10,PDF (A4),,,,,
ms,10,- 40.5Mb,,,,,
ms,10,PDF (RPM),,,,,
ms,10,- 39.8Mb,,,,,
ms,10,HTML Download (TGZ),,,,,
ms,10,- 10.5Mb,,,,,
ms,10,HTML Download (Zip),,,,,
ms,10,- 10.5Mb,,,,,
ms,10,HTML Download (RPM),,,,,
ms,10,- 9.1Mb,,,,,
ms,10,Man Pages (TGZ),,,,,
ms,10,- 244.2Kb,,,,,
ms,10,Man Pages (Zip),,,,,
ms,10,- 349.2Kb,,,,,
ms,10,Info (Gzip),,,,,
ms,10,- 3.9Mb,,,,,
ms,10,Info (Zip),,,,,
ms,10,- 3.9Mb,,,,,
ms,10,Excerpts from this Manual,,,,,
ms,10,MySQL Backup and Recovery,,,,,
ms,10,MySQL Globalization,,,,,
ms,10,MySQL Information Schema,,,,,
ms,10,MySQL Installation Guide,,,,,
ms,10,Security in MySQL,,,,,
ms,10,Starting and Stopping MySQL,,,,,
ms,10,MySQL and Linux/Unix,,,,,
ms,10,MySQL and Windows,,,,,
ms,10,MySQL and OS X,,,,,
ms,10,MySQL and Solaris,,,,,
ms,10,Building MySQL from Source,,,,,
ms,10,MySQL Restrictions and Limitations,,,,,
ms,10,MySQL Partitioning,,,,,
ms,10,MySQL Secure Deployment Guide,,,,,
ms,10,MySQL Tutorial,,,,,
ms,10,MySQL Performance Schema,,,,,
ms,10,MySQL Replication,,,,,
ms,10,Using the MySQL Yum Repository,,,,,
ms,10,MySQL NDB Cluster 8.0,,,,,
ms,10,Contact MySQL Sales,,,,,
ms,10,USA/Canada: +1-866-221-0634,,,,,
ms,10,(More Countries »),,,,,
ms,10,"© 2020, Oracle Corporation and/or its affiliates",,,,,
ms,10,Products,,,,,
ms,10,MySQL Database Service,,,,,
ms,10,MySQL Enterprise Edition,,,,,
ms,10,MySQL Standard Edition,,,,,
ms,10,MySQL Classic Edition,,,,,
ms,10,MySQL Cluster CGE,,,,,
ms,10,MySQL Embedded (OEM/ISV),,,,,
ms,10,Services,,,,,
ms,10,Training,,,,,
ms,10,Certification,,,,,
ms,10,Consulting,,,,,
ms,10,Support,,,,,
ms,10,Downloads,,,,,
ms,10,MySQL Community Server,,,,,
ms,10,MySQL NDB Cluster,,,,,
ms,10,MySQL Shell,,,,,
ms,10,MySQL Router,,,,,
ms,10,MySQL Workbench,,,,,
ms,10,Documentation,,,,,
ms,10,MySQL Reference Manual,,,,,
ms,10,MySQL Workbench,,,,,
ms,10,MySQL NDB Cluster,,,,,
ms,10,MySQL Connectors,,,,,
ms,10,Topic Guides,,,,,
ms,10,About MySQL,,,,,
ms,10,Contact Us,,,,,
ms,10,How to Buy,,,,,
ms,10,Partners,,,,,
ms,10,Job Opportunities,,,,,
ms,10,Site Map,,,,,
ms,10,"© 2020, Oracle Corporation and/or its affiliates",,,,,
ms,10,Legal Policies |,,,,,
ms,10,Your Privacy Rights |,,,,,
ms,10,Terms of Use |,,,,,
ms,10,Trademark Policy |,,,,,
ms,10,Contributor Agreement |,,,,,
ms,10,,,,,,
h2,2,Solved: H2 database performance limitations? - PTC Community,,,,,
h2,2,MENU,,,,,
h2,2,Connect,,,,,
h2,2,PTC University,,,,,
h2,2,ThingWorx Developer Portal,,,,,
h2,2,PTC Marketplace,,,,,
h2,2,Get Help,,,,,
h2,2,Product Help,,,,,
h2,2,Documentation,,,,,
h2,2,eSupport,,,,,
h2,2,Log in,,,,,
h2,2,cancel,,,,,
h2,2,Turn on suggestions,,,,,
h2,2,Auto-suggest helps you quickly narrow down your search results by suggesting possible matches as you type,,,,,
h2,2,,,,,,
h2,2,Showing results for,,,,,
h2,2,Search instead for,,,,,
h2,2,Did you mean:,,,,,
h2,2,Community,,,,,
h2,2,:,,,,,
h2,2,IoT,,,,,
h2,2,:,,,,,
h2,2,ThingWorx Developers,,,,,
h2,2,:,,,,,
h2,2,H2 database performance limitations?,,,,,
h2,2,Options,,,,,
h2,2,Subscribe to RSS Feed,,,,,
h2,2,Mark Topic as New,,,,,
h2,2,Mark Topic as Read,,,,,
h2,2,Float this Topic for Current User,,,,,
h2,2,Bookmark,,,,,
h2,2,Subscribe,,,,,
h2,2,Mute,,,,,
h2,2,Printer Friendly Page,,,,,
h2,2,All communityThis categoryThis boardTipsUsers,,,,,
h2,2,cancel,,,,,
h2,2,Turn on suggestions,,,,,
h2,2,Auto-suggest helps you quickly narrow down your search results by suggesting possible matches as you type,,,,,
h2,2,,,,,,
h2,2,Showing results for,,,,,
h2,2,Search instead for,,,,,
h2,2,Did you mean:,,,,,
h2,2,H2 database performance limitations?,,,,,
h2,2,SOLVED,,,,,
h2,2,Go to solution,,,,,
h2,2,jliu-41,,,,,
h2,2,Newbie,,,,,
h2,2,Mark as New,,,,,
h2,2,Bookmark,,,,,
h2,2,Subscribe,,,,,
h2,2,Mute,,,,,
h2,2,Subscribe to RSS Feed,,,,,
h2,2,Permalink,,,,,
h2,2,Print,,,,,
h2,2,Email to a Friend,,,,,
h2,2,Notify Moderator,,,,,
h2,2,11-16-2016,,,,,
h2,2,03:28 PM,,,,,
h2,2,11-16-2016,,,,,
h2,2,03:28 PM,,,,,
h2,2,H2 database performance limitations?,,,,,
h2,2,"Hi guys,Does anyone know what is the limitation of the H2 database? Like if it will start to have performance issue when the data storage is greater than 500 GB for example?Additionally, is there any concern for using H2 for Model Storage and DSE for data storage in the production environment for 500+ connected devices and 1TB+ data storage?Thank you",,,,,
h2,2,,,,,,
h2,2,Solved!,,,,,
h2,2,Go to Solution,,,,,
h2,2,,,,,,
h2,2,Labels:,,,,,
h2,2,Design,,,,,
h2,2,Troubleshooting,,,,,
h2,2,Tags (2),,,,,
h2,2,Tags:dseh2,,,,,
h2,2,0,,,,,
h2,2,Kudos,,,,,
h2,2,All forum topics,,,,,
h2,2,Previous Topic,,,,,
h2,2,Next Topic,,,,,
h2,2,1 ACCEPTED SOLUTION,,,,,
h2,2,Accepted Solutions,,,,,
h2,2,dupatel,,,,,
h2,2,Tanzanite,,,,,
h2,2,(in response to jliu-41),,,,,
h2,2,Mark as New,,,,,
h2,2,Bookmark,,,,,
h2,2,Subscribe,,,,,
h2,2,Mute,,,,,
h2,2,Subscribe to RSS Feed,,,,,
h2,2,Permalink,,,,,
h2,2,Print,,,,,
h2,2,Email to a Friend,,,,,
h2,2,Notify Moderator,,,,,
h2,2,11-17-2016,,,,,
h2,2,06:45 AM,,,,,
h2,2,11-17-2016,,,,,
h2,2,06:45 AM,,,,,
h2,2,Re: H2 database performance limitations?,,,,,
h2,2,H2 is a lightweight database,,,,,
h2,2,As so it does have limitations,,,,,
h2,2,I believe limit of 2^64 rows per table is a hard limit,,,,,
h2,2,I would recommend you to check out H2 Database site for exact details and benchmark test result shared to get better insights,,,,,
h2,2,http://www,,,,,
h2,2,h2database,,,,,
h2,2,com/html/performance,,,,,
h2,2,"htmlFor production instance, it is recommended to use PostgreSQL",,,,,
h2,2,,,,,,
h2,2,View solution in original post,,,,,
h2,2,3,,,,,
h2,2,Kudos,,,,,
h2,2,2 REPLIES 2,,,,,
h2,2,dupatel,,,,,
h2,2,Tanzanite,,,,,
h2,2,(in response to jliu-41),,,,,
h2,2,Mark as New,,,,,
h2,2,Bookmark,,,,,
h2,2,Subscribe,,,,,
h2,2,Mute,,,,,
h2,2,Subscribe to RSS Feed,,,,,
h2,2,Permalink,,,,,
h2,2,Print,,,,,
h2,2,Email to a Friend,,,,,
h2,2,Notify Moderator,,,,,
h2,2,11-17-2016,,,,,
h2,2,06:45 AM,,,,,
h2,2,11-17-2016,,,,,
h2,2,06:45 AM,,,,,
h2,2,Re: H2 database performance limitations?,,,,,
h2,2,H2 is a lightweight database,,,,,
h2,2,As so it does have limitations,,,,,
h2,2,I believe limit of 2^64 rows per table is a hard limit,,,,,
h2,2,I would recommend you to check out H2 Database site for exact details and benchmark test result shared to get better insights,,,,,
h2,2,http://www,,,,,
h2,2,h2database,,,,,
h2,2,com/html/performance,,,,,
h2,2,"htmlFor production instance, it is recommended to use PostgreSQL",,,,,
h2,2,,,,,,
h2,2,View solution in original post,,,,,
h2,2,3,,,,,
h2,2,Kudos,,,,,
h2,2,jliu-41,,,,,
h2,2,Newbie,,,,,
h2,2,(in response to dupatel),,,,,
h2,2,Mark as New,,,,,
h2,2,Bookmark,,,,,
h2,2,Subscribe,,,,,
h2,2,Mute,,,,,
h2,2,Subscribe to RSS Feed,,,,,
h2,2,Permalink,,,,,
h2,2,Print,,,,,
h2,2,Email to a Friend,,,,,
h2,2,Notify Moderator,,,,,
h2,2,11-17-2016,,,,,
h2,2,09:47 AM,,,,,
h2,2,11-17-2016,,,,,
h2,2,09:47 AM,,,,,
h2,2,Re: H2 database performance limitations?,,,,,
h2,2,"Hi Durgresh,Thanks for the response",,,,,
h2,2,"From the H2 performance comparison chart, the performance may not be the biggest concern, compared to PostgreSQL",,,,,
h2,2,"I agreed that PostgreSQL may be a better option for the production environment for the model storage due to its scalability and high-availability feature, as the embedded H2 doesn't support the clustering, and use DSE for the data storage",,,,,
h2,2,,,,,,
h2,2,1,,,,,
h2,2,Kudo,,,,,
h2,2,Announcements,,,,,
h2,2,Thingworx Navigate content has a new home! Click,,,,,
h2,2,here to access the new Thingworx Navigate forum!,,,,,
h2,2,Check out the,,,,,
h2,2,Vuforia Expert Capture Guide!,,,,,
h2,2,Home |,,,,,
h2,2,About |,,,,,
h2,2,Contact |,,,,,
h2,2,Community Help |,,,,,
h2,2,Terms of Service |,,,,,
h2,2,Legal Policies,,,,,
h2,2,facebook,,,,,
h2,2,twitter,,,,,
h2,2,linkedin,,,,,
h2,2,youtube,,,,,
h2,3,H2 Database Performance - the JPA Benchmark,,,,,
h2,3,BenchmarkResultsComparisonJPA Performance Benchmark (JPAB),,,,,
h2,3,BenchmarkHomeBenchmark FAQTest DescriptionRunning and ResultsDownloadChange LogJPA ProvidersDataNucleusEclipseLinkHibernateObjectDBOpenJPADatabases (DBMS)DB4ODerbyH2HSQLDBMySQLObjectDBPostgreSQLSQLiteJPA & DBMSDataNucleus & Derby(e)DataNucleus & H2(e)DataNucleus & HSQLDB(e)DataNucleus & DB4O(e)DataNucleus & Derby(s)DataNucleus & H2(s)DataNucleus & MySQL(s)DataNucleus & PostgreSQL(s)EclipseLink & Derby(e)EclipseLink & H2(e)EclipseLink & HSQLDB(e)EclipseLink & SQLite(e)EclipseLink & Derby(s)EclipseLink & H2(s)EclipseLink & MySQL(s)EclipseLink & PostgreSQL(s)Hibernate & Derby(e)Hibernate & H2(e)Hibernate & HSQLDB(e)Hibernate & SQLite(e)Hibernate & Derby(s)Hibernate & H2(s)Hibernate & MySQL(s)Hibernate & PostgreSQL(s)OpenJPA & Derby(e)OpenJPA & H2(e)OpenJPA & HSQLDB(e)OpenJPA & Derby(s)OpenJPA & H2(s)OpenJPA & MySQL(s)OpenJPA & PostgreSQL(s)ObjectDB(e)ObjectDB(s)Click to browse the complete benchmark resultsH2 Pure Java Database,,,,,
h2,3,H2 Performance SummaryThe following charts show the performance of H2 (in green) relatively to other JPA/DBMS combinations,,,,,
h2,3,(in gray),,,,,
h2,3,Position #1 on the X-Axis (the fastest) is about 100 times faster than position #33 (the slowest),,,,,
h2,3,,,,,,
h2,3,In the chart below the Y-Axis represents result score (maximum 100) in logarithmic scale - higher is better:,,,,,
h2,3,Move the cursor over bars - for details,,,,,
h2,3,Click a bar - to switch a page,,,,,
h2,3,,,,,,
h2,3,In the chart below the Y-Axis represents result score (maximum 100) in linear scale - higher is better:,,,,,
h2,3,Move the cursor over bars - for details,,,,,
h2,3,Click a bar - to switch a page,,,,,
h2,3,,,,,,
h2,3,"The configurations in which H2 has been tested are listed in the following table: Database + JPA ProviderNormalized Score100 - Best,  0 - WorstFinal Position1 - Best,  33 - WorstFailed Tests1EclipseLink with H2 embedded18.43  (out of 33)02Hibernate with H2 embedded11.07  (out of 33)03OpenJPA with H2 embedded9.510  (out of 33)04DataNucleus with H2 embedded7.813  (out of 33)45EclipseLink with H2 server4.521  (out of 33)06Hibernate with H2 server3.423  (out of 33)07OpenJPA with H2 server3.025  (out of 33)08DataNucleus with H2 server2.926  (out of 33)4",,,,,
h2,3,"As shown above, the performance and stability are highly dependent on the JPA provider",,,,,
h2,3,,,,,,
h2,3,H2 is faster and more stable,,,,,
h2,3,(in both client-server and embedded modes) when used with EclipseLink or Hibernate,,,,,
h2,3,,,,,,
h2,3,About H2 Database,,,,,
h2,3,H2 Database is a popular pure Java RDBMS,,,,,
h2,3,Its first version was released in 2005,,,,,
h2,3,,,,,,
h2,3,H2 is available under a modified version of the Mozilla Public License (MPL) license,,,,,
h2,3,or under the Eclipse Public License (EPL),,,,,
h2,3,,,,,,
h2,3,In this benchmark H2 version 1.3.164 (which was released in February 2012) has been tested,,,,,
h2,3,,,,,,
h2,3,Both client-server and embedded mode are supported by H2 and were tested in this benchmark,,,,,
h2,3,,,,,,
h2,3,Solved Problems and Issues,,,,,
h2,3,The stack traces below demonstrate some exceptions that have been thrown when using H2 database in,,,,,
h2,3,previous runs of this benchmark and have been fixed by upgrading software and setting,,,,,
h2,3,,,,,,
h2,3,org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,persistence,,,,,
h2,3,"RollbackException: Unique index or primary key violation: ""PRIMARY_KEY_2C ON PUBLIC",,,,,
h2,3,"OPENJPA_SEQUENCES_TABLE(ID)""; SQL statement:",,,,,
h2,3,"INSERT INTO OPENJPA_SEQUENCES_TABLE (ID, SEQUENCE_VALUE) VALUES (?, ?) [23001-141] {prepstmnt 28057122 INSERT INTO OPENJPA_SEQUENCES_TABLE (ID, SEQUENCE_VALUE) VALUES (?, ?) [params=(String) DEFAULT, (int) 0]} [code=23001, state=23001]",,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,persistence,,,,,
h2,3,EntityManagerImpl,,,,,
h2,3,commit(EntityManagerImpl,,,,,
h2,3,java:583),,,,,
h2,3,at org,,,,,
h2,3,jpab,,,,,
h2,3,Test,,,,,
h2,3,persist(Test,,,,,
h2,3,java:216),,,,,
h2,3,at org,,,,,
h2,3,jpab,,,,,
h2,3,Test,,,,,
h2,3,persist(Test,,,,,
h2,3,java:199),,,,,
h2,3,at org,,,,,
h2,3,jpab,,,,,
h2,3,Runner$PersistAction,,,,,
h2,3,run0(Runner,,,,,
h2,3,java:528),,,,,
h2,3,at org,,,,,
h2,3,jpab,,,,,
h2,3,Runner$TestAction,,,,,
h2,3,run(Runner,,,,,
h2,3,java:507),,,,,
h2,3,at java,,,,,
h2,3,lang,,,,,
h2,3,Thread,,,,,
h2,3,run(Thread,,,,,
h2,3,java:619),,,,,
h2,3,Caused by:,,,,,
h2,3,org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,persistence,,,,,
h2,3,"EntityExistsException: Unique index or primary key violation: ""PRIMARY_KEY_2C ON PUBLIC",,,,,
h2,3,"OPENJPA_SEQUENCES_TABLE(ID)""; SQL statement:",,,,,
h2,3,"INSERT INTO OPENJPA_SEQUENCES_TABLE (ID, SEQUENCE_VALUE) VALUES (?, ?) [23001-141] {prepstmnt 28057122 INSERT INTO OPENJPA_SEQUENCES_TABLE (ID, SEQUENCE_VALUE) VALUES (?, ?) [params=(String) DEFAULT, (int) 0]} [code=23001, state=23001]",,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,sql,,,,,
h2,3,DBDictionary,,,,,
h2,3,narrow(DBDictionary,,,,,
h2,3,java:4812),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,sql,,,,,
h2,3,DBDictionary,,,,,
h2,3,newStoreException(DBDictionary,,,,,
h2,3,java:4787),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,sql,,,,,
h2,3,SQLExceptions,,,,,
h2,3,getStore(SQLExceptions,,,,,
h2,3,java:136),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,sql,,,,,
h2,3,SQLExceptions,,,,,
h2,3,getStore(SQLExceptions,,,,,
h2,3,java:110),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,sql,,,,,
h2,3,SQLExceptions,,,,,
h2,3,getStore(SQLExceptions,,,,,
h2,3,java:62),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,kernel,,,,,
h2,3,AbstractJDBCSeq,,,,,
h2,3,next(AbstractJDBCSeq,,,,,
h2,3,java:66),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,util,,,,,
h2,3,ImplHelper,,,,,
h2,3,generateValue(ImplHelper,,,,,
h2,3,java:160),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,util,,,,,
h2,3,ImplHelper,,,,,
h2,3,generateFieldValue(ImplHelper,,,,,
h2,3,java:144),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,kernel,,,,,
h2,3,JDBCStoreManager,,,,,
h2,3,assignField(JDBCStoreManager,,,,,
h2,3,java:794),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,util,,,,,
h2,3,ApplicationIds,,,,,
h2,3,assign(ApplicationIds,,,,,
h2,3,java:487),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,util,,,,,
h2,3,ApplicationIds,,,,,
h2,3,assign(ApplicationIds,,,,,
h2,3,java:463),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,kernel,,,,,
h2,3,JDBCStoreManager,,,,,
h2,3,assignObjectId(JDBCStoreManager,,,,,
h2,3,java:778),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,DelegatingStoreManager,,,,,
h2,3,assignObjectId(DelegatingStoreManager,,,,,
h2,3,java:135),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,StateManagerImpl,,,,,
h2,3,assignObjectId(StateManagerImpl,,,,,
h2,3,java:605),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,StateManagerImpl,,,,,
h2,3,preFlush(StateManagerImpl,,,,,
h2,3,java:2952),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,PNewState,,,,,
h2,3,beforeFlush(PNewState,,,,,
h2,3,java:40),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,StateManagerImpl,,,,,
h2,3,beforeFlush(StateManagerImpl,,,,,
h2,3,java:1047),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,BrokerImpl,,,,,
h2,3,flush(BrokerImpl,,,,,
h2,3,java:2077),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,BrokerImpl,,,,,
h2,3,flushSafe(BrokerImpl,,,,,
h2,3,java:2037),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,BrokerImpl,,,,,
h2,3,beforeCompletion(BrokerImpl,,,,,
h2,3,java:1955),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,LocalManagedRuntime,,,,,
h2,3,commit(LocalManagedRuntime,,,,,
h2,3,java:81),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,BrokerImpl,,,,,
h2,3,commit(BrokerImpl,,,,,
h2,3,java:1479),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,DelegatingBroker,,,,,
h2,3,commit(DelegatingBroker,,,,,
h2,3,java:925),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,persistence,,,,,
h2,3,EntityManagerImpl,,,,,
h2,3,commit(EntityManagerImpl,,,,,
h2,3,java:559),,,,,
h2,3,,,,,,
h2,3,,,,,,
h2,3,5 more,,,,,
h2,3,Caused by: org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,lib,,,,,
h2,3,jdbc,,,,,
h2,3,"ReportingSQLException: Unique index or primary key violation: ""PRIMARY_KEY_2C ON PUBLIC",,,,,
h2,3,"OPENJPA_SEQUENCES_TABLE(ID)""; SQL statement:",,,,,
h2,3,"INSERT INTO OPENJPA_SEQUENCES_TABLE (ID, SEQUENCE_VALUE) VALUES (?, ?) [23001-141] {prepstmnt 28057122 INSERT INTO OPENJPA_SEQUENCES_TABLE (ID, SEQUENCE_VALUE) VALUES (?, ?) [params=(String) DEFAULT, (int) 0]} [code=23001, state=23001]",,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,lib,,,,,
h2,3,jdbc,,,,,
h2,3,LoggingConnectionDecorator,,,,,
h2,3,wrap(LoggingConnectionDecorator,,,,,
h2,3,java:257),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,lib,,,,,
h2,3,jdbc,,,,,
h2,3,LoggingConnectionDecorator,,,,,
h2,3,wrap(LoggingConnectionDecorator,,,,,
h2,3,java:233),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,lib,,,,,
h2,3,jdbc,,,,,
h2,3,LoggingConnectionDecorator,,,,,
h2,3,access$1000(LoggingConnectionDecorator,,,,,
h2,3,java:70),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,lib,,,,,
h2,3,jdbc,,,,,
h2,3,LoggingConnectionDecorator$LoggingConnection$LoggingPreparedStatement,,,,,
h2,3,executeUpdate(LoggingConnectionDecorator,,,,,
h2,3,java:1079),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,lib,,,,,
h2,3,jdbc,,,,,
h2,3,DelegatingPreparedStatement,,,,,
h2,3,executeUpdate(DelegatingPreparedStatement,,,,,
h2,3,java:285),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,kernel,,,,,
h2,3,TableJDBCSeq,,,,,
h2,3,executeUpdate(TableJDBCSeq,,,,,
h2,3,java:816),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,kernel,,,,,
h2,3,TableJDBCSeq,,,,,
h2,3,insertSequence(TableJDBCSeq,,,,,
h2,3,java:501),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,kernel,,,,,
h2,3,TableJDBCSeq,,,,,
h2,3,access$100(TableJDBCSeq,,,,,
h2,3,java:74),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,kernel,,,,,
h2,3,TableJDBCSeq$AllocateSequenceRunnable,,,,,
h2,3,run(TableJDBCSeq,,,,,
h2,3,java:902),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,kernel,,,,,
h2,3,TableJDBCSeq,,,,,
h2,3,allocateSequence(TableJDBCSeq,,,,,
h2,3,java:454),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,kernel,,,,,
h2,3,TableJDBCSeq,,,,,
h2,3,nextInternal(TableJDBCSeq,,,,,
h2,3,java:305),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,kernel,,,,,
h2,3,AbstractJDBCSeq,,,,,
h2,3,next(AbstractJDBCSeq,,,,,
h2,3,java:60),,,,,
h2,3,,,,,,
h2,3,,,,,,
h2,3,23 more,,,,,
h2,3,org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,persistence,,,,,
h2,3,"ArgumentException: Failed to execute query ""SELECT o FROM Person o WHERE o",,,,,
h2,3,"lastName LIKE :pattern""",,,,,
h2,3,Check the query syntax for correctness,,,,,
h2,3,See nested exception for details,,,,,
h2,3,,,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,QueryImpl,,,,,
h2,3,execute(QueryImpl,,,,,
h2,3,java:870),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,QueryImpl,,,,,
h2,3,execute(QueryImpl,,,,,
h2,3,java:792),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,DelegatingQuery,,,,,
h2,3,execute(DelegatingQuery,,,,,
h2,3,java:542),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,persistence,,,,,
h2,3,QueryImpl,,,,,
h2,3,execute(QueryImpl,,,,,
h2,3,java:288),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,persistence,,,,,
h2,3,QueryImpl,,,,,
h2,3,getResultList(QueryImpl,,,,,
h2,3,java:302),,,,,
h2,3,at org,,,,,
h2,3,jpab,,,,,
h2,3,Test,,,,,
h2,3,query(Test,,,,,
h2,3,java:314),,,,,
h2,3,at org,,,,,
h2,3,jpab,,,,,
h2,3,Runner$QueryAction,,,,,
h2,3,run0(Runner,,,,,
h2,3,java:552),,,,,
h2,3,at org,,,,,
h2,3,jpab,,,,,
h2,3,Runner$TestAction,,,,,
h2,3,run(Runner,,,,,
h2,3,java:507),,,,,
h2,3,at java,,,,,
h2,3,lang,,,,,
h2,3,Thread,,,,,
h2,3,run(Thread,,,,,
h2,3,java:619),,,,,
h2,3,Caused by: java,,,,,
h2,3,lang,,,,,
h2,3,ClassCastException: java,,,,,
h2,3,lang,,,,,
h2,3,String cannot be cast to java,,,,,
h2,3,lang,,,,,
h2,3,Integer,,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,jdbc,,,,,
h2,3,kernel,,,,,
h2,3,PreparedSQLStoreQuery$PreparedSQLExecutor,,,,,
h2,3,toParameterArray(PreparedSQLStoreQuery,,,,,
h2,3,java:157),,,,,
h2,3,at org,,,,,
h2,3,apache,,,,,
h2,3,openjpa,,,,,
h2,3,kernel,,,,,
h2,3,QueryImpl,,,,,
h2,3,execute(QueryImpl,,,,,
h2,3,java:855),,,,,
h2,3,,,,,,
h2,3,,,,,,
h2,3,8 more,,,,,
h2,3,javax,,,,,
h2,3,persistence,,,,,
h2,3,RollbackException: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.1.1,,,,,
h2,3,20100817-r8050): org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,exceptions,,,,,
h2,3,DatabaseException,,,,,
h2,3,Internal Exception: org,,,,,
h2,3,h2,,,,,
h2,3,dbc,,,,,
h2,3,"JdbcBatchUpdateException: Referential integrity constraint violation: ""FK_NODE_CHILD1_ID: PUBLIC",,,,,
h2,3,NODE FOREIGN KEY(CHILD1_ID) REFERENCES PUBLIC,,,,,
h2,3,"NODE(ID)""; SQL statement:",,,,,
h2,3,DELETE FROM NODE WHERE (ID = ?) [23003-147],,,,,
h2,3,Error Code: 23003,,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,jpa,,,,,
h2,3,transaction,,,,,
h2,3,EntityTransactionImpl,,,,,
h2,3,commitInternal(EntityTransactionImpl,,,,,
h2,3,java:102),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,jpa,,,,,
h2,3,transaction,,,,,
h2,3,EntityTransactionImpl,,,,,
h2,3,commit(EntityTransactionImpl,,,,,
h2,3,java:63),,,,,
h2,3,at org,,,,,
h2,3,jpab,,,,,
h2,3,Test,,,,,
h2,3,doAction(Test,,,,,
h2,3,java:272),,,,,
h2,3,at org,,,,,
h2,3,jpab,,,,,
h2,3,Runner$RemoveAction,,,,,
h2,3,run0(Runner,,,,,
h2,3,java:578),,,,,
h2,3,at org,,,,,
h2,3,jpab,,,,,
h2,3,Runner$TestAction,,,,,
h2,3,run(Runner,,,,,
h2,3,java:508),,,,,
h2,3,at java,,,,,
h2,3,lang,,,,,
h2,3,Thread,,,,,
h2,3,run(Thread,,,,,
h2,3,java:619),,,,,
h2,3,Caused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.1.1,,,,,
h2,3,20100817-r8050): org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,exceptions,,,,,
h2,3,DatabaseException,,,,,
h2,3,Internal Exception: org,,,,,
h2,3,h2,,,,,
h2,3,dbc,,,,,
h2,3,"JdbcBatchUpdateException: Referential integrity constraint violation: ""FK_NODE_CHILD1_ID: PUBLIC",,,,,
h2,3,NODE FOREIGN KEY(CHILD1_ID) REFERENCES PUBLIC,,,,,
h2,3,"NODE(ID)""; SQL statement:",,,,,
h2,3,DELETE FROM NODE WHERE (ID = ?) [23003-147],,,,,
h2,3,Error Code: 23003,,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,exceptions,,,,,
h2,3,DatabaseException,,,,,
h2,3,sqlException(DatabaseException,,,,,
h2,3,java:324),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,databaseaccess,,,,,
h2,3,DatabaseAccessor,,,,,
h2,3,executeJDK12BatchStatement(DatabaseAccessor,,,,,
h2,3,java:830),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,databaseaccess,,,,,
h2,3,ParameterizedSQLBatchWritingMechanism,,,,,
h2,3,executeBatchedStatements(ParameterizedSQLBatchWritingMechanism,,,,,
h2,3,java:139),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,databaseaccess,,,,,
h2,3,DatabaseAccessor,,,,,
h2,3,writesCompleted(DatabaseAccessor,,,,,
h2,3,java:1632),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,databaseaccess,,,,,
h2,3,DatabaseAccessor,,,,,
h2,3,commitTransaction(DatabaseAccessor,,,,,
h2,3,java:399),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,sessions,,,,,
h2,3,AbstractSession,,,,,
h2,3,basicCommitTransaction(AbstractSession,,,,,
h2,3,java:504),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,sessions,,,,,
h2,3,server,,,,,
h2,3,ClientSession,,,,,
h2,3,basicCommitTransaction(ClientSession,,,,,
h2,3,java:155),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,sessions,,,,,
h2,3,AbstractSession,,,,,
h2,3,commitTransaction(AbstractSession,,,,,
h2,3,java:686),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,sessions,,,,,
h2,3,UnitOfWorkImpl,,,,,
h2,3,commitTransaction(UnitOfWorkImpl,,,,,
h2,3,java:1581),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,sessions,,,,,
h2,3,RepeatableWriteUnitOfWork,,,,,
h2,3,commitTransaction(RepeatableWriteUnitOfWork,,,,,
h2,3,java:559),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,sessions,,,,,
h2,3,UnitOfWorkImpl,,,,,
h2,3,commitTransactionAfterWriteChanges(UnitOfWorkImpl,,,,,
h2,3,java:1604),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,sessions,,,,,
h2,3,RepeatableWriteUnitOfWork,,,,,
h2,3,commitRootUnitOfWork(RepeatableWriteUnitOfWork,,,,,
h2,3,java:207),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,sessions,,,,,
h2,3,UnitOfWorkImpl,,,,,
h2,3,commitAndResume(UnitOfWorkImpl,,,,,
h2,3,java:1148),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,jpa,,,,,
h2,3,transaction,,,,,
h2,3,EntityTransactionImpl,,,,,
h2,3,commitInternal(EntityTransactionImpl,,,,,
h2,3,java:84),,,,,
h2,3,,,,,,
h2,3,,,,,,
h2,3,5 more,,,,,
h2,3,Caused by: org,,,,,
h2,3,h2,,,,,
h2,3,dbc,,,,,
h2,3,"JdbcBatchUpdateException: Referential integrity constraint violation: ""FK_NODE_CHILD1_ID: PUBLIC",,,,,
h2,3,NODE FOREIGN KEY(CHILD1_ID) REFERENCES PUBLIC,,,,,
h2,3,"NODE(ID)""; SQL statement:",,,,,
h2,3,DELETE FROM NODE WHERE (ID = ?) [23003-147],,,,,
h2,3,at org,,,,,
h2,3,h2,,,,,
h2,3,dbc,,,,,
h2,3,JdbcPreparedStatement,,,,,
h2,3,executeBatch(JdbcPreparedStatement,,,,,
h2,3,java:1105),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,databaseaccess,,,,,
h2,3,DatabasePlatform,,,,,
h2,3,executeBatch(DatabasePlatform,,,,,
h2,3,java:1964),,,,,
h2,3,at org,,,,,
h2,3,eclipse,,,,,
h2,3,persistence,,,,,
h2,3,internal,,,,,
h2,3,databaseaccess,,,,,
h2,3,DatabaseAccessor,,,,,
h2,3,executeJDK12BatchStatement(DatabaseAccessor,,,,,
h2,3,java:817),,,,,
h2,3,,,,,,
h2,3,,,,,,
h2,3,17 more,,,,,
h2,3,"JPA Performance Benchmark - Copyright © 2010, 2011, 2012 ObjectDB Software Ltd",,,,,
h2,3,- All rights reserved,,,,,
h2,3,The benchmark program is released as open source under the GPL license,,,,,
h2,3,,,,,,
h2,4,H2 Database - Performance Tuning,,,,,
h2,4,H2 Database,,,,,
h2,4,Search,,,,,
h2,4,everywhere,,,,,
h2,4,only in this topic,,,,,
h2,4,Advanced Search,,,,,
h2,4,Performance Tuning,,,,,
h2,4,‹,,,,,
h2,4,Previous Topic,,,,,
h2,4,Next Topic,,,,,
h2,4,›,,,,,
h2,4,Classic,,,,,
h2,4,List,,,,,
h2,4,Threaded,,,,,
h2,4,♦,,,,,
h2,4,♦,,,,,
h2,4,Locked,,,,,
h2,4,2 messages,,,,,
h2,4,Chris-3,,,,,
h2,4,Reply |,,,,,
h2,4,Threaded,,,,,
h2,4,Open this post in threaded view,,,,,
h2,4,♦,,,,,
h2,4,♦,,,,,
h2,4,|,,,,,
h2,4,Performance Tuning,,,,,
h2,4,"Hi,",,,,,
h2,4,I'm having some trouble tracking down a performance issue in my code,,,,,
h2,4,,,,,,
h2,4,"I'm pretty certain that it's related to H2, but not 100%",,,,,
h2,4,,,,,,
h2,4,What I,,,,,
h2,4,find is as follows:,,,,,
h2,4,1,,,,,
h2,4,When using Derby insert time remains constant for inserting,,,,,
h2,4,~1million rows,,,,,
h2,4,2,,,,,
h2,4,"When using H2 insert time starts out much lower than Derby, but",,,,,
h2,4,once you get past a certain # of rows maybe 150k H2 insert time,,,,,
h2,4,rapidly rises,,,,,
h2,4,,,,,,
h2,4,3,,,,,
h2,4,I've tried playing with a couple config options in H2 - notably,,,,,
h2,4,CACHE SIZE and MAX_MEMORY_UNDO - increasing these values doesn't seem,,,,,
h2,4,to change the performance characteristics very much,,,,,
h2,4,,,,,,
h2,4,,,,,,
h2,4,Another quirk is that I'm unable to create a standalone app that,,,,,
h2,4,mirrors this problem,,,,,
h2,4,If I build a sample program the insert time,,,,,
h2,4,stays constant,,,,,
h2,4,,,,,,
h2,4,I stuck a profiler on my app to see what the differences were in the,,,,,
h2,4,beginning when things look good and later on when performance had,,,,,
h2,4,degraded,,,,,
h2,4,"In the ""good"" scenario in 1875 ms I'm able to execute 3142",,,,,
h2,4,inserts (1.67 inserts/ms),,,,,
h2,4,There's nothing in the profile stack that,,,,,
h2,4,"jumps out as being particularly ""hot"" or taking a long time",,,,,
h2,4,,,,,,
h2,4,"Int the ""bad"" scenario I'm only able to execute 709 inserts in 2246",,,,,
h2,4,ms,,,,,
h2,4,.31 inserts/ms,,,,,
h2,4,I find that 1206 ms is spent in the method,,,,,
h2,4,org,,,,,
h2,4,h2,,,,,
h2,4,tore,,,,,
h2,4,FileObjectDisk,,,,,
h2,4,sync() (34.3% of time),,,,,
h2,4,There is only 1,,,,,
h2,4,thread accessing the DB,,,,,
h2,4,this method does not show up at all on the,,,,,
h2,4,"""good"" profile  and it's only invoked 2 times out of the 709 on the",,,,,
h2,4,"""bad"" profile",,,,,
h2,4,Take those two out and you end up with 707 inserts in,,,,,
h2,4,1040ms - .67 inserts/ms,,,,,
h2,4,Still not as good as the original but,,,,,
h2,4,accounting for a lot of the overhead,,,,,
h2,4,,,,,,
h2,4,"Any ideas on what this could be, things to look for/settings to tweak?",,,,,
h2,4,Chris,,,,,
h2,4,--,,,,,
h2,4,"You received this message because you are subscribed to the Google Groups ""H2 Database"" group",,,,,
h2,4,,,,,,
h2,4,"To post to this group, send email to [hidden email]",,,,,
h2,4,,,,,,
h2,4,"To unsubscribe from this group, send email to [hidden email]",,,,,
h2,4,,,,,,
h2,4,"For more options, visit this group at http://groups",,,,,
h2,4,google,,,,,
h2,4,com/group/h2-database?hl=en,,,,,
h2,4,,,,,,
h2,4,Thomas Mueller Graf,,,,,
h2,4,Reply |,,,,,
h2,4,Threaded,,,,,
h2,4,Open this post in threaded view,,,,,
h2,4,♦,,,,,
h2,4,♦,,,,,
h2,4,|,,,,,
h2,4,Re: Performance Tuning,,,,,
h2,4,"Hi,",,,,,
h2,4,It sounds like the problem is FileDescriptor,,,,,
h2,4,sync(),,,,,
h2,4,I will check if I,,,,,
h2,4,"can replace this call with a different mechanism, without risking",,,,,
h2,4,corrupt databases,,,,,
h2,4,But this will take some time,,,,,
h2,4,,,,,,
h2,4,If you don't care too much about the database getting corrupt during,,,,,
h2,4,"the import, see",,,,,
h2,4,http://h2database,,,,,
h2,4,com/html/performance,,,,,
h2,4,"html#fast_importRegards,",,,,,
h2,4,Thomas,,,,,
h2,4,--,,,,,
h2,4,"You received this message because you are subscribed to the Google Groups ""H2 Database"" group",,,,,
h2,4,,,,,,
h2,4,"To post to this group, send email to [hidden email]",,,,,
h2,4,,,,,,
h2,4,"To unsubscribe from this group, send email to [hidden email]",,,,,
h2,4,,,,,,
h2,4,"For more options, visit this group at http://groups",,,,,
h2,4,google,,,,,
h2,4,com/group/h2-database?hl=en,,,,,
h2,4,,,,,,
h2,4,«,,,,,
h2,4,Return to H2 Database,,,,,
h2,4,|,,,,,
h2,4,1 view|%1 views,,,,,
h2,4,Free forum by Nabble,,,,,
h2,4,Edit this page,,,,,
h2,5,Performance Tuning and other random stuff,,,,,
h2,5,,,,,,
h2,5,roupsConversationsAll groups and messagesReport Google Groups BugHelpAccountSearchMapsYouTubePlayNewsGmailMeetContactsDriveCalendarTranslatePhotosDuoChromeShoppingFinanceDocsSheetsSlidesBooksBloggerHangoutsKeepJamboardEarthCollectionsArts and CultureGoogle AdsPodcastsStadiaMore from GoogleSign inGroupsH2 DatabaseConversationsAboutPrivacy • TermsPerformance Tuning and other random stuff,,,,,
h2,5,,,,,,
h2,5,"143 viewsSkip to first unread messageDan Armbrustunread,Jul 24, 2009, 5:26:10 PM7/24/09Reply to authorSign in to reply to authorForwardSign in to forwardDeleteYou do not have permission to delete messages in this groupLinkReport message as abuseSign in to report message as abuseShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto H2 DatabaseI have a fairly large, multi-threaded application which uses hibernate",,,,,
h2,5,to interface with a database,,,,,
h2,5,,,,,,
h2,5,"Lots of transactions, foreign keys,",,,,,
h2,5,constraints and a fairly high thru-put requirement,,,,,
h2,5,,,,,,
h2,5,For my current,,,,,
h2,5,"testing, I have about 20 tables, most are small, but a few have 10,000",,,,,
h2,5,rows,,,,,
h2,5,,,,,,
h2,5,I currently support PostgreSQL and MS SQL Server - and I'm exploring,,,,,
h2,5,adding support for an embedded database,,,,,
h2,5,,,,,,
h2,5,<off-topic>,,,,,
h2,5,"First I tested Derby, and was impressed that it mostly just worked,",,,,,
h2,5,when plugged into our app as a backend,,,,,
h2,5,,,,,,
h2,5,"However, the performance was",,,,,
h2,5,dreadful,,,,,
h2,5,,,,,,
h2,5,Then I tried out HSQL - but it appears that either Hibernate or HSQL,,,,,
h2,5,has completely broken their support for each other - I thought things,,,,,
h2,5,"were going to work, until I started using the app and getting random",,,,,
h2,5,failures all over,,,,,
h2,5,,,,,,
h2,5,"Poked around for a bit, thinking something simple",,,,,
h2,5,"was wrong, but that doesn't seem to be the case",,,,,
h2,5,,,,,,
h2,5,</off-topic>,,,,,
h2,5,"So, now I tried out H2 - having never used it before - and I must say,",,,,,
h2,5,I'm quite impressed with your documentation,,,,,
h2,5,,,,,,
h2,5,"It is the best, by far,",,,,,
h2,5,of any of the offerings I tried,,,,,
h2,5,,,,,,
h2,5,I had 0 issues what-so-ever trying,,,,,
h2,5,"to bring my app up, load in my schema, and make it run with H2",,,,,
h2,5,,,,,,
h2,5,The performance of H2 is at least 4 or 5 times faster that Derby was,,,,,
h2,5,in my use case,,,,,
h2,5,,,,,,
h2,5,"However, it still leaves quite a bit to be desired",,,,,
h2,5,compared to PostgreSQL on the same hardware,,,,,
h2,5,(something on the order,,,,,
h2,5,of 15 times slower) - so I'm looking for tuning feedback,,,,,
h2,5,,,,,,
h2,5,I'm currently using the following as my connection URL:,,,,,
h2,5,jdbc:h2:file:/work/h2/test;CACHE_SIZE=131072;,,,,,
h2,5,I have a connection pool which opens connections to the DB,,,,,
h2,5,,,,,,
h2,5,"In PostgreSQL, I typically run 26 processing threads, each using",,,,,
h2,5,connections from the pool,,,,,
h2,5,,,,,,
h2,5,"For H2, I backed it down to 2 processing threads, which seemed to help",,,,,
h2,5,the performance a little,,,,,
h2,5,,,,,,
h2,5,"I've tried the TQ and SOFT_LRU cache algorithms, neither seems to",,,,,
h2,5,impact my performance,,,,,
h2,5,,,,,,
h2,5,"When I tried to look into the horrible performance of Derby, I",,,,,
h2,5,discovered that it was doing table scans for a couple of my (more,,,,,
h2,5,"complex) queries, while PostgreSQL was able to use it's indexes for",,,,,
h2,5,said queries,,,,,
h2,5,,,,,,
h2,5,I suspect that the same is happening with H2 -,,,,,
h2,5,PostgreSQL and SQLServer are able to plan a way to perform my ugly,,,,,
h2,5,"queries using indexes, while H2 must be reverting to a table scan at",,,,,
h2,5,some point,,,,,
h2,5,,,,,,
h2,5,Any suggestions of other things to try to speed it up?,,,,,
h2,5,One other bit of info about my use case - I don't care if an option,,,,,
h2,5,"makes it more likely to lose a few seconds worth of ""committed""",,,,,
h2,5,transactions - so long as the DB doesn't corrupt itself during a power,,,,,
h2,5,outage,,,,,
h2,5,,,,,,
h2,5,"Is there anyway to have H2 give me something similar to the ""Explain""",,,,,
h2,5,"output on Postgres, so I can figure out which queries it is having",,,,,
h2,5,issues with?,,,,,
h2,5,"Or even better yet, an option to log ""slow"" queries",,,,,
h2,5,(where slow is a user defined variable)?,,,,,
h2,5,Two other quick questions -,,,,,
h2,5,First - I like your web-gui-console tool - however one feature I found,,,,,
h2,5,missing was the ability to run a sql script on a command line,,,,,
h2,5,,,,,,
h2,5,Something like:,,,,,
h2,5,java -jar h2,,,,,
h2,5,ar 'jdbc:h2:~/test' superSQLScript,,,,,
h2,5,sql,,,,,
h2,5,"Maybe it exists, but I just didn't see how to run it?",,,,,
h2,5,"And Second, in the documentation where you describe the CACHE_SIZE",,,,,
h2,5,"option, you don't specify the units for the number that is to be",,,,,
h2,5,passed in,,,,,
h2,5,,,,,,
h2,5,I'm assuming that it treats the number as MB?,,,,,
h2,5,But I'm,,,,,
h2,5,just guessing,,,,,
h2,5,,,,,,
h2,5,,,,,,
h2,5,"Thanks for all the work on H2,",,,,,
h2,5,Dan,,,,,
h2,5,"bob mcgeeunread,Jul 27, 2009, 1:44:58 PM7/27/09Reply to authorSign in to reply to authorForwardSign in to forwardDeleteYou do not have permission to delete messages in this groupLinkReport message as abuseSign in to report message as abuseShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto H2 DatabaseHi Dan,",,,,,
h2,5,The best place for performance tuning information is the,,,,,
h2,5,documentation,,,,,
h2,5,,,,,,
h2,5,There are several sections that can help with performance problems --,,,,,
h2,5,see below,,,,,
h2,5,,,,,,
h2,5,Solving a slow query/operation:,,,,,
h2,5,http://www,,,,,
h2,5,h2database,,,,,
h2,5,com/html/faq,,,,,
h2,5,html#query_slow,,,,,
h2,5,EXPLAIN and showing the query plan:,,,,,
h2,5,http://www,,,,,
h2,5,h2database,,,,,
h2,5,com/html/grammar,,,,,
h2,5,html#explain,,,,,
h2,5,Using the trace file & ConvertTraceFile to profile the DB & locate,,,,,
h2,5,performance problems:,,,,,
h2,5,http://www,,,,,
h2,5,h2database,,,,,
h2,5,com/html/performance,,,,,
h2,5,html#database_profiling,,,,,
h2,5,Setting trace options:,,,,,
h2,5,http://www,,,,,
h2,5,h2database,,,,,
h2,5,com/html/features,,,,,
h2,5,html#trace_options,,,,,
h2,5,General performance tuning/optimization:,,,,,
h2,5,http://www,,,,,
h2,5,h2database,,,,,
h2,5,com/html/performance,,,,,
h2,5,html#database_performance_tuning,,,,,
h2,5,Answers to specific questions below,,,,,
h2,5,,,,,,
h2,5,"On Jul 24, 5:26 pm, Dan Armbrust <daniel",,,,,
h2,5,armbrust,,,,,
h2,5,l,,,,,
h2,5,,,,,,
h2,5,gmail,,,,,
h2,5,com>,,,,,
h2,5,wrote:,,,,,
h2,5,> jdbc:h2:file:/work/h2/test;CACHE_SIZE=131072;,,,,,
h2,5,[snip],,,,,
h2,5,> you don't specify the units for the number that is to be,,,,,
h2,5,> passed in,,,,,
h2,5,,,,,,
h2,5,I'm assuming that it treats the number as MB?,,,,,
h2,5,But I'm,,,,,
h2,5,> just guessing,,,,,
h2,5,,,,,,
h2,5,,,,,,
h2,5,"As documented in the grammar, units are KiB, so this is ~131 MB",,,,,
h2,5,,,,,,
h2,5,"Plenty of cache, probably",1,7167,CACHE_SIZE,P <= 131072,
h2,5,,,,,,
h2,5,> [excess table scans],,,,,
h2,5,"Possible -- check the links above, and use EXPLAIN to check this",,,,,
h2,5,,,,,,
h2,5,It,,,,,
h2,5,can happen if ANALYZE hasn't been run recently or the indexes aren't,,,,,
h2,5,usable for your query,,,,,
h2,5,,,,,,
h2,5,> Any suggestions of other things to try to speed it up?,,,,,
h2,5,Look for what the cause of the problem is using the tools above,,,,,
h2,5,,,,,,
h2,5,If,,,,,
h2,5,"you find something, post it here with pertinent info about your",,,,,
h2,5,"DB structure (tables, indexes, data types & sizes)",,,,,
h2,5,,,,,,
h2,5,People are happy,,,,,
h2,5,to work with you to help improve performance,,,,,
h2,5,,,,,,
h2,5,"In one case, we were able to more than double insert performance &",,,,,
h2,5,increase query performance by an order of magnitude,,,,,
h2,5,,,,,,
h2,5,See example (still ongoing):,,,,,
h2,5,http://groups,,,,,
h2,5,google,,,,,
h2,5,com/group/h2-database/browse_frm/thread/1ebee8794e1720c7?hl=en,,,,,
h2,5,"> Is there anyway to have H2 give me something similar to the ""Explain""",,,,,
h2,5,H2 provides EXPLAIN -- see link above,,,,,
h2,5,,,,,,
h2,5,"> Or even better yet, an option to log ""slow"" queries",,,,,
h2,5,> (where slow is a user defined variable)?,,,,,
h2,5,"Yes, via the trace file",,,,,
h2,5,,,,,,
h2,5,See links above,,,,,
h2,5,,,,,,
h2,5,ABOUT PERFORMANCE IN GENERAL:,,,,,
h2,5,"H2 is a relatively young DBMS, and quite precocious for its age",,,,,
h2,5,,,,,,
h2,5,It,,,,,
h2,5,"still has some less polished areas due to its youth, but if you can",,,,,
h2,5,"help pinpoint specific problems, they will probably be fixed soon",,,,,
h2,5,,,,,,
h2,5,Thomas Mueller has been regularly pumping out multiple daily commits,,,,,
h2,5,and weekly releases,,,,,
h2,5,,,,,,
h2,5,The new page store which was recently introduced should address,,,,,
h2,5,overall performance problems,,,,,
h2,5,,,,,,
h2,5,"It's a major change, so it may be a bit",,,,,
h2,5,before it has been fully debugged and optimized though,,,,,
h2,5,,,,,,
h2,5,"Cheers,",,,,,
h2,5,"Bob McGeeDan Armbrustunread,Jul 28, 2009, 11:15:00 AM7/28/09Reply to authorSign in to reply to authorForwardSign in to forwardDeleteYou do not have permission to delete messages in this groupLinkReport message as abuseSign in to report message as abuseShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto h2-da",,,,,
h2,5,,,,,,
h2,5,googlegroups,,,,,
h2,5,"comOn Mon, Jul 27, 2009 at 12:44 PM, bob mcgee<bucky",,,,,
h2,5,,,,,,
h2,5,gmail,,,,,
h2,5,com> wrote:,,,,,
h2,5,,,,,,
h2,5,hanks for the feedback and tips,,,,,
h2,5,"Not sure how I overlooked the obviousness of the ""EXPLAIN"" keyword :)As expected, I mostly have issues with a couple of poorly designedqueries which are causing tablescans",,,,,
h2,5,"If we decide to officially support H2 as a new database, I'll have toeither rework them in such a way that H2 can use the indexes, or diginto H2's code a bit, and try to figure out why it isn't using theindexes",,,,,
h2,5,"Thanks,Danbob mcgeeunread,Jul 28, 2009, 11:53:20 AM7/28/09Reply to authorSign in to reply to authorForwardSign in to forwardDeleteYou do not have permission to delete messages in this groupLinkReport message as abuseSign in to report message as abuseShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto H2 DatabaseDan,",,,,,
h2,5,"If you can give a little more info about the queries, indexes, and",,,,,
h2,5,"table structures, I may be able to suggest why the indexes aren't",,,,,
h2,5,being used,,,,,
h2,5,,,,,,
h2,5,The most likely culprits are:,,,,,
h2,5,Not having updated selectivity statistics,,,,,
h2,5,Solution: run ANALYZE; or ANALYZE SAMPLE_SIZE 0;,,,,,
h2,5,Low Selectivity: index may not be used,,,,,
h2,5,"Solution: fake a better selectivity, if you're sure it will improve",,,,,
h2,5,performance (test this),,,,,
h2,5,Use an ALTER TABLE ALTER COLUMN SELECTIVITY statement,,,,,
h2,5,,,,,,
h2,5,Multi-column indices: can only be used in order specified,,,,,
h2,5,,,,,,
h2,5,"If first column not used in where, index won't be",,,,,
h2,5,,,,,,
h2,5,Also: did improving queries bring H2 up to the same performance level,,,,,
h2,5,as PostgreSQL?,,,,,
h2,5,I'm looking to see if there are any hotspots or points where,,,,,
h2,5,performance needs optimizations,,,,,
h2,5,,,,,,
h2,5,I've already submitted a pair of patches to Thomas for when he returns,,,,,
h2,5,from vacation --,,,,,
h2,5,these may improve start-up time and index creation speed a little,,,,,
h2,5,bit,,,,,
h2,5,,,,,,
h2,5,The speed at which strings,,,,,
h2,5,are stored/retrieved from disk can also be improved considerably by,,,,,
h2,5,storing their byte size,,,,,
h2,5,"along with their character count, but this could break compatibility",,,,,
h2,5,,,,,,
h2,5,"Cheers,",,,,,
h2,5,Bob McGeee,,,,,
h2,5,"On Jul 28, 11:15 am, Dan Armbrust <daniel",,,,,
h2,5,armbrust,,,,,
h2,5,l,,,,,
h2,5,,,,,,
h2,5,gmail,,,,,
h2,5,com>,,,,,
h2,5,wrote:,,,,,
h2,5,"Dan Armbrustunread,Jul 28, 2009, 5:41:21 PM7/28/09Reply to authorSign in to reply to authorForwardSign in to forwardDeleteYou do not have permission to delete messages in this groupLinkReport message as abuseSign in to report message as abuseShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto h2-da",,,,,
h2,5,,,,,,
h2,5,googlegroups,,,,,
h2,5,"comOn Tue, Jul 28, 2009 at 10:53 AM, bob mcgee<bucky",,,,,
h2,5,,,,,,
h2,5,gmail,,,,,
h2,5,"com> wrote:>> Dan,> If you can give a little more info about the queries, indexes, and> table structures, I may be able to suggest why the indexes aren't> being used",,,,,
h2,5,"> The most likely culprits are:> Not having updated selectivity statistics> Solution: run ANALYZE; or ANALYZE SAMPLE_SIZE 0;How or when does H2 decide to update it's own statistics?Do you need to manually update them after you create a new table,indexes, and populate the table?How frequently would one need rerun Analyze if the table is growing?>> Low Selectivity: index may not be used> Solution: fake a better selectivity, if you're sure it will improve> performance (test this)> Use an ALTER TABLE ALTER COLUMN SELECTIVITY statement",,,,,
h2,5,I've never understood the lengths that databases sometimes go to toavoid using the indexes in situations where (it thinks) the table issmall,,,,,
h2,5,,,,,,
h2,5,"If someone bothered to create the index, they probablyintended for the database to use the index where possible",,,,,
h2,5,,,,,,
h2,5,I've hadthis issue with PostgreSQL in the past too,,,,,
h2,5,,,,,,
h2,5,"I used to have to changea setting that basically told PosgreSQL if the index exists, use it",,,,,
h2,5,"Otherwise, it had a tendency to make bad decisions when it thought atable had 10 rows in it, but in reality, it now had 50,000 (but thestats were out of date)",,,,,
h2,5,"r worse, if you created a prepared statement when a table had 10 rowsin it, then populated the table with thousands of rows, then used theprepared statement, PostgreSQL would use the query plan that wascreated at the time the prepared statement was made - which wouldconclude that a table scan was always the thing to do, since the tablewas small",,,,,
h2,5,> Multi-column indices: can only be used in order specified,,,,,
h2,5,"If first column not used in where, index won't be",,,,,
h2,5,"If a table has columns A, B, C,And the primary key is A, B - I assume it creates an index on A, B",,,,,
h2,5,If I then query on just A - will it be able to use this index?,,,,,
h2,5,"Orwill it only be used for a query on A, B (in that order)?>> Also: did improving queries bring H2 up to the same performance level> as PostgreSQL?I haven't been able to rework the queries yet",,,,,
h2,5,,,,,,
h2,5,its an issue with alegacy schema design that doesn't handle the question being asked in avery straightforward way,,,,,
h2,5,,,,,,
h2,5,Probably won't put to much more work intoit unless I get a go-ahead from management saying that we want toofficially support H2,,,,,
h2,5,"y query looks something like this:select *from a, bwhere a",,,,,
h2,5,zz=b,,,,,
h2,5,zzand((a,,,,,
h2,5,xx='string' and a,,,,,
h2,5,yy<>'string' )or(a,,,,,
h2,5,yy='string' and a,,,,,
h2,5,xx<>'string' and b,,,,,
h2,5,qq='1'))There are indexes for:b,,,,,
h2,5,zza,,,,,
h2,5,zza,,,,,
h2,5,"xx, a,yya",,,,,
h2,5,yyPostgres starts this query by doing index scans for each of half of the OR,,,,,
h2,5,H2 starts with a table scan on a,,,,,
h2,5,But this isn't a big deal to me at the moment,,,,,
h2,5,,,,,,
h2,5,"I'd like to replacethe query anyway, and it's likely going to be a while before I get thego-ahead to integrate support for H2",,,,,
h2,5,,,,,,
h2,5,"Until then, I don't have a lotof cycles to test alternatives",,,,,
h2,5,,,,,,
h2,5,I was just doing a cursory test ofvarious embedded databases to see what is possible with our currentcode,,,,,
h2,5,"Thanks,Danbob mcgeeunread,Jul 29, 2009, 10:06:32 AM7/29/09Reply to authorSign in to reply to authorForwardSign in to forwardDeleteYou do not have permission to delete messages in this groupLinkReport message as abuseSign in to report message as abuseShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto H2 DatabaseDan,",,,,,
h2,5,"I've got a couple answers for now, and maybe more after source",,,,,
h2,5,diving,,,,,
h2,5,,,,,,
h2,5,"On Jul 28, 5:41 pm, Dan Armbrust <daniel",,,,,
h2,5,armbrust,,,,,
h2,5,l,,,,,
h2,5,,,,,,
h2,5,gmail,,,,,
h2,5,com>,,,,,
h2,5,wrote:,,,,,
h2,5,"> On Tue, Jul 28, 2009 at 10:53 AM, bob mcgee<buckyba",,,,,
h2,5,,,,,,
h2,5,gmail,,,,,
h2,5,com> wrote:,,,,,
h2,5,> How or when does H2 decide to update it's own statistics?,,,,,
h2,5,It doesn't,,,,,
h2,5,,,,,,
h2,5,yet (it's in the Roadmap for future develipment),,,,,
h2,5,,,,,,
h2,5,"> Do you need to manually update them after you create a new table,",,,,,
h2,5,"> indexes, and populate the table?",,,,,
h2,5,"After index creation, you should run ""ANALYZE;"" to gather stats for",,,,,
h2,5,the index,,,,,
h2,5,,,,,,
h2,5,It might be enough to assign a selectivity b/w 2 and 99 to the column,,,,,
h2,5,though,,,,,
h2,5,,,,,,
h2,5,"If data changes a lot, it's a good idea to run analyze periodically to",,,,,
h2,5,ensure the best,,,,,
h2,5,index is used,,,,,
h2,5,,,,,,
h2,5,> How frequently would one need rerun Analyze if the table is growing?,,,,,
h2,5,I believe just if you think another index might become better after,,,,,
h2,5,updates?,,,,,
h2,5,I'm not sure though -- the initial run to guarantee index use is,,,,,
h2,5,probably most important,,,,,
h2,5,,,,,,
h2,5,> I've never understood the lengths that databases sometimes go to to,,,,,
h2,5,> avoid using the indexes in situations where (it thinks) the table is,,,,,
h2,5,> small,,,,,
h2,5,,,,,,
h2,5,IANTM (I Am Not Thomas Mueller) but my understanding is that this is,,,,,
h2,5,"actually desirable, assuming your DB has a join algorithm (besides",,,,,
h2,5,nested loop join) which can operate without indices,,,,,
h2,5,,,,,,
h2,5,"In theory, table",,,,,
h2,5,scans should be able to iterate through rows much faster than B-trees,,,,,
h2,5,because of the data structures involved and opportunity for (more),,,,,
h2,5,sequential I/O patterns,,,,,
h2,5,Jumping through 2 useless items for every,,,,,
h2,5,used one in table scan might actually be faster than using an index to,,,,,
h2,5,cut the search space to 1/3 and then iterating (with the index),,,,,
h2,5,,,,,,
h2,5,"Heck if I know though, query planning is COMPLEX",,,,,
h2,5,The H2 planner is,,,,,
h2,5,"fancy enough to use genetic algorithms, and still doesn't optimize",,,,,
h2,5,"some things properly, such as IN(",,,,,
h2,5,,,,,,
h2,5,conditions,,,,,
h2,5,,,,,,
h2,5,> PostgreSQL would use the query plan that was,,,,,
h2,5,> created at the time the prepared statement was made,,,,,
h2,5,"Aww, be fair!",,,,,
h2,5,"The query planner should be smart, not psychic -- we",,,,,
h2,5,"wouldn't want Skynet level craziness happening, now would we?",,,,,
h2,5,> If I then query on just A - will it be able to use this index?  Or,,,,,
h2,5,"> will it only be used for a query on A, B (in that order)?",,,,,
h2,5,It should,,,,,
h2,5,,,,,,
h2,5,> [Query],,,,,
h2,5,"I think that should work fine with indices in H2 (in theory), once",,,,,
h2,5,selectivity is set,,,,,
h2,5,,,,,,
h2,5,"You might try the following though, where the joins are more explicit",,,,,
h2,5,--,,,,,
h2,5,"might make things easier on the other DBMSes too, depending",,,,,
h2,5,,,,,,
h2,5,SELECT * FROM A INNER JOIN B ON A,,,,,
h2,5,zz=B,,,,,
h2,5,zz,,,,,
h2,5,AND (A,,,,,
h2,5,xx='string' AND A,,,,,
h2,5,yy <> 'string'),,,,,
h2,5,OR (A,,,,,
h2,5,yy='string' AND A,,,,,
h2,5,xx <>'string' AND B,,,,,
h2,5,qq='1');,,,,,
h2,5,alternative:,,,,,
h2,5,SELECT * FROM a INNER JOIN b ON a,,,,,
h2,5,zz=b,,,,,
h2,5,zz,,,,,
h2,5,WHERE,,,,,
h2,5,(a,,,,,
h2,5,xx='string' AND b,,,,,
h2,5,yy <> 'string'),,,,,
h2,5,OR,,,,,
h2,5,(a,,,,,
h2,5,xx <>'string',,,,,
h2,5,AND a,,,,,
h2,5,yy='string' AND b,,,,,
h2,5,qq='1');,,,,,
h2,5,"Cheers,",,,,,
h2,5,"Bob McGeeThomas Muellerunread,Aug 4, 2009, 2:43:45 PM8/4/09Reply to authorSign in to reply to authorForwardSign in to forwardDeleteYou do not have permission to delete messages in this groupLinkReport message as abuseSign in to report message as abuseShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto h2-da",,,,,
h2,5,,,,,,
h2,5,googlegroups,,,,,
h2,5,"comHi,>> I've never understood the lengths that databases sometimes go to to>> avoid using the indexes in situations where (it thinks) the table is>> small",,,,,
h2,5,Me neither,,,,,
h2,5,"H2 uses an index, even if the table has no rows",,,,,
h2,5,"I'm notsaying this is smart, but that's how it works",,,,,
h2,5,"One reason is that thequery plan is re-used for prepared statements in most cases (there aresome exceptions, for example if you use LIKE)",,,,,
h2,5,"from a, b where a",,,,,
h2,5,zz=b,,,,,
h2,5,zz and ((a,,,,,
h2,5,xx='string' and a,,,,,
h2,5,yy<>'string' ) or (a,,,,,
h2,5,yy='string' and a,,,,,
h2,5,xx<>'string' and b,,,,,
h2,5,qq='1'))H2 doesn't optimize this yet,,,,,
h2,5,"If you want, you could rewrite the queryas a UNION:select * from a, b where a",,,,,
h2,5,zz=b,,,,,
h2,5,zz and a,,,,,
h2,5,xx='string' and a,,,,,
h2,5,"yy<>'string'unionselect * from a, b where a",,,,,
h2,5,zz=b,,,,,
h2,5,zz and a,,,,,
h2,5,yy='string' anda,,,,,
h2,5,xx<>'string' and b,,,,,
h2,5,"qq='1'Regards,ThomasReply allReply to authorForward0 new messagesSearchClear searchClose searchGoogle appsMain menu",,,,,
h2,6,Database of Databases - H2,,,,,
h2,6,Database of Databases,,,,,
h2,6,Browse,,,,,
h2,6,Leaderboards,,,,,
h2,6,Recent,,,,,
h2,6,Revision List,,,,,
h2,6,Accounts,,,,,
h2,6,Login,,,,,
h2,6,H2,,,,,
h2,6,"H2 (""Hypersonic 2"") is an open-source lightweight relational database management system implemented in Java, supporting standard SQL API and JDBC API, as well as PostgreSQL ODBC driver",,,,,
h2,6,H2 is characterized by its fast performance and low memory requirement,,,,,
h2,6,H2 can be either embedded into a Java application or used as a database server,,,,,
h2,6,Both in-memory and disk-based database configurations are available,,,,,
h2,6,H2 also has strong security features,,,,,
h2,6,,,,,,
h2,6,http://www,,,,,
h2,6,h2database,,,,,
h2,6,com/html/main,,,,,
h2,6,html,,,,,
h2,6,History,,,,,
h2,6,"The development of the H2 database engine started in May 2004, and first published in December 2005",,,,,
h2,6,"The original developer, Thomas Mueller, also developed the Java database engine Hypersonic SQL (1998 - 2001), which is the origin of HSQLDB",,,,,
h2,6,"The name H2 stands for Hypersonic 2, but it is built from scratch",,,,,
h2,6,,,,,,
h2,6,http://www,,,,,
h2,6,h2database,,,,,
h2,6,com/html/history,,,,,
h2,6,html,,,,,
h2,6,https://blog,,,,,
h2,6,jooq,,,,,
h2,6,org/2015/08/18/jooq-tuesdays-thomas-muller-unveils-how-hsqldb-evolved-into-the-popular-h2-database/,,,,,
h2,6,Checkpoints,,,,,
h2,6,Non-Blocking,,,,,
h2,6,Two forms of checkpoint creation is supported,,,,,
h2,6,"""CHECKPOINT"" command flushes the data to disk",,,,,
h2,6,"""CHECKPOINT SYNC"" command flushes the data to disk and forces all system buffers be written to the underlying device",,,,,
h2,6,,,,,,
h2,6,https://github,,,,,
h2,6,com/h2database/h2database,,,,,
h2,6,Compression,,,,,
h2,6,Bit Packing / Mostly Encoding,,,,,
h2,6,H2 supports two compression algorithms on objects: LZF and DEFLATE,,,,,
h2,6,"The default one LZF has faster but lower compression performance, while DEFLATE has higher compression rate",,,,,
h2,6,,,,,,
h2,6,Concurrency Control,,,,,
h2,6,Multi-version Concurrency Control (MVCC),,,,,
h2,6,The MVCC mode is enabled by default in version 1.4,,,,,
h2,6,", with the default MVStore storage engine",,,,,
h2,6,It is disabled by default when using the default PageStore storage engine in version 1.3,,,,,
h2,6,,,,,,
h2,6,,,,,,
h2,6,http://www,,,,,
h2,6,h2database,,,,,
h2,6,com/html/advanced,,,,,
h2,6,html#mvcc,,,,,
h2,6,Data Model,,,,,
h2,6,Relational,,,,,
h2,6,H2 is a traditional database management system built based on the relational model of data,,,,,
h2,6,,,,,,
h2,6,Foreign Keys,,,,,
h2,6,Supported,,,,,
h2,6,Indexes,,,,,
h2,6,B+Tree,,,,,
h2,6,Hash Table,,,,,
h2,6,AVL-Tree,,,,,
h2,6,"H2 uses Hash Table and AVL-Tree indexes for in-memory tables, and B-Tree indexes for disk-based tables",,,,,
h2,6,Indexes are created automatically for primary key and unique constraints,,,,,
h2,6,Multi-dimensional indexes is supported in H2,,,,,
h2,6,"An algorithm called ""bit-interleaving"", which maps the multi-dimensional key to a single dimensional value on a space-filling curve, is implemented to execute multi-dimension (spatial) range queries efficiently",,,,,
h2,6,,,,,,
h2,6,http://www,,,,,
h2,6,h2database,,,,,
h2,6,com/html/performance,,,,,
h2,6,html,,,,,
h2,6,http://www,,,,,
h2,6,h2database,,,,,
h2,6,com/html/features,,,,,
h2,6,html#multi_dimensional,,,,,
h2,6,Isolation Levels,,,,,
h2,6,Read Uncommitted,,,,,
h2,6,Read Committed,,,,,
h2,6,Serializable,,,,,
h2,6,"H2 supports three isolation levels for all data manipulation language (DML) statements: Read Committed, Read Uncommitted and Serializable",,,,,
h2,6,"The default level is ""Read Committed"" in most cases",,,,,
h2,6,Table level locking is used to make sure all connections only see consistent data,,,,,
h2,6,When MVCC is enabled (default setting in version 1.4,,,,,
h2,6,"when using the MVStore), instead of table level locking, rows are locked for update and ""Read Committed"" is used in all cases",,,,,
h2,6,,,,,,
h2,6,http://www,,,,,
h2,6,h2database,,,,,
h2,6,com/html/advanced,,,,,
h2,6,html#transaction_isolation,,,,,
h2,6,Joins,,,,,
h2,6,Index Nested Loop Join,,,,,
h2,6,Logging,,,,,
h2,6,Physical Logging,,,,,
h2,6,Query Compilation,,,,,
h2,6,Code Generation,,,,,
h2,6,H2 parses the prepared statement and performs local optimization,,,,,
h2,6,,,,,,
h2,6,Query Execution,,,,,
h2,6,Tuple-at-a-Time Model,,,,,
h2,6,Query Interface,,,,,
h2,6,SQL,,,,,
h2,6,H2 supports standard SQL API,,,,,
h2,6,,,,,,
h2,6,Storage Architecture,,,,,
h2,6,Hybrid,,,,,
h2,6,Storage Model,,,,,
h2,6,N-ary Storage Model (Row/Record),,,,,
h2,6,Stored Procedures,,,,,
h2,6,Supported,,,,,
h2,6,"In H2, Java functions can be used as stored procedures",,,,,
h2,6,,,,,,
h2,6,System Architecture,,,,,
h2,6,Shared-Disk,,,,,
h2,6,Embedded,,,,,
h2,6,"In embedded mode, H2 database can be embedded into an application and runs inside the same JVM using JDBC driver",,,,,
h2,6,"In the server mode, H2 database is opened remotely using the JDBC driver or ODBC API, and all data is transferred over TCP/IP",,,,,
h2,6,,,,,,
h2,6,http://www,,,,,
h2,6,h2database,,,,,
h2,6,com/html/features,,,,,
h2,6,html#connection_modes,,,,,
h2,6,Views,,,,,
h2,6,Virtual Views,,,,,
h2,6,H2 supports read only views and inline views,,,,,
h2,6,"When using ""instead of"" triggers, views are updatable",,,,,
h2,6,,,,,,
h2,6,Revision #5,,,,,
h2,6,|,,,,,
h2,6,Updated 07/23/2019 11:33 p,,,,,
h2,6,m,,,,,
h2,6,,,,,,
h2,6,Derivative Systems,,,,,
h2,6,Lealone,,,,,
h2,6,People Also Viewed,,,,,
h2,6,Website,,,,,
h2,6,http://www,,,,,
h2,6,h2database,,,,,
h2,6,com/,,,,,
h2,6,Source Code,,,,,
h2,6,https://github,,,,,
h2,6,com/h2database/h2database,,,,,
h2,6,Tech Docs,,,,,
h2,6,http://www,,,,,
h2,6,h2database,,,,,
h2,6,com/html/quickstart,,,,,
h2,6,html,,,,,
h2,6,Developer,,,,,
h2,6,Thomas Mueller,,,,,
h2,6,Country of Origin,,,,,
h2,6,CH,,,,,
h2,6,Start Year,,,,,
h2,6,2004,,,,,
h2,6,http://www,,,,,
h2,6,h2database,,,,,
h2,6,com/html/history,,,,,
h2,6,html,,,,,
h2,6,Project Type,,,,,
h2,6,Open Source,,,,,
h2,6,Written in,,,,,
h2,6,Java,,,,,
h2,6,Supported languages,,,,,
h2,6,Java,,,,,
h2,6,Compatible With,,,,,
h2,6,"HyperSQL, PostgreSQL",,,,,
h2,6,Operating Systems,,,,,
h2,6,All OS with Java VM,,,,,
h2,6,Licenses,,,,,
h2,6,"Eclipse Public License, Mozilla Public License",,,,,
h2,6,Wikipedia,,,,,
h2,6,https://en,,,,,
h2,6,wikipedia,,,,,
h2,6,org/wiki/H2_(DBMS),,,,,
h2,6,Revision #5,,,,,
h2,6,|,,,,,
h2,6,Updated 07/23/2019 11:33 p,,,,,
h2,6,m,,,,,
h2,6,,,,,,
h2,6,Derivative Systems,,,,,
h2,6,Lealone,,,,,
h2,6,People Also Viewed,,,,,
h2,6,Copyright © 2020,,,,,
h2,6,&bullet,,,,,
h2,6,Carnegie Mellon Database Group,,,,,
h2,6,Contact,,,,,
h2,6,Github,,,,,
h2,7,H2 Database: Features and Usage,,,,,
h2,7,Toggle navigation,,,,,
h2,7,Eclipse Kura™ Documentation,,,,,
h2,7,Introduction,,,,,
h2,7,Overview,,,,,
h2,7,Raspberry Pi Quick Start,,,,,
h2,7,Docker Quick Start,,,,,
h2,7,Configuration,,,,,
h2,7,Administration Console,,,,,
h2,7,Gateway Status,,,,,
h2,7,Network Configuration,,,,,
h2,7,Ethernet Configuration,,,,,
h2,7,Wi-Fi Configuration,,,,,
h2,7,Firewall Configuration,,,,,
h2,7,Cloud Services,,,,,
h2,7,Cloud Service Configuration,,,,,
h2,7,Data Service Configuration,,,,,
h2,7,Connection Monitors in DataService,,,,,
h2,7,Message Publishing Backoff Delay,,,,,
h2,7,MqttData Transport Service Configuration,,,,,
h2,7,SSL Configuration,,,,,
h2,7,Gateway Administration Console Authentication,,,,,
h2,7,Built-in Services,,,,,
h2,7,Introduction,,,,,
h2,7,Simple Artemis MQTT Broker Service,,,,,
h2,7,ActiveMQ Artemis Broker Service,,,,,
h2,7,Clock Service,,,,,
h2,7,Deployment Service,,,,,
h2,7,Cloudcat,,,,,
h2,7,Command Service,,,,,
h2,7,H2 Database: Features and Usage,,,,,
h2,7,H2 database: Connecting external applications,,,,,
h2,7,Position Service,,,,,
h2,7,REST Service,,,,,
h2,7,Watchdog Service,,,,,
h2,7,Administration,,,,,
h2,7,Directory Layout,,,,,
h2,7,Snapshot Management,,,,,
h2,7,Application Management,,,,,
h2,7,Remote Management with Everyware Cloud,,,,,
h2,7,Remote Management with Eclipse Kapua,,,,,
h2,7,Cloud Connection API and Usage,,,,,
h2,7,Overview,,,,,
h2,7,User guide,,,,,
h2,7,Application developer guide,,,,,
h2,7,Cloud connection developer guide,,,,,
h2,7,Built-in Cloud Services,,,,,
h2,7,Cloud Platforms Connection,,,,,
h2,7,Eurotech Everyware Cloud™ platform,,,,,
h2,7,Amazon AWS IoT™ platform,,,,,
h2,7,Azure IoT Hub™ platform,,,,,
h2,7,Eclipse Kapua™ platform,,,,,
h2,7,Eclipse Hono™ platform,,,,,
h2,7,Apache Camel Integration,,,,,
h2,7,Apache Camel™ integration,,,,,
h2,7,Apache Camel™ as application,,,,,
h2,7,Apache Camel™ Cloud Service,,,,,
h2,7,Connect Field Devices,,,,,
h2,7,"Drivers, Assets and Channels",,,,,
h2,7,Field Protocols,,,,,
h2,7,Asset implementation,,,,,
h2,7,Driver implementation,,,,,
h2,7,I/O APIs,,,,,
h2,7,S7comm Driver,,,,,
h2,7,OPC UA Driver,,,,,
h2,7,GPIO Driver,,,,,
h2,7,BLE Beacon Drivers,,,,,
h2,7,TI SensorTag Driver,,,,,
h2,7,RaspberryPi SenseHat driver,,,,,
h2,7,Xdk Driver,,,,,
h2,7,Kura Wires,,,,,
h2,7,Kura Wires overview,,,,,
h2,7,How to use DB Store and Filter components in Kura Wires,,,,,
h2,7,FIFO Wire Component,,,,,
h2,7,OPC/UA application in Kura Wires,,,,,
h2,7,TI SensorTag driver in Kura Wires,,,,,
h2,7,Kura Wires MQTT namespace,,,,,
h2,7,Script Filter Wire component,,,,,
h2,7,GPIO driver in Kura Wires,,,,,
h2,7,Multiport wire components,,,,,
h2,7,Conditional component,,,,,
h2,7,Join component,,,,,
h2,7,Mathematical components example,,,,,
h2,7,Statistical components examples,,,,,
h2,7,Connect to a RuuviTag+ using the Eddystone™ Driver,,,,,
h2,7,iBeacon™ driver in Kura Wires,,,,,
h2,7,Development,,,,,
h2,7,Getting Started,,,,,
h2,7,Hello World Example,,,,,
h2,7,Deploying Bundles,,,,,
h2,7,Remote debugging on target platform,,,,,
h2,7,Configurable Application,,,,,
h2,7,Publishing Application,,,,,
h2,7,Serial Example,,,,,
h2,7,Device I/O,,,,,
h2,7,Modbus Protocol,,,,,
h2,7,How to Use Watchdog,,,,,
h2,7,How to Manage Network Settings,,,,,
h2,7,Legacy Bluetooth LE Example,,,,,
h2,7,Legacy BLE Beacon Example,,,,,
h2,7,Legacy BLE Beacon Scanner Example,,,,,
h2,7,Kura Bluetooth LE APIs,,,,,
h2,7,Kura Beacon APIs,,,,,
h2,7,Reference,,,,,
h2,7,Kura Remote Device Management,,,,,
h2,7,API Reference,,,,,
h2,7,Hardware Targets,,,,,
h2,7,ASSET-V1 MQTT Namespace,,,,,
h2,7,Quality Assurance,,,,,
h2,7,Introduction,,,,,
h2,7,Unit Testing,,,,,
h2,7,System Testing,,,,,
h2,7,H2 Database: Features and Usage,,,,,
h2,7,Supported features,,,,,
h2,7,Limitations,,,,,
h2,7,Changes to database related components,,,,,
h2,7,Usage,,,,,
h2,7,Creating a new H2 database instance,,,,,
h2,7,Selecting a database instance for existing Kura components,,,,,
h2,7,Enabling the TCP Server,,,,,
h2,7,Using the Web console,,,,,
h2,7,Changing the password,,,,,
h2,7,Persistence Modes,,,,,
h2,7,"Starting from version 3.1.0, Eclipse Kura includes the H2 database engine",,,,,
h2,7,This document provides a description of the main features of the H2 database integrated with Eclipse Kura and gives some basic information about its usage,,,,,
h2,7,,,,,,
h2,7,Supported Features,,,,,
h2,7,Eclipse Kura supports the following H2 database features:,,,,,
h2,7,Persistence modes: The H2 implementation currently supports in-memory and file-based database instances,,,,,
h2,7,See,,,,,
h2,7,Persistence Modes for more details,,,,,
h2,7,,,,,,
h2,7,"Multiple database instances: It is possible to create and configure multiple database instances from the Kura Web UI, these instances can be selectively consumed by applications",,,,,
h2,7,A default database instance is created automatically,,,,,
h2,7,,,,,,
h2,7,TCP Server: The current implementation allows external processes to access the database instances managed by Kura using TCP,,,,,
h2,7,This enables the integration of external applications that can share data with Kura components using the database,,,,,
h2,7,,,,,,
h2,7,Web based console: It is possible to start the H2 Web console directly from the Kura Web UI,,,,,
h2,7,The console can be used to inspect the database contents and perform arbitrary queries for debug purposes,,,,,
h2,7,,,,,,
h2,7,Basic credential management: The current implementation allows to change the password of the admin DB user from the Kura Web UI,,,,,
h2,7,This allows to restrict access to existing database instances,,,,,
h2,7,,,,,,
h2,7,Limitations,,,,,
h2,7,The following list briefly describes some limitations of the H2 database integrated with Eclipse Kura:,,,,,
h2,7,Private in-memory instances: Only named in-memory instances are supported (e,,,,,
h2,7,g,,,,,
h2,7,"jdbc:h2:mem:<dbname>, where <dbname> is not the empty string), private instances represented by the jdbc:h2:mem: URL are currently not supported",,,,,
h2,7,,,,,,
h2,7,Remote connections: The current implementation only supports embedded database instances,,,,,
h2,7,Connecting to remote instances using the jdbc:h2:tcp:* and jdbc:h2:ssl:* connector URLs is not supported,,,,,
h2,7,,,,,,
h2,7,Changes to database related components,,,,,
h2,7,The DataService in Eclipse Kura uses the H2 database by default for implementing the message store,,,,,
h2,7,"However, there is no support for migrating an old HSQLDB database to the new H2",,,,,
h2,7,,,,,,
h2,7,The new H2DbWireRecordFilter and H2DbWireRecordStore Wire components have been added,,,,,
h2,7,"These components provide the same functionalities offered by the HSQL based DbWireRecordFilter and DbWireRecordStore components, but using the H2 database",,,,,
h2,7,"The legacy components will continue to be available in order to keep backward compatibility, but will be deprecated since Kura 3.1.0 and should not be used for new installations",,,,,
h2,7,,,,,,
h2,7,Usage,,,,,
h2,7,Creating a new H2 database instance,,,,,
h2,7,"To create a new H2 database instance, use the following procedure:",,,,,
h2,7,"Open the Kura Web UI press and on the + button in the side menu, under the Services section",,,,,
h2,7,A pop-up dialog should appear,,,,,
h2,7,,,,,,
h2,7,Select org,,,,,
h2,7,eclipse,,,,,
h2,7,kura,,,,,
h2,7,core,,,,,
h2,7,db,,,,,
h2,7,"H2DbService from the Factories drop down list, enter an arbitrary name for the new instance and click Apply",,,,,
h2,7,,,,,,
h2,7,"An entry for the newly created instance should appear in the side menu under Services, click on it to review its configuration:",,,,,
h2,7,Change the settings if needed and then click Apply,,,,,
h2,7,,,,,,
h2,7,For more information about the DB URL format see http://www,,,,,
h2,7,h2database,,,,,
h2,7,com/html/features,,,,,
h2,7,html and Persistence Modes,,,,,
h2,7,,,,,,
h2,7,It is not possible to create different DB instances that manage the same DB url,,,,,
h2,7,When creating a new instance please make sure that the URL specified in the db,,,,,
h2,7,connector,,,,,
h2,7,url field is not managed by another instance,,,,,
h2,7,,,,,,
h2,7,Selecting a database instance for existing Kura components,,,,,
h2,7,A database instance is identified by its Kura service pid,,,,,
h2,7,The pid for the default instance is org,,,,,
h2,7,eclipse,,,,,
h2,7,kura,,,,,
h2,7,db,,,,,
h2,7,"H2DbService, the pid for instances created using the Web UI is the string entered in the Name field at step 2 of the previous section",,,,,
h2,7,,,,,,
h2,7,The built-in Kura components that use database functionalities allow user to specify which instance to use in their configuration,,,,,
h2,7,These components are the DataService component of the cloud stack and the H2DbWireRecordFilter and H2DbWireRecordStore wire components,,,,,
h2,7,,,,,,
h2,7,The configuration of each component contains a property that allows specifying the service pid of the desired instance:,,,,,
h2,7,DataService,,,,,
h2,7,The pid of the database instance can be specified using the store,,,,,
h2,7,db,,,,,
h2,7,service,,,,,
h2,7,pid field,,,,,
h2,7,,,,,,
h2,7,DbWireRecordFilter,,,,,
h2,7,The pid of the database instance can be specified using the db,,,,,
h2,7,service,,,,,
h2,7,pid field,,,,,
h2,7,,,,,,
h2,7,DbWireRecordStore,,,,,
h2,7,The pid of the database instance can be specified using the db,,,,,
h2,7,service,,,,,
h2,7,pid field,,,,,
h2,7,,,,,,
h2,7,Enabling the TCP Server,,,,,
h2,7,The TCP server can be used by creating an H2DbServer instance:,,,,,
h2,7,"Open the Kura Web UI press and on the + button in the side menu, under the Services section",,,,,
h2,7,A pop-up dialog should appear,,,,,
h2,7,,,,,,
h2,7,Select org,,,,,
h2,7,eclipse,,,,,
h2,7,kura,,,,,
h2,7,core,,,,,
h2,7,db,,,,,
h2,7,"H2DbServer from the Factories drop down list, enter an arbitrary name for the new instance and click Apply",,,,,
h2,7,,,,,,
h2,7,Click on the name of the new server instance in the left side of the Web Ui,,,,,
h2,7,The configuration of the server component will appear:,,,,,
h2,7,Set the db,,,,,
h2,7,server,,,,,
h2,7,type field to TCP,,,,,
h2,7,Review the server options under db,,,,,
h2,7,server,,,,,
h2,7,"commandline, check http://www",,,,,
h2,7,h2database,,,,,
h2,7,com/javadoc/org/h2/tools/Server,,,,,
h2,7,html for more information about the available options,,,,,
h2,7,,,,,,
h2,7,"The default settings, -tcpPort 9123 -tcpAllowOthers -ifExists, configure the server to bind on port 9123, to allow connections from any host and to allow access only to existing databases",,,,,
h2,7,,,,,,
h2,7,Set the db,,,,,
h2,7,server,,,,,
h2,7,enabled to true,,,,,
h2,7,,,,,,
h2,7,The server is now listening on the specified port,,,,,
h2,7,,,,,,
h2,7,Make sure to review the firewall configuration in order to ensure that the server is reachable from the external process,,,,,
h2,7,,,,,,
h2,7,Enabling the Web console,,,,,
h2,7,"In order to enable the H2 Web console, proceed as follows:",,,,,
h2,7,Create a new H2DbServer instance like in the previous section,,,,,
h2,7,,,,,,
h2,7,Set the db,,,,,
h2,7,server,,,,,
h2,7,type field to WEB,,,,,
h2,7,Enter appropriate parameters for the Web server in the db,,,,,
h2,7,server,,,,,
h2,7,commandline field,,,,,
h2,7,An example of valid settings can be -webPort 9123 -webAllowOthers -ifExists,,,,,
h2,7,,,,,,
h2,7,Set the db,,,,,
h2,7,server,,,,,
h2,7,enabled to true,,,,,
h2,7,,,,,,
h2,7,The server is now listening on the specified port,,,,,
h2,7,Make sure to review the firewall configuration in order to ensure that the server is reachable from the external process,,,,,
h2,7,,,,,,
h2,7,Use a browser to access the console,,,,,
h2,7,"Open the http://<device-ip>:<web-console-port> URL, where <device-ip> is the IP address of the Kura device and <web-console-port> is the port specified at step 3",,,,,
h2,7,,,,,,
h2,7,Enter the DB URL as specified in the Kura configuration in the JDBC URL field and the credentials,,,,,
h2,7,"Click on Connect, you should be able to access the console",,,,,
h2,7,,,,,,
h2,7,Changing the password,,,,,
h2,7,The prerequisite for being able to change the password is that,,,,,
h2,7,Open the configuration of the desired database instance in the Kura Web UI,,,,,
h2,7,,,,,,
h2,7,Enter the new password in the db,,,,,
h2,7,password field,,,,,
h2,7,,,,,,
h2,7,Click Apply,,,,,
h2,7,,,,,,
h2,7,Note:,,,,,
h2,7,"If the H2DbServer instance fails to open a database, it will delete and recreate all database files",,,,,
h2,7,This behavior is aimed at preventing potential issues caused by incorrect credentials in the configuration snapshots,,,,,
h2,7,It is highly recommended to perform a backup of an existing database before trying to open it using a H2DbService instance and before changing the password,,,,,
h2,7,,,,,,
h2,7,Persistence Modes,,,,,
h2,7,The H2 database support several levels of persistence modes,,,,,
h2,7,,,,,,
h2,7,In memory,,,,,
h2,7,"An in-memory database instance can be created using the following URL structure: jdbc:h2:mem:<dbname>, where <dbname> is a non-empty string that represents the database name",,,,,
h2,7,,,,,,
h2,7,This configuration is suggested for database instances that are frequently updated,,,,,
h2,7,,,,,,
h2,7,Examples:,,,,,
h2,7,jdbc:h2:mem:kuradb,,,,,
h2,7,jdbc:h2:mem:mydb,,,,,
h2,7,The default database instance is in-memory by default and uses the jdbc:h2:mem:kuradb URL,,,,,
h2,7,,,,,,
h2,7,Most persistent,,,,,
h2,7,"A persistent database instance can be created using the jdbc:h2:file:<dbpath>, where <dbpath> is a non-empty string that represents the database path",,,,,
h2,7,,,,,,
h2,7,If no URL parameters are supplied the database will enable the transaction log by default,,,,,
h2,7,The transaction log is used to restore the database to a consistent state after a crash or power failure,,,,,
h2,7,"This provides good protection against data losses but causes a lot of writes to the storage device, reducing both performance and the lifetime of flash-based storage devices",,,,,
h2,7,,,,,,
h2,7,This configuration is suggested for database instances that are rarely updated,,,,,
h2,7,,,,,,
h2,7,Examples:,,,,,
h2,7,jdbc:h2:file:/opt/db/mydb,,,,,
h2,7,Make sure to use absolute paths in the db URL since H2 does not support db paths relative to the working directory,,,,,
h2,7,,,,,,
h2,7,Mostly persistent,,,,,
h2,7,The transaction log can be disabled by appending the LOG=0 parameter to the DB URL,1,,LOG,P = 0,
h2,7,"In this way it is possible to reduce the stress on the underlying storage device and increase performance, at the expense of a higher probability of losing data in case of power failure",,,,,
h2,7,,,,,,
h2,7,In order to reduce the probability of data losses the H2DbService performs periodic checkpoints on the database,,,,,
h2,7,A checkpoint forces all pending modifications to be committed to the storage device,,,,,
h2,7,The interval in seconds between two consecutive checkpoints can be configured using the db,,,,,
h2,7,checkpoint,,,,,
h2,7,interval,,,,,
h2,7,seconds property,,,,,
h2,7,,,,,,
h2,7,This configuration is suggested for database instances with intermediate update rates,,,,,
h2,7,,,,,,
h2,7,Examples:,,,,,
h2,7,jdbc:h2:file:/opt/db/mydb;LOG=0,,,,,
h2,7,Filesystem tuning,,,,,
h2,7,The H2 database might become corrupted [1] in case of power failure,,,,,
h2,7,,,,,,
h2,7,In case of file-backed database (e,,,,,
h2,7,g,,,,,
h2,7,"mostly or most persistent), the following database mount options can improve database reliability, reducing the database corruption probability at the expense of reduced performance and lifetime of the flash storage devices:",,,,,
h2,7,data=journal: From EXT4(5) Linux MAN Page:,1,,data,P = journal,
h2,7,All data is committed into the journal prior to being written into the main filesystem,,,,,
h2,7,,,,,,
h2,7,This setting only applies to ext3/ext4 filesystems,,,,,
h2,7,,,,,,
h2,7,sync: From mount(8) Linux MAN Page:,,,,,
h2,7,All I/O to the filesystem should be done synchronously,,,,,
h2,7,In case of media with limited number of write cycles (e,,,,,
h2,7,g,,,,,
h2,7,some flash drives) “sync” may cause life-cycle shortening,,,,,
h2,7,,,,,,
h2,7,"After some long running tests [1], it appears that the data=journal option alone is enough to reduce corruption probability (no corruption observed during the test)",,,,,
h2,7,,,,,,
h2,7,[1] https://github,,,,,
h2,7,com/eclipse/kura/issues/2169,,,,,
h2,7,"In order to apply the options above, perform the following steps:",,,,,
h2,7,"1 - Edit the /etc/fstab row for the filesystem containing the database file, appending the desired options to the fourth column, using comma as separator",,,,,
h2,7,,,,,,
h2,7,For example on Raspbian an /etc/fstab file with data=journal enabled will look like the following:,,,,,
h2,7,proc,,,,,
h2,7,/proc,,,,,
h2,7,proc,,,,,
h2,7,defaults,,,,,
h2,7,0,,,,,
h2,7,0,,,,,
h2,7,PARTUUID=3920f25c-01,,,,,
h2,7,/boot,,,,,
h2,7,vfat,,,,,
h2,7,defaults,,,,,
h2,7,0,,,,,
h2,7,2,,,,,
h2,7,PARTUUID=3920f25c-02,,,,,
h2,7,/,,,,,
h2,7,ext4,,,,,
h2,7,"defaults,noatime,data=journal",,,,,
h2,7,0,,,,,
h2,7,1,,,,,
h2,7,"# a swapfile is not a swap partition, no line here",,,,,
h2,7,#,,,,,
h2,7,use,,,,,
h2,7,dphys-swapfile swap[on|off],,,,,
h2,7,for that,,,,,
h2,7,"2 - If the database resides on the root filesystem, the data=journal option must be specified in the kernel command line as well, by appending rootflags=data=journal",1,,rootflags,P = data=journal,Root file system
h2,7,On Raspbian this can be done by editing the /boot/cmdline,,,,,
h2,7,txt file:,,,,,
h2,7,dwc_otg,,,,,
h2,7,"lpm_enable=0 console=serial0,115200 console=tty1 root=PARTUUID=3920f25c-02 rootfstype=ext4 elevator=deadline fsck",,,,,
h2,7,repair=yes rootwait rootflags=data=journal,,,,,
h2,7,Documentation for Eclipse Kura™,,,,,
h2,8,Performance issues using H2 DB in embedded mode with heavy load of data in database - Stack Overflow,,,,,
h2,8,Stack Overflow,,,,,
h2,8,About,,,,,
h2,8,Products,,,,,
h2,8,For Teams,,,,,
h2,8,Stack Overflow,,,,,
h2,8,Public questions & answers,,,,,
h2,8,Stack Overflow for Teams,,,,,
h2,8,Where developers & technologists share private knowledge with coworkers,,,,,
h2,8,Jobs,,,,,
h2,8,Programming & related technical career opportunities,,,,,
h2,8,Talent,,,,,
h2,8,Recruit tech talent & build your employer brand,,,,,
h2,8,Advertising,,,,,
h2,8,Reach developers & technologists worldwide,,,,,
h2,8,About the company,,,,,
h2,8,Loading…,,,,,
h2,8,Log in,,,,,
h2,8,Sign up,,,,,
h2,8,current community,,,,,
h2,8,Stack Overflow,,,,,
h2,8,help,,,,,
h2,8,chat,,,,,
h2,8,Meta Stack Overflow,,,,,
h2,8,your communities,,,,,
h2,8,Sign up or log in to customize your list,,,,,
h2,8,,,,,,
h2,8,more stack exchange communities,,,,,
h2,8,company blog,,,,,
h2,8,"By using our site, you acknowledge that you have read and understand our Cookie Policy, Privacy Policy, and our Terms of Service",,,,,
h2,8,,,,,,
h2,8,Home,,,,,
h2,8,Public,,,,,
h2,8,Stack Overflow,,,,,
h2,8,Tags,,,,,
h2,8,Users,,,,,
h2,8,Find a Job,,,,,
h2,8,Jobs,,,,,
h2,8,Companies,,,,,
h2,8,Teams,,,,,
h2,8,What’s this?,,,,,
h2,8,Free 30 Day Trial,,,,,
h2,8,Teams,,,,,
h2,8,Q&A for Work,,,,,
h2,8,"Stack Overflow for Teams is a private, secure spot for you and",,,,,
h2,8,your coworkers to find and share information,,,,,
h2,8,,,,,,
h2,8,Learn more,,,,,
h2,8,Performance issues using H2 DB in embedded mode with heavy load of data in database,,,,,
h2,8,Ask Question,,,,,
h2,8,Asked,,,,,
h2,8,"8 years, 8 months ago",,,,,
h2,8,Active,,,,,
h2,8,"4 years, 11 months ago",,,,,
h2,8,Viewed,,,,,
h2,8,16k times,,,,,
h2,8,8,,,,,
h2,8,8,,,,,
h2,8,I am working a java application using H2 Database in embedded mode,,,,,
h2,8,,,,,,
h2,8,My Application consumes 150mb of heap memory,,,,,
h2,8,,,,,,
h2,8,Problem:,,,,,
h2,8,Steps,,,,,
h2,8,"When I load H2 database with 2 mb of data, database access is fast and heap memory size 160mb",,,,,
h2,8,,,,,,
h2,8,But When I load H2 database with 30 mb of data(h2 db file size =30 mb),,,,,
h2,8,Then accessing the database from my application is very slow,,,,,
h2,8,the reason being my application heap size is hugely grown to 300mb of size hence degraded performance,,,,,
h2,8,I confirmed using JConsole,,,,,
h2,8,,,,,,
h2,8,"So my understanding is since H2 database is developed using java and since I am using H2 database in embedded mode, the heap size of H2 Database is added to my application which is breaking the application",,,,,
h2,8,,,,,,
h2,8,"The problem is as H2 database size is grown, the performance of my application is degraded",,,,,
h2,8,,,,,,
h2,8,How to resolve the issue?,,,,,
h2,8,I have given the connection as,,,,,
h2,8,"rurl = ""jdbc:h2:file:/"" + getDBPath() + dbname + "";CACHE_SIZE="" + (1024 * 1024) + "";PAGE_SIZE=512"";",,,,,
h2,8,to increase the cache of H2,,,,,
h2,8,,,,,,
h2,8,h2 database-performance,,,,,
h2,8,share,,,,,
h2,8,|,,,,,
h2,8,improve this question,,,,,
h2,8,|,,,,,
h2,8,follow,,,,,
h2,8,|,,,,,
h2,8,edited Dec 28 '15 at 17:03,,,,,
h2,8,Nat,,,,,
h2,8,"3,4311818 silver badges2121 bronze badges",,,,,
h2,8,asked Mar 21 '12 at 5:06,,,,,
h2,8,Harish AlwalaHarish Alwala,,,,,
h2,8,13411 gold badge11 silver badge99 bronze badges,,,,,
h2,8,"The cache size of an persistent, embedded H2 database is 16 MB by default",,,,,
h2,8,"Do you use an in-memory database or a higher cache setting? Are you sure performance degrades because of heap memory usage (because this is very uncommon), and did check where the performance problem is (for example jps -l / jstack -l <pid>)?",,,,,
h2,8,– Thomas Mueller,,,,,
h2,8,Mar 21 '12 at 18:03,,,,,
h2,8,You have used non-default cache size and page size - what are the reason to not use the default settings?,,,,,
h2,8,– Thomas Mueller,,,,,
h2,8,Mar 22 '12 at 5:59,,,,,
h2,8,Did you find a solution for this? I'm experiencing the same problem,,,,,
h2,8,"Small database is fine, if I insert lots of data into one table all the queries start to take much longer",,,,,
h2,8,,,,,,
h2,8,– Gust,,,,,
h2,8,Jan 26 '17 at 17:32,,,,,
h2,8,add a comment,,,,,
h2,8,|,,,,,
h2,8,1 Answer,,,,,
h2,8,1,,,,,
h2,8,Active,,,,,
h2,8,Oldest,,,,,
h2,8,Votes,,,,,
h2,8,9,,,,,
h2,8,"In most cases, performance problems are not actually related to the cache size or page size",,,,,
h2,8,"To analyze performance problems, see the H2 documentation, specially:",,,,,
h2,8,Database Performance Tuning,,,,,
h2,8,Using the Built-In Profiler,,,,,
h2,8,Application Profiling,,,,,
h2,8,Database Profiling,,,,,
h2,8,Statement Execution Plans,,,,,
h2,8,How Data is Stored and How Indexes Work,,,,,
h2,8,"If you set the cache size manually to 1024 * 1024, then H2 will use 1 GB heap memory",1,8107,CACHE_SIZE,P = 1024 * 1024,
h2,8,This setting should only be use if you have a lot more than 1 GB of physical memory available to the JVM (using java -Xmx2048m or similar),,,,,
h2,8,"Otherwise, I suggest to use the default settings (16 MB cache size) instead",1,8107,CACHE_SIZE,P = 16 MB,Memory <= 1 GB
h2,8,,,,,,
h2,8,Using a smaller page size than the default might decrease performance,,,,,
h2,8,"This depends on the hard disk, and possibly on the access pattern",,,,,
h2,8,"However, there is no list of rules when to use a non-default page size - the only way to find out is to try different settings",,,,,
h2,8,,,,,,
h2,8,share,,,,,
h2,8,|,,,,,
h2,8,improve this answer,,,,,
h2,8,|,,,,,
h2,8,follow,,,,,
h2,8,|,,,,,
h2,8,answered Mar 22 '12 at 5:58,,,,,
h2,8,Thomas MuellerThomas Mueller,,,,,
h2,8,43.7k1212 gold badges9696 silver badges120120 bronze badges,,,,,
h2,8,add a comment,,,,,
h2,8,|,,,,,
h2,8,Your Answer,,,,,
h2,8,Thanks for contributing an answer to Stack Overflow!Please be sure to answer the question,,,,,
h2,8,"Provide details and share your research!But avoid …Asking for help, clarification, or responding to other answers",,,,,
h2,8,Making statements based on opinion; back them up with references or personal experience,,,,,
h2,8,"To learn more, see our tips on writing great answers",,,,,
h2,8,,,,,,
h2,8,Draft saved,,,,,
h2,8,Draft discarded,,,,,
h2,8,Sign up or log in,,,,,
h2,8,Sign up using Google,,,,,
h2,8,Sign up using Facebook,,,,,
h2,8,Sign up using Email and Password,,,,,
h2,8,Submit,,,,,
h2,8,Post as a guest,,,,,
h2,8,Name,,,,,
h2,8,Email,,,,,
h2,8,"Required, but never shown",,,,,
h2,8,Post as a guest,,,,,
h2,8,Name,,,,,
h2,8,Email,,,,,
h2,8,"Required, but never shown",,,,,
h2,8,Post Your Answer,,,,,
h2,8,Discard,,,,,
h2,8,"By clicking “Post Your Answer”, you agree to our terms of service, privacy policy and cookie policy",,,,,
h2,8,Not the answer you're looking for? Browse other questions tagged h2 database-performance,,,,,
h2,8,or ask your own question,,,,,
h2,8,,,,,,
h2,8,The Overflow Blog,,,,,
h2,8,The semantic future of the web,,,,,
h2,8,Podcast 294: Cleaning up build systems and gathering computer history,,,,,
h2,8,Featured on Meta,,,,,
h2,8,New Feature: Table Support,,,,,
h2,8,Linked,,,,,
h2,8,2,,,,,
h2,8,Increase performance of query using h2 jar when importing from csv,,,,,
h2,8,Related,,,,,
h2,8,314,,,,,
h2,8,How big can a MySQL database get before performance starts to degrade,,,,,
h2,8,2,,,,,
h2,8,H2 (embedded) Database in Java - StackOverflowError,,,,,
h2,8,5,,,,,
h2,8,H2 DB in Memory Clean the RAM,,,,,
h2,8,3,,,,,
h2,8,Continuous Increase in H2 db size after dropping and loading same data repeatedly,,,,,
h2,8,1,,,,,
h2,8,H2 Server consume 1G memory to load a 250m file based database?,,,,,
h2,8,2,,,,,
h2,8,h2 index corruption? embedded database loaded with runscript has “invisible” rows,,,,,
h2,8,2,,,,,
h2,8,H2 Query performance when joining large table,,,,,
h2,8,5,,,,,
h2,8,Is H2 database suitable as embedded database with large tables?,,,,,
h2,8,1,,,,,
h2,8,Neo4j-ogm: Decreasing write/mapping performance,,,,,
h2,8,0,,,,,
h2,8,"How can you export a MySQL database, representing binary data with X'val' rather than 0xval hex notation?",,,,,
h2,8,Hot Network Questions,,,,,
h2,8,Why is it impossible to measure position and momentum at the same time with arbitrary precision?,,,,,
h2,8,What spell permits the caster to take on the alignment of a nearby person or object?,,,,,
h2,8,Minimum current level to trip a GFCI,,,,,
h2,8,Advice on teaching abstract algebra and logic to high-school students,,,,,
h2,8,How to prevent guerrilla warfare from existing,,,,,
h2,8,Windows 10 - Which services and Windows features and so on are unnecesary and can be safely disabled?,,,,,
h2,8,"In parliamentary democracy, how do Ministers compensate for their potential lack of relevant experience to run their own ministry?",,,,,
h2,8,Don't one-time recovery codes for 2FA introduce a backdoor?,,,,,
h2,8,How would I connect multiple ground wires in this case (replacing ceiling pendant lights)?,,,,,
h2,8,Can we calculate mean of absolute value of a random variable analytically?,,,,,
h2,8,Weird result of fitting a 2D Gauss to data,,,,,
h2,8,Was there an anomaly during SN8's ascent which later led to the crash?,,,,,
h2,8,MOSFET blowing when soft starting a motor,,,,,
h2,8,What important tools does a small tailoring outfit need?,,,,,
h2,8,"On the grand staff, does the crescendo apply to the right hand or left hand?",,,,,
h2,8,Why don’t you capture more territory in Go?,,,,,
h2,8,Use Magic Device with Robe of Stars,,,,,
h2,8,How many treble keys should I have for accordion?,,,,,
h2,8,Is it safe to disable IPv6 on my Debian server?,,,,,
h2,8,Why would a company prevent their employees from selling their pre-IPO equity?,,,,,
h2,8,Follow a linked list,,,,,
h2,8,Making A Geosynchronous Orbit Impossible,,,,,
h2,8,"I was bitten by a kitten not even a month old, what should I do?",,,,,
h2,8,Knees touching rib cage when riding in the drops,,,,,
h2,8,more hot questions,,,,,
h2,8,Question feed,,,,,
h2,8,Subscribe to RSS,,,,,
h2,8,Question feed,,,,,
h2,8,"To subscribe to this RSS feed, copy and paste this URL into your RSS reader",,,,,
h2,8,,,,,,
h2,8,Stack Overflow,,,,,
h2,8,Questions,,,,,
h2,8,Jobs,,,,,
h2,8,Developer Jobs Directory,,,,,
h2,8,Salary Calculator,,,,,
h2,8,Help,,,,,
h2,8,Mobile,,,,,
h2,8,Products,,,,,
h2,8,Teams,,,,,
h2,8,Talent,,,,,
h2,8,Advertising,,,,,
h2,8,Enterprise,,,,,
h2,8,Company,,,,,
h2,8,About,,,,,
h2,8,Press,,,,,
h2,8,Work Here,,,,,
h2,8,Legal,,,,,
h2,8,Privacy Policy,,,,,
h2,8,Contact Us,,,,,
h2,8,Stack Exchange Network,,,,,
h2,8,Technology,,,,,
h2,8,Life / Arts,,,,,
h2,8,Culture / Recreation,,,,,
h2,8,Science,,,,,
h2,8,Other,,,,,
h2,8,Stack Overflow,,,,,
h2,8,Server Fault,,,,,
h2,8,Super User,,,,,
h2,8,Web Applications,,,,,
h2,8,Ask Ubuntu,,,,,
h2,8,Webmasters,,,,,
h2,8,Game Development,,,,,
h2,8,TeX - LaTeX,,,,,
h2,8,Software Engineering,,,,,
h2,8,Unix & Linux,,,,,
h2,8,Ask Different (Apple),,,,,
h2,8,WordPress Development,,,,,
h2,8,Geographic Information Systems,,,,,
h2,8,Electrical Engineering,,,,,
h2,8,Android Enthusiasts,,,,,
h2,8,Information Security,,,,,
h2,8,Database Administrators,,,,,
h2,8,Drupal Answers,,,,,
h2,8,SharePoint,,,,,
h2,8,User Experience,,,,,
h2,8,Mathematica,,,,,
h2,8,Salesforce,,,,,
h2,8,ExpressionEngine® Answers,,,,,
h2,8,Stack Overflow em Português,,,,,
h2,8,Blender,,,,,
h2,8,Network Engineering,,,,,
h2,8,Cryptography,,,,,
h2,8,Code Review,,,,,
h2,8,Magento,,,,,
h2,8,Software Recommendations,,,,,
h2,8,Signal Processing,,,,,
h2,8,Emacs,,,,,
h2,8,Raspberry Pi,,,,,
h2,8,Stack Overflow на русском,,,,,
h2,8,Code Golf,,,,,
h2,8,Stack Overflow en español,,,,,
h2,8,Ethereum,,,,,
h2,8,Data Science,,,,,
h2,8,Arduino,,,,,
h2,8,Bitcoin,,,,,
h2,8,Software Quality Assurance & Testing,,,,,
h2,8,Sound Design,,,,,
h2,8,Windows Phone,,,,,
h2,8,more (28),,,,,
h2,8,Photography,,,,,
h2,8,Science Fiction & Fantasy,,,,,
h2,8,Graphic Design,,,,,
h2,8,Movies & TV,,,,,
h2,8,Music: Practice & Theory,,,,,
h2,8,Worldbuilding,,,,,
h2,8,Video Production,,,,,
h2,8,Seasoned Advice (cooking),,,,,
h2,8,Home Improvement,,,,,
h2,8,Personal Finance & Money,,,,,
h2,8,Academia,,,,,
h2,8,Law,,,,,
h2,8,Physical Fitness,,,,,
h2,8,Gardening & Landscaping,,,,,
h2,8,Parenting,,,,,
h2,8,more (10),,,,,
h2,8,English Language & Usage,,,,,
h2,8,Skeptics,,,,,
h2,8,Mi Yodeya (Judaism),,,,,
h2,8,Travel,,,,,
h2,8,Christianity,,,,,
h2,8,English Language Learners,,,,,
h2,8,Japanese Language,,,,,
h2,8,Chinese Language,,,,,
h2,8,French Language,,,,,
h2,8,German Language,,,,,
h2,8,Biblical Hermeneutics,,,,,
h2,8,History,,,,,
h2,8,Spanish Language,,,,,
h2,8,Islam,,,,,
h2,8,Русский язык,,,,,
h2,8,Russian Language,,,,,
h2,8,Arqade (gaming),,,,,
h2,8,Bicycles,,,,,
h2,8,Role-playing Games,,,,,
h2,8,Anime & Manga,,,,,
h2,8,Puzzling,,,,,
h2,8,Motor Vehicle Maintenance & Repair,,,,,
h2,8,Board & Card Games,,,,,
h2,8,Bricks,,,,,
h2,8,Homebrewing,,,,,
h2,8,Martial Arts,,,,,
h2,8,The Great Outdoors,,,,,
h2,8,Poker,,,,,
h2,8,Chess,,,,,
h2,8,Sports,,,,,
h2,8,more (16),,,,,
h2,8,MathOverflow,,,,,
h2,8,Mathematics,,,,,
h2,8,Cross Validated (stats),,,,,
h2,8,Theoretical Computer Science,,,,,
h2,8,Physics,,,,,
h2,8,Chemistry,,,,,
h2,8,Biology,,,,,
h2,8,Computer Science,,,,,
h2,8,Philosophy,,,,,
h2,8,Linguistics,,,,,
h2,8,Psychology & Neuroscience,,,,,
h2,8,Computational Science,,,,,
h2,8,more (10),,,,,
h2,8,Meta Stack Exchange,,,,,
h2,8,Stack Apps,,,,,
h2,8,API,,,,,
h2,8,Data,,,,,
h2,8,Blog,,,,,
h2,8,Facebook,,,,,
h2,8,Twitter,,,,,
h2,8,LinkedIn,,,,,
h2,8,Instagram,,,,,
h2,8,site design / logo © 2020 Stack Exchange Inc; user contributions licensed under cc by-sa,,,,,
h2,8,,,,,,
h2,8,rev 2020.12.10.38158,,,,,
h2,8,Stack Overflow works best with JavaScript enabled,,,,,
h2,9,Performance Tuning | Confluence Data Center and Server 7.9 | Atlassian Documentation,,,,,
h2,9,Products,,,,,
h2,9,Confluence Support,,,,,
h2,9,Documentation,,,,,
h2,9,Knowledge base,,,,,
h2,9,Resources,,,,,
h2,9,Search,,,,,
h2,9,Log in,,,,,
h2,9,View account,,,,,
h2,9,View requests,,,,,
h2,9,Log out,,,,,
h2,9,,,,,,
h2,9,,,,,,
h2,9,,,,,,
h2,9,Knowledge base,,,,,
h2,9,Products,,,,,
h2,9,Jira Software,,,,,
h2,9,Project and issue tracking,,,,,
h2,9,Jira Service Management,,,,,
h2,9,Service management and customer support,,,,,
h2,9,Jira Core,,,,,
h2,9,Manage any business project,,,,,
h2,9,Confluence,,,,,
h2,9,Document collaboration,,,,,
h2,9,Bitbucket,,,,,
h2,9,Git code management,,,,,
h2,9,See all,,,,,
h2,9,Resources,,,,,
h2,9,Documentation,,,,,
h2,9,Usage and admin help,,,,,
h2,9,Community,,,,,
h2,9,"Answers, support, and inspiration",,,,,
h2,9,Suggestions and bugs,,,,,
h2,9,Feature suggestions and bug reports,,,,,
h2,9,Marketplace,,,,,
h2,9,Product apps,,,,,
h2,9,Billing and licensing,,,,,
h2,9,Frequently asked questions,,,,,
h2,9,Log out,,,,,
h2,9,Log in to account,,,,,
h2,9,Contact support,,,,,
h2,9,Evaluator resources,,,,,
h2,9,Training & Certification,,,,,
h2,9,Cloud Migration Center,,,,,
h2,9,GDPR guides,,,,,
h2,9,Enterprise services,,,,,
h2,9,Atlassian partners,,,,,
h2,9,Developers,,,,,
h2,9,User groups,,,,,
h2,9,Automation for Jira,,,,,
h2,9,Atlassian,,,,,
h2,9,com,,,,,
h2,9,Page,,,,,
h2,9,View in Confluence,,,,,
h2,9,Edit Page,,,,,
h2,9,Viewport,,,,,
h2,9,Manage Viewport,,,,,
h2,9,Confluence,,,,,
h2,9,Dashboard,,,,,
h2,9,Space Directory,,,,,
h2,9,People Directory,,,,,
h2,9,Confluence 7.9 (Latest),,,,,
h2,9,Documentation,,,,,
h2,9,Unable to load,,,,,
h2,9,Atlassian Support,,,,,
h2,9,Confluence 7.9,,,,,
h2,9,Documentation,,,,,
h2,9,Confluence administrator's guide,,,,,
h2,9,Performance Tuning,,,,,
h2,9,Cloud,,,,,
h2,9,Data Center and Server 7.9,,,,,
h2,9,Versions,,,,,
h2,9,7.9,,,,,
h2,9,7.8,,,,,
h2,9,7.7,,,,,
h2,9,7.6,,,,,
h2,9,7.5,,,,,
h2,9,7.4,,,,,
h2,9,7.3,,,,,
h2,9,7.2,,,,,
h2,9,7.1,,,,,
h2,9,7,,,,,
h2,9,6.15,,,,,
h2,9,6.14,,,,,
h2,9,6.13,,,,,
h2,9,6.12,,,,,
h2,9,See all,,,,,
h2,9,Performance Tuning,,,,,
h2,9,Confluence administrator's guide,,,,,
h2,9,Getting Started as Confluence Administrator,,,,,
h2,9,Manage Users,,,,,
h2,9,Managing System and Marketplace Apps,,,,,
h2,9,Writing User Macros,,,,,
h2,9,Customizing your Confluence Site,,,,,
h2,9,Integrating Confluence with Other Applications,,,,,
h2,9,Managing your Confluence License,,,,,
h2,9,Managing Confluence Data,,,,,
h2,9,Configuring a Confluence Environment,,,,,
h2,9,Configuring Confluence Security,,,,,
h2,9,Configuring Confluence,,,,,
h2,9,Performance Tuning,,,,,
h2,9,Administering Collaborative Editing,,,,,
h2,9,Data Collection Policy,,,,,
h2,9,Using read-only mode for site maintenance,,,,,
h2,9,Administering the Atlassian Companion App,,,,,
h2,9,Notifications from Atlassian,,,,,
h2,9,On this page,,,,,
h2,9,In this section,,,,,
h2,9,Cache Performance Tuning,,,,,
h2,9,Memory Usage and Requirements,,,,,
h2,9,Requesting Performance Support,,,,,
h2,9,Troubleshooting Slow Performance Using Page Request Profiling,,,,,
h2,9,Compressing an HTTP Response within Confluence,,,,,
h2,9,Garbage Collector Performance Issues,,,,,
h2,9,Confluence Diagnostics,,,,,
h2,9,Related content,,,,,
h2,9,No related content found,,,,,
h2,9,Still need help?,,,,,
h2,9,The Atlassian Community is here for you,,,,,
h2,9,,,,,,
h2,9,Ask the community,,,,,
h2,9,This document describes tuning your application for improved performance,,,,,
h2,9,It is not a guide to troubleshooting Confluence outages,,,,,
h2,9,Check Troubleshooting Confluence hanging or crashing for help if Confluence is crashing,,,,,
h2,9,"Like any server application, Confluence may require some tuning as it is put under heavier use",,,,,
h2,9,"We do our best to make sure Confluence performs well under a wide variety of circumstances, but there's no single configuration that is best for everyone's environment and usage patterns",,,,,
h2,9,"If you are having problems with the performance of Confluence and need our help resolving them, you should read Requesting Performance Support",,,,,
h2,9,"Performance Data CollectorThe Performance Data Collector is a server-side, standalone application that exposes a number of REST APIs for collecting performance data",,,,,
h2,9,"It can be used to collect data, such as thread dumps, disk speed and CPU usage information, to troubleshoot performance problems",,,,,
h2,9,See How to use the Performance Data Collector for more information,,,,,
h2,9,,,,,,
h2,9,On this page:,,,,,
h2,9,Use the latest version of your toolsUse the latest versions of your application servers and Java runtime environments,,,,,
h2,9,Newer versions are usually better optimized for performance,,,,,
h2,9,Avoid swapping due to not enough RAMAlways watch the swapping activity of your server,,,,,
h2,9,"If there is not enough RAM available, your server may start swapping out some of Confluence's heap data to your hard disk",,,,,
h2,9,This will slow down the JVM's garbage collection considerably and affect Confluence's performance,,,,,
h2,9,"In clustered installations, swapping can lead to a Cluster Panic due to Performance Problems",,,,,
h2,9,"This is because swapping causes the JVM to pause during Garbage Collection, which in turn can break the inter-node communication required to keep the clustered nodes in sync",,,,,
h2,9,"Being aware of other systems using the same infrastructureIt may sound tempting: Just have one powerful server hosting your database and/or application server, and run all your crucial programs on that server",,,,,
h2,9,"If the system is set up perfectly, then you might be fine",,,,,
h2,9,"Chances are however that you are missing something, and then one application's bug might start affecting other applications",,,,,
h2,9,"So if Confluence is slow every day around noon, then maybe this is because another application is using the shared database to generate complicated reports at that time? Either make sure applications can't harm each other despite sharing the same infrastructure, or get these systems untangled, for example by moving them to separate instances that can be controlled better",,,,,
h2,9,"Choice of databaseThe embedded H2 database is provided for evaluating Confluence, not for production Confluence sites",,,,,
h2,9,"After the evaluation finishes, you must switch to a supported external database",,,,,
h2,9,"We recommend using what you are familiar with, because your ability to maintain the database will probably make far more difference to what you get out of it than the choice of database itself",,,,,
h2,9,"Database connection poolIf load on Confluence is high, you may need more simultaneous connections to the database",,,,,
h2,9,"If you are using JNDI data-sources, you will do this in your application server's configuration files",,,,,
h2,9,"If you have configured Confluence to access the database directly, you will need to manually edit the hibernate",,,,,
h2,9,c3p0,,,,,
h2,9,ax_size property in the confluence,,,,,
h2,9,cfg,,,,,
h2,9,xml file in your confluence,,,,,
h2,9,home directory,,,,,
h2,9,"After you have changed the URL in this file, restart Confluence",,,,,
h2,9,"To assess whether you need to tune your database connection pool, take thread dumps during different times (including peak usage)",,,,,
h2,9,Inspect how many threads have concurrent database connections,,,,,
h2,9,"Database in generalIf Confluence is running slowly, one of the most likely cause is that there is some kind of bottleneck in (or around) the database",,,,,
h2,9,"The first item you should check is the ""Database Latency"" field in the System Information tab in the admin console",,,,,
h2,9,,,,,,
h2,9,"The latency is calculated by sending a trivial request to the database, querying a table which is known to have only one column and one row",,,,,
h2,9,"(""select * from CLUSTERSAFETY"")",,,,,
h2,9,"Obviously this query should be blazing fast, and return within 1 or 2 milliseconds",,,,,
h2,9,"If the value displayed is between 3 and 5 milliseconds, you might already have an issue",,,,,
h2,9,"If the value is above 10ms, then you definitely need to investigate and improve something! A few milliseconds may not sound so bad, but consider that Confluence sends quite a few database queries per page request, and those queries are a lot more complex too! High latency might stem from all sorts of problems (slow network, slow database, connection-pool contention, etc), so it's up to you to investigate",,,,,
h2,9,Don't stop improving until latency is below 2ms on average,,,,,
h2,9,"Obviously, latency is just the very first thing to look at",,,,,
h2,9,"You may get zero latency and still have massive database problems, e",,,,,
h2,9,g,,,,,
h2,9,if your tables are poorly indexed,,,,,
h2,9,So don't let a low latency fool you either,,,,,
h2,9,Database statistics and query analyzersModern databases have query optimizers based on collecting statistics on the current data,,,,,
h2,9,Using the SQL EXPLAIN statement will provide you information on how well the query optimizer is performing,,,,,
h2,9,If the cost estimate is wildly inaccurate then you will need to run statistics collection on the database,,,,,
h2,9,The exact command will depend on your database and version,,,,,
h2,9,"In most cases you can run statistics collection while Confluence is running, but due to the increased load on the database it's best to do this after normal hours or on a week-end",,,,,
h2,9,"Cache tuning in Confluence and ApacheTo reduce the load on the database, and speed up many operations, Confluence keeps its own cache of data",,,,,
h2,9,"Tuning the size of this cache may speed up Confluence (if the caches are too small), or reduce memory (if the caches are too big)",,,,,
h2,9,lease have a look at our documentation on Cache Performance Tuning for information on how to tune Confluence caches,,,,,
h2,9,Antivirus softwareAntivirus software greatly decreases the performance of Confluence,,,,,
h2,9,"Antivirus software that intercepts access to the hard disk is particularly detrimental, and may even cause errors with Confluence",,,,,
h2,9,"You should configure your antivirus software to ignore the Confluence home directory, its index directory and any database-related directories",,,,,
h2,9,"Enabling HTTP compressionIf bandwidth is responsible for bottlenecking in your Confluence installation, you should consider enabling HTTP compression",,,,,
h2,9,This may also be useful when running an external facing instance to reduce your bandwidth costs,,,,,
h2,9,"Take note of the known issues with HTTP compression in versions of Confluence prior to 2.8, which may result in high memory consumption",,,,,
h2,9,Performance testingYou should try out all configuration changes on a demo system,,,,,
h2,9,"Ideally, you should run and customize loadtests that simulate user behavior",,,,,
h2,9,Access logsYou can find out which pages are slow and which users are accessing them by enabling Confluence's built-in access logging,,,,,
h2,9,Built-in profilerYou can identify the cause of page delays using Confluence's built-in profiler according to Troubleshooting Slow Performance Using Page Request Profiling,,,,,
h2,9,Application server memory settingsSee How to fix out of memory errors by increasing available memory,,,,,
h2,9,"Web server configurationFor high-load environments, performance can be improved by using a web server such as Apache in front of the application server",,,,,
h2,9,There is a configuration guide to Running Confluence behind Apache,,,,,
h2,9,"When configuring your new web server, make sure you configure sufficient threads/processes to handle the load",,,,,
h2,9,"This applies to both the web server and the application server connector, which are typically configured separately",,,,,
h2,9,"If possible, you should enable connection pooling in your web server connections to the application server",,,,,
h2,9,"Troubleshooting possible memory leaksSome external plugins, usually ones that have been written a long time ago and that are not actively maintained anymore, have been reported to consume memory and never return it",,,,,
h2,9,"Ultimately this can lead to a crash, but first this manifests as reduced performance",,,,,
h2,9,The Troubleshooting Confluence hanging or crashing guide is a good place to start,,,,,
h2,9,Some of the known causes listed there could result in performance issues short of a crash or hang,,,,,
h2,9,,,,,,
h2,9,"Last modified on Oct 15, 2018",,,,,
h2,9,Was this helpful?,,,,,
h2,9,Yes,,,,,
h2,9,No,,,,,
h2,9,It wasn't accurate,,,,,
h2,9,It wasn't clear,,,,,
h2,9,It wasn't relevant,,,,,
h2,9,Provide feedback about this article,,,,,
h2,9,In this section,,,,,
h2,9,Cache Performance Tuning,,,,,
h2,9,Memory Usage and Requirements,,,,,
h2,9,Requesting Performance Support,,,,,
h2,9,Troubleshooting Slow Performance Using Page Request Profiling,,,,,
h2,9,Compressing an HTTP Response within Confluence,,,,,
h2,9,Garbage Collector Performance Issues,,,,,
h2,9,Confluence Diagnostics,,,,,
h2,9,Related content,,,,,
h2,9,No related content found,,,,,
h2,9,Powered by Confluence and Scroll Viewport,,,,,
h2,9,,,,,,
h2,9,Atlassian,,,,,
h2,9,Privacy policy,,,,,
h2,9,Terms of use,,,,,
h2,9,Security,,,,,
h2,9,©,,,,,
h2,9,Atlassian,,,,,
h2,10,Performance,,,,,
h2,10,▲,,,,,
h2,10,Translate,,,,,
h2,10,Search:,,,,,
h2,10,Highlight keyword(s),,,,,
h2,10,Home,,,,,
h2,10,Download,,,,,
h2,10,Cheat Sheet,,,,,
h2,10,Documentation,,,,,
h2,10,Quickstart,,,,,
h2,10,Installation,,,,,
h2,10,Tutorial,,,,,
h2,10,Features,,,,,
h2,10,Performance,,,,,
h2,10,Advanced,,,,,
h2,10,Reference,,,,,
h2,10,Commands,,,,,
h2,10,Functions,,,,,
h2,10,• Aggregate,,,,,
h2,10,• Window,,,,,
h2,10,Data Types,,,,,
h2,10,SQL Grammar,,,,,
h2,10,System Tables,,,,,
h2,10,Javadoc,,,,,
h2,10,PDF (1.5 MB),,,,,
h2,10,Support,,,,,
h2,10,FAQ,,,,,
h2,10,Error Analyzer,,,,,
h2,10,Google Group (English),,,,,
h2,10,Google Group (Japanese),,,,,
h2,10,Google Group (Chinese),,,,,
h2,10,Appendix,,,,,
h2,10,History & Roadmap,,,,,
h2,10,License,,,,,
h2,10,Build,,,,,
h2,10,Links,,,,,
h2,10,MVStore,,,,,
h2,10,Architecture,,,,,
h2,10,Performance,,,,,
h2,10,Performance Comparison,,,,,
h2,10,PolePosition Benchmark,,,,,
h2,10,Database Performance Tuning,,,,,
h2,10,Using the Built-In Profiler,,,,,
h2,10,Application Profiling,,,,,
h2,10,Database Profiling,,,,,
h2,10,Statement Execution Plans,,,,,
h2,10,How Data is Stored and How Indexes Work,,,,,
h2,10,Fast Database Import,,,,,
h2,10,Performance Comparison,,,,,
h2,10,In many cases H2 is faster than other,,,,,
h2,10,(open source and not open source) database engines,,,,,
h2,10,,,,,,
h2,10,"Please note this is mostly a single connection benchmark run on one computer,",,,,,
h2,10,with many very simple operations running against the database,,,,,
h2,10,,,,,,
h2,10,This benchmark does not include very complex queries,,,,,
h2,10,,,,,,
h2,10,The embedded mode of H2 is faster than the client-server mode because,,,,,
h2,10,the per-statement overhead is greatly reduced,,,,,
h2,10,,,,,,
h2,10,Embedded,,,,,
h2,10,Test CaseUnitH2HSQLDBDerby,,,,,
h2,10,Simple: Initms101919078280,,,,,
h2,10,Simple: Query (random)ms13048731912,,,,,
h2,10,Simple: Query (sequential)ms83518395415,,,,,
h2,10,Simple: Update (sequential)ms961233321759,,,,,
h2,10,Simple: Delete (sequential)ms950192232016,,,,,
h2,10,Simple: Memory UsageMB21108,,,,,
h2,10,BenchA: Initms91921337528,,,,,
h2,10,BenchA: Transactionsms121922978541,,,,,
h2,10,BenchA: Memory UsageMB12157,,,,,
h2,10,BenchB: Initms90519938049,,,,,
h2,10,BenchB: Transactionsms10915831165,,,,,
h2,10,BenchB: Memory UsageMB17118,,,,,
h2,10,BenchC: Initms249140038064,,,,,
h2,10,BenchC: Transactionsms19798032840,,,,,
h2,10,BenchC: Memory UsageMB19229,,,,,
h2,10,Executed statements#193099519309951930995,,,,,
h2,10,Total timems1367320686105569,,,,,
h2,10,Statements per second#1412269334718291,,,,,
h2,10,Client-Server,,,,,
h2,10,Test CaseUnitH2 (Server)HSQLDBDerbyPostgreSQLMySQL,,,,,
h2,10,Simple: Initms1633817198278603015629409,,,,,
h2,10,Simple: Query (random)ms33992582619033153342,,,,,
h2,10,Simple: Query (sequential)ms2184118699423473077432611,,,,,
h2,10,Simple: Update (sequential)ms69137745285763269811350,,,,,
h2,10,Simple: Delete (sequential)ms80519751422024448016555,,,,,
h2,10,Simple: Memory UsageMB2211901,,,,,
h2,10,BenchA: Initms1299614720247222637526060,,,,,
h2,10,BenchA: Transactionsms1013410250184522145315877,,,,,
h2,10,BenchA: Memory UsageMB1315901,,,,,
h2,10,BenchB: Initms1526416889285463161029747,,,,,
h2,10,BenchB: Transactionsms30173376184227711433,,,,,
h2,10,BenchB: Memory UsageMB17121111,,,,,
h2,10,BenchC: Initms1402010407176551952017532,,,,,
h2,10,BenchC: Transactionsms50763160641160634530,,,,,
h2,10,BenchC: Memory UsageMB19211111,,,,,
h2,10,Executed statements#19309951930995193099519309951930995,,,,,
h2,10,Total timems117049114777244803249215188446,,,,,
h2,10,Statements per second#16497168237887774810246,,,,,
h2,10,Benchmark Results and Comments,,,,,
h2,10,H2,,,,,
h2,10,Version 1.4.177 (2014-04-12) was used for the test,,,,,
h2,10,,,,,,
h2,10,"For most operations, the performance of H2 is about the same as for HSQLDB",,,,,
h2,10,,,,,,
h2,10,"One situation where H2 is slow is large result sets, because they are buffered to",,,,,
h2,10,disk if more than a certain number of records are returned,,,,,
h2,10,,,,,,
h2,10,The advantage of buffering is: there is no limit on the result set size,,,,,
h2,10,,,,,,
h2,10,HSQLDB,,,,,
h2,10,Version 2.3.2 was used for the test,,,,,
h2,10,,,,,,
h2,10,Cached tables are used in this test (hsqldb,,,,,
h2,10,"default_table_type=cached),",,,,,
h2,10,and the write delay is 1 second (SET WRITE_DELAY 1),,,,,
h2,10,,,,,,
h2,10,Derby,,,,,
h2,10,Version 10.10.1.1 was used for the test,,,,,
h2,10,Derby is clearly the slowest embedded database in this test,,,,,
h2,10,,,,,,
h2,10,"This seems to be a structural problem, because all operations are really slow",,,,,
h2,10,,,,,,
h2,10,It will be hard for the developers of Derby to improve the performance to a reasonable level,,,,,
h2,10,,,,,,
h2,10,A few problems have been identified: leaving autocommit on is a problem for Derby,,,,,
h2,10,,,,,,
h2,10,"If it is switched off during the whole test, the results are about 20% better for Derby",,,,,
h2,10,,,,,,
h2,10,Derby calls FileChannel,,,,,
h2,10,"force(false), but only twice per log file (not on each commit)",,,,,
h2,10,,,,,,
h2,10,Disabling this call improves performance for Derby by about 2%,,,,,
h2,10,,,,,,
h2,10,"Unlike H2, Derby does not call FileDescriptor",,,,,
h2,10,sync() on each checkpoint,,,,,
h2,10,,,,,,
h2,10,Derby supports a testing mode (system property derby,,,,,
h2,10,system,,,,,
h2,10,durability=test),,,,,
h2,10,where durability is disabled,,,,,
h2,10,"According to the documentation, this setting should be used for testing only,",,,,,
h2,10,as the database may not recover after a crash,,,,,
h2,10,Enabling this setting improves performance,,,,,
h2,10,by a factor of 2.6 (embedded mode) or 1.4 (server mode),,,,,
h2,10,"Even if enabled, Derby is still less",,,,,
h2,10,than half as fast as H2 in default mode,,,,,
h2,10,,,,,,
h2,10,PostgreSQL,,,,,
h2,10,Version 9.1.5 was used for the test,,,,,
h2,10,,,,,,
h2,10,The following options where changed in postgresql,,,,,
h2,10,conf:,,,,,
h2,10,"fsync = off, commit_delay = 1000",,,,,
h2,10,,,,,,
h2,10,PostgreSQL is run in server mode,,,,,
h2,10,,,,,,
h2,10,"The memory usage number is incorrect, because only the memory usage of the JDBC driver is measured",,,,,
h2,10,,,,,,
h2,10,MySQL,,,,,
h2,10,Version 5.1.65-log was used for the test,,,,,
h2,10,,,,,,
h2,10,MySQL was run with the InnoDB backend,,,,,
h2,10,,,,,,
h2,10,The setting innodb_flush_log_at_trx_commit,,,,,
h2,10,(found in the my,,,,,
h2,10,ini / my,,,,,
h2,10,cnf file) was set to 0,,,,,
h2,10,"Otherwise (and by default), MySQL is slow",,,,,
h2,10,(around 140 statements per second in this test) because it tries to flush the data to disk for each commit,,,,,
h2,10,,,,,,
h2,10,For small transactions (when autocommit is on) this is really slow,,,,,
h2,10,,,,,,
h2,10,But many use cases use small or relatively small transactions,,,,,
h2,10,,,,,,
h2,10,"Too bad this setting is not listed in the configuration wizard,",,,,,
h2,10,and it always overwritten when using the wizard,,,,,
h2,10,,,,,,
h2,10,You need to change this setting manually in the file my,,,,,
h2,10,ini / my,,,,,
h2,10,"cnf, and then restart the service",,,,,
h2,10,,,,,,
h2,10,"The memory usage number is incorrect, because only the memory usage of the JDBC driver is measured",,,,,
h2,10,,,,,,
h2,10,Firebird,,,,,
h2,10,"Firebird 1.5 (default installation) was tested, but the results are not published currently",,,,,
h2,10,,,,,,
h2,10,"It is possible to run the performance test with the Firebird database,",,,,,
h2,10,and any information on how to configure Firebird for higher performance are welcome,,,,,
h2,10,,,,,,
h2,10,Why Oracle / MS SQL Server / DB2 are Not Listed,,,,,
h2,10,The license of these databases does not allow to publish benchmark results,,,,,
h2,10,,,,,,
h2,10,This doesn't mean that they are fast,,,,,
h2,10,"They are in fact quite slow,",,,,,
h2,10,and need a lot of memory,,,,,
h2,10,But you will need to test this yourself,,,,,
h2,10,,,,,,
h2,10,SQLite was not tested because the JDBC driver doesn't support transactions,,,,,
h2,10,,,,,,
h2,10,About this Benchmark,,,,,
h2,10,How to Run,,,,,
h2,10,This test was as follows:,,,,,
h2,10,build benchmark,,,,,
h2,10,Separate Process per Database,,,,,
h2,10,"For each database, a new process is started, to ensure the previous test does not impact",,,,,
h2,10,the current test,,,,,
h2,10,,,,,,
h2,10,Number of Connections,,,,,
h2,10,This is mostly a single-connection benchmark,,,,,
h2,10,,,,,,
h2,10,BenchB uses multiple connections; the other tests use one connection,,,,,
h2,10,,,,,,
h2,10,Real-World Tests,,,,,
h2,10,Good benchmarks emulate real-world use cases,,,,,
h2,10,This benchmark includes 4 test cases:,,,,,
h2,10,BenchSimple uses one table and many small updates / deletes,,,,,
h2,10,,,,,,
h2,10,"BenchA is similar to the TPC-A test, but single connection / single threaded (see also: www",,,,,
h2,10,tpc,,,,,
h2,10,org),,,,,
h2,10,,,,,,
h2,10,"BenchB is similar to the TPC-B test, using multiple connections (one thread per connection)",,,,,
h2,10,,,,,,
h2,10,"BenchC is similar to the TPC-C test, but single connection / single threaded",,,,,
h2,10,,,,,,
h2,10,Comparing Embedded with Server Databases,,,,,
h2,10,This is mainly a benchmark for embedded databases (where the application runs in the same,,,,,
h2,10,virtual machine as the database engine),,,,,
h2,10,However MySQL and PostgreSQL are not Java,,,,,
h2,10,databases and cannot be embedded into a Java application,,,,,
h2,10,,,,,,
h2,10,"For the Java databases, both embedded and server modes are tested",,,,,
h2,10,,,,,,
h2,10,Test Platform,,,,,
h2,10,This test is run on Mac OS X 10.6,,,,,
h2,10,"No virus scanner was used, and disk indexing was disabled",,,,,
h2,10,,,,,,
h2,10,The JVM used is Sun JDK 1.6,,,,,
h2,10,,,,,,
h2,10,Multiple Runs,,,,,
h2,10,"When a Java benchmark is run first, the code is not fully compiled and",,,,,
h2,10,therefore runs slower than when running multiple times,,,,,
h2,10,A benchmark,,,,,
h2,10,should always run the same test multiple times and ignore the first run(s),,,,,
h2,10,,,,,,
h2,10,"This benchmark runs three times, but only the last run is measured",,,,,
h2,10,,,,,,
h2,10,Memory Usage,,,,,
h2,10,"It is not enough to measure the time taken, the memory usage is important as well",,,,,
h2,10,,,,,,
h2,10,"Performance can be improved by using a bigger cache, but the amount of memory is limited",,,,,
h2,10,,,,,,
h2,10,HSQLDB tables are kept fully in memory by default; this benchmark,,,,,
h2,10,uses 'disk based' tables for all databases,,,,,
h2,10,,,,,,
h2,10,"Unfortunately, it is not so easy to calculate the memory usage of PostgreSQL",,,,,
h2,10,"and MySQL, because they run in a different process than the test",,,,,
h2,10,This benchmark currently,,,,,
h2,10,does not print memory usage of those databases,,,,,
h2,10,,,,,,
h2,10,Delayed Operations,,,,,
h2,10,Some databases delay some operations (for example flushing the buffers),,,,,
h2,10,until after the benchmark is run,,,,,
h2,10,This benchmark waits between,,,,,
h2,10,"each database tested, and each database runs in a different process (sequentially)",,,,,
h2,10,,,,,,
h2,10,Transaction Commit / Durability,,,,,
h2,10,Durability means transaction committed to the database will not be lost,,,,,
h2,10,,,,,,
h2,10,Some databases (for example MySQL) try to enforce this by default by,,,,,
h2,10,"calling fsync() to flush the buffers, but",,,,,
h2,10,most hard drives don't actually flush all data,,,,,
h2,10,"Calling the method slows down transaction commit a lot,",,,,,
h2,10,but doesn't always make data durable,,,,,
h2,10,"When comparing the results, it is important to",,,,,
h2,10,think about the effect,,,,,
h2,10,Many database suggest to 'batch' operations when possible,,,,,
h2,10,,,,,,
h2,10,"This benchmark switches off autocommit when loading the data, and calls commit after each 1000",,,,,
h2,10,inserts,,,,,
h2,10,However many applications need 'short' transactions at runtime (a commit after each update),,,,,
h2,10,,,,,,
h2,10,"This benchmark commits after each update / delete in the simple benchmark, and after each",,,,,
h2,10,business transaction in the other benchmarks,,,,,
h2,10,"For databases that support delayed commits,",,,,,
h2,10,a delay of one second is used,,,,,
h2,10,,,,,,
h2,10,Using Prepared Statements,,,,,
h2,10,"Wherever possible, the test cases use prepared statements",,,,,
h2,10,,,,,,
h2,10,Currently Not Tested: Startup Time,,,,,
h2,10,The startup time of a database engine is important as well for embedded use,,,,,
h2,10,,,,,,
h2,10,This time is not measured currently,,,,,
h2,10,,,,,,
h2,10,"Also, not tested is the time used to create a database and open an existing database",,,,,
h2,10,,,,,,
h2,10,"Here, one (wrapper) connection is opened at the start,",,,,,
h2,10,and for each step a new connection is opened and then closed,,,,,
h2,10,,,,,,
h2,10,PolePosition Benchmark,,,,,
h2,10,The PolePosition is an open source benchmark,,,,,
h2,10,The algorithms are all quite simple,,,,,
h2,10,,,,,,
h2,10,It was developed / sponsored by db4o,,,,,
h2,10,,,,,,
h2,10,"This test was not run for a longer time, so please be aware that the results below",,,,,
h2,10,"are for older database versions (H2 version 1.1, HSQLDB 1.8, Java 1.4)",,,,,
h2,10,,,,,,
h2,10,Test CaseUnitH2HSQLDBMySQL,,,,,
h2,10,Melbourne writems3692492022,,,,,
h2,10,Melbourne readms474993,,,,,
h2,10,Melbourne read_hotms244395,,,,,
h2,10,Melbourne deletems147133176,,,,,
h2,10,Sepang writems96512013213,,,,,
h2,10,Sepang readms7659483455,,,,,
h2,10,Sepang read_hotms7898593563,,,,,
h2,10,Sepang deletems138415966214,,,,,
h2,10,Bahrain writems118613876904,,,,,
h2,10,Bahrain query_indexed_stringms336170693,,,,,
h2,10,Bahrain query_stringms180643970341243,,,,,
h2,10,Bahrain query_indexed_intms104134678,,,,,
h2,10,Bahrain updatems19187159,,,,,
h2,10,Bahrain deletems12157296812,,,,,
h2,10,Imola retrievems1981944036,,,,,
h2,10,Barcelona writems4138323191,,,,,
h2,10,Barcelona readms1191601177,,,,,
h2,10,Barcelona queryms205169101,,,,,
h2,10,Barcelona deletems3883193287,,,,,
h2,10,Totalms267245396287112,,,,,
h2,10,There are a few problems with the PolePosition test:,,,,,
h2,10,HSQLDB uses in-memory tables by default while H2 uses persistent tables,,,,,
h2,10,The HSQLDB version,,,,,
h2,10,"included in PolePosition does not support changing this, so you need to replace",,,,,
h2,10,poleposition-0.20/lib/hsqldb,,,,,
h2,10,jar with a newer version (for example,,,,,
h2,10,hsqldb-1.8.0.7,,,,,
h2,10,"ar),",,,,,
h2,10,and then use the setting,,,,,
h2,10,hsqldb,,,,,
h2,10,connecturl=jdbc:hsqldb:file:data/hsqldb/dbbench2;hsqldb,,,,,
h2,10,default_table_type=cached;sql,,,,,
h2,10,enforce_size=true,,,,,
h2,10,in the file Jdbc,,,,,
h2,10,properties,,,,,
h2,10,,,,,,
h2,10,"HSQLDB keeps the database open between tests, while H2 closes the database (losing all the cache)",,,,,
h2,10,,,,,,
h2,10,"To change that, use the database URL jdbc:h2:file:data/h2/dbbench;DB_CLOSE_DELAY=-1",,,,,
h2,10,"The amount of cache memory is quite important, specially for the PolePosition test",,,,,
h2,10,,,,,,
h2,10,"Unfortunately, the PolePosition test does not take this into account",,,,,
h2,10,,,,,,
h2,10,Database Performance Tuning,,,,,
h2,10,Keep Connections Open or Use a Connection Pool,,,,,
h2,10,"If your application opens and closes connections a lot (for example, for each request),",,,,,
h2,10,you should consider using a,,,,,
h2,10,connection pool,,,,,
h2,10,,,,,,
h2,10,Opening a connection using DriverManager,,,,,
h2,10,getConnection is specially slow,,,,,
h2,10,if the database is closed,,,,,
h2,10,By default the database is closed if the last connection is closed,,,,,
h2,10,,,,,,
h2,10,"If you open and close connections a lot but don't want to use a connection pool,",,,,,
h2,10,"consider keeping a 'sentinel' connection open for as long as the application runs,",,,,,
h2,10,or use delayed database closing,,,,,
h2,10,See also,,,,,
h2,10,Closing a database,,,,,
h2,10,,,,,,
h2,10,Use a Modern JVM,,,,,
h2,10,Newer JVMs are faster,,,,,
h2,10,"Upgrading to the latest version of your JVM can provide a ""free"" boost to performance",,,,,
h2,10,,,,,,
h2,10,Switching from the default Client JVM to the Server JVM using the -server command-line,1,,-server,P = on,
h2,10,option improves performance at the cost of a slight increase in start-up time,,,,,
h2,10,,,,,,
h2,10,Virus Scanners,,,,,
h2,10,Some virus scanners scan files every time they are accessed,,,,,
h2,10,,,,,,
h2,10,It is very important for performance that database files are not scanned for viruses,,,,,
h2,10,,,,,,
h2,10,"The database engine never interprets the data stored in the files as programs,",,,,,
h2,10,"that means even if somebody would store a virus in a database file, this would",,,,,
h2,10,"be harmless (when the virus does not run, it cannot spread)",,,,,
h2,10,,,,,,
h2,10,Some virus scanners allow to exclude files by suffix,,,,,
h2,10,Ensure files ending with,,,,,
h2,10,b are not scanned,,,,,
h2,10,,,,,,
h2,10,Using the Trace Options,,,,,
h2,10,"If the performance hot spots are in the database engine, in many cases the performance",,,,,
h2,10,"can be optimized by creating additional indexes, or changing the schema",,,,,
h2,10,Sometimes the,,,,,
h2,10,"application does not directly generate the SQL statements, for example if an O/R mapping tool",,,,,
h2,10,is used,,,,,
h2,10,"To view the SQL statements and JDBC API calls, you can use the trace options",,,,,
h2,10,,,,,,
h2,10,"For more information, see Using the Trace Options",,,,,
h2,10,,,,,,
h2,10,Index Usage,,,,,
h2,10,This database uses indexes to improve the performance of,,,,,
h2,10,"SELECT, UPDATE, DELETE",,,,,
h2,10,,,,,,
h2,10,"If a column is used in the WHERE clause of a query, and if an index exists on this column,",,,,,
h2,10,then the index can be used,,,,,
h2,10,Multi-column indexes are used if all or the first columns of the index are used,,,,,
h2,10,,,,,,
h2,10,Both equality lookup and range scans are supported,,,,,
h2,10,,,,,,
h2,10,"Indexes are used to order result sets, but only if the condition uses the same index or no index at all",,,,,
h2,10,,,,,,
h2,10,The results are sorted in memory if required,,,,,
h2,10,,,,,,
h2,10,Indexes are created automatically for primary key and unique constraints,,,,,
h2,10,,,,,,
h2,10,"Indexes are also created for foreign key constraints, if required",,,,,
h2,10,,,,,,
h2,10,"For other columns, indexes need to be created manually using the CREATE INDEX statement",,,,,
h2,10,,,,,,
h2,10,Index Hints,,,,,
h2,10,"If you have determined that H2 is not using the optimal index for your query, you can use index hints to force",,,,,
h2,10,H2 to use specific indexes,,,,,
h2,10,,,,,,
h2,10,"SELECT * FROM TEST USE INDEX (index_name_1, index_name_2) WHERE X=1",,,,,
h2,10,Only indexes in the list will be used when choosing an index to use on the given table,,,,,
h2,10,There,,,,,
h2,10,is no significance to order in this list,,,,,
h2,10,,,,,,
h2,10,"It is possible that no index in the list is chosen, in which case a full table scan will be used",,,,,
h2,10,,,,,,
h2,10,An empty list of index names forces a full table scan to be performed,,,,,
h2,10,,,,,,
h2,10,Each index in the list must exist,,,,,
h2,10,,,,,,
h2,10,How Data is Stored Internally,,,,,
h2,10,"For persistent databases, if a table is created with a single column primary key of type BIGINT, INT, SMALLINT, TINYINT,",,,,,
h2,10,then the data of the table is organized in this way,,,,,
h2,10,"This is sometimes also called a ""clustered index"" or",,,,,
h2,10,"""index organized table""",,,,,
h2,10,,,,,,
h2,10,H2 internally stores table data and indexes in the form of b-trees,,,,,
h2,10,,,,,,
h2,10,Each b-tree stores entries as a list of unique keys (one or more columns) and data (zero or more columns),,,,,
h2,10,,,,,,
h2,10,"The table data is always organized in the form of a ""data b-tree"" with a single column key of type long",,,,,
h2,10,,,,,,
h2,10,"If a single column primary key of type BIGINT, INT, SMALLINT, TINYINT is specified when creating the table",,,,,
h2,10,"(or just after creating the table, but before inserting any rows),",,,,,
h2,10,then this column is used as the key of the data b-tree,,,,,
h2,10,,,,,,
h2,10,"If no primary key has been specified, if the primary key column is of another data type,",,,,,
h2,10,"or if the primary key contains more than one column,",,,,,
h2,10,"then a hidden auto-increment column of type BIGINT is added to the table,",,,,,
h2,10,which is used as the key for the data b-tree,,,,,
h2,10,,,,,,
h2,10,All other columns of the table are stored within the data area of this data b-tree,,,,,
h2,10,"(except for large BLOB, CLOB columns, which are stored externally)",,,,,
h2,10,,,,,,
h2,10,"For each additional index, one new ""index b-tree"" is created",,,,,
h2,10,"The key of this b-tree consists of the indexed columns,",,,,,
h2,10,plus the key of the data b-tree,,,,,
h2,10,"If a primary key is created after the table has been created, or if the primary key",,,,,
h2,10,"contains multiple column, or if the primary key is not of the data types listed above, then the primary key",,,,,
h2,10,is stored in a new index b-tree,,,,,
h2,10,,,,,,
h2,10,Optimizer,,,,,
h2,10,This database uses a cost based optimizer,,,,,
h2,10,For simple and queries and queries with medium complexity,,,,,
h2,10,"(less than 7 tables in the join), the expected cost (running time) of all possible plans is calculated,",,,,,
h2,10,and the plan with the lowest cost is used,,,,,
h2,10,"For more complex queries, the algorithm first tries",,,,,
h2,10,"all possible combinations for the first few tables, and the remaining tables added using a greedy algorithm",,,,,
h2,10,(this works well for most joins),,,,,
h2,10,Afterwards a genetic algorithm is used to test at most 2000 distinct plans,,,,,
h2,10,,,,,,
h2,10,Only left-deep plans are evaluated,,,,,
h2,10,,,,,,
h2,10,Expression Optimization,,,,,
h2,10,"After the statement is parsed, all expressions are simplified automatically if possible",,,,,
h2,10,Operations,,,,,
h2,10,are evaluated only once if all parameters are constant,,,,,
h2,10,"Functions are also optimized, but only",,,,,
h2,10,if the function is constant (always returns the same result for the same parameter values),,,,,
h2,10,,,,,,
h2,10,"If the WHERE clause is always false, then the table is not accessed at all",,,,,
h2,10,,,,,,
h2,10,COUNT(*) Optimization,,,,,
h2,10,"If the query only counts all rows of a table, then the data is not accessed",,,,,
h2,10,,,,,,
h2,10,"However, this is only possible if no WHERE clause is used, that means it only works for",,,,,
h2,10,queries of the form SELECT COUNT(*) FROM table,,,,,
h2,10,,,,,,
h2,10,Updating Optimizer Statistics / Column Selectivity,,,,,
h2,10,"When executing a query, at most one index per join can be used",,,,,
h2,10,,,,,,
h2,10,"If the same table is joined multiple times, for each join only one index is used",,,,,
h2,10,"(the same index could be used for both joins, or each join could use a different index)",,,,,
h2,10,,,,,,
h2,10,Example: for the query,,,,,
h2,10,"SELECT * FROM TEST T1, TEST T2 WHERE T1",,,,,
h2,10,AME='A' AND T2,,,,,
h2,10,D=T1,,,,,
h2,10,"D,",,,,,
h2,10,"two index can be used, in this case the index on NAME for T1 and the index on ID for T2",,,,,
h2,10,,,,,,
h2,10,"If a table has multiple indexes, sometimes more than one index could be used",,,,,
h2,10,,,,,,
h2,10,"Example: if there is a table TEST(ID, NAME, FIRSTNAME) and an index on each column,",,,,,
h2,10,"then two indexes could be used for the query SELECT * FROM TEST WHERE NAME='A' AND FIRSTNAME='B',",,,,,
h2,10,the index on NAME or the index on FIRSTNAME,,,,,
h2,10,It is not possible to use both indexes at the same time,,,,,
h2,10,,,,,,
h2,10,Which index is used depends on the selectivity of the column,,,,,
h2,10,The selectivity describes the 'uniqueness' of,,,,,
h2,10,values in a column,,,,,
h2,10,"A selectivity of 100 means each value appears only once, and a selectivity of 1 means",,,,,
h2,10,the same value appears in many or most rows,,,,,
h2,10,"For the query above, the index on NAME should be used",,,,,
h2,10,if the table contains more distinct names than first names,,,,,
h2,10,,,,,,
h2,10,The SQL statement ANALYZE can be used to automatically estimate the selectivity of the columns in the tables,,,,,
h2,10,,,,,,
h2,10,This command should be run from time to time to improve the query plans generated by the optimizer,,,,,
h2,10,,,,,,
h2,10,In-Memory (Hash) Indexes,,,,,
h2,10,"Using in-memory indexes, specially in-memory hash indexes, can speed up",,,,,
h2,10,queries and data manipulation,,,,,
h2,10,,,,,,
h2,10,In-memory indexes are automatically used,,,,,
h2,10,"for in-memory databases, but can also be created for persistent databases",,,,,
h2,10,using CREATE MEMORY TABLE,,,,,
h2,10,"In many cases,",,,,,
h2,10,the rows itself will also be kept in-memory,,,,,
h2,10,Please note this may cause memory,,,,,
h2,10,problems for large tables,,,,,
h2,10,,,,,,
h2,10,In-memory hash indexes are backed by a hash table and are usually faster than,,,,,
h2,10,regular indexes,,,,,
h2,10,"However, hash indexes only supports direct lookup (WHERE ID = ?)",,,,,
h2,10,but not range scan (WHERE ID < ?),,,,,
h2,10,"To use hash indexes, use HASH as in:",,,,,
h2,10,CREATE UNIQUE HASH INDEX and,,,,,
h2,10,CREATE TABLE,,,,,
h2,10,,,,,,
h2,10,"ID INT PRIMARY KEY HASH,",,,,,
h2,10,,,,,,
h2,10,,,,,,
h2,10,,,,,,
h2,10,Use Prepared Statements,,,,,
h2,10,"If possible, use prepared statements with parameters",,,,,
h2,10,,,,,,
h2,10,Prepared Statements and IN(,,,,,
h2,10,,,,,,
h2,10,,,,,,
h2,10,Avoid generating SQL statements with a variable size IN(,,,,,
h2,10,,,,,,
h2,10,list,,,,,
h2,10,,,,,,
h2,10,"Instead, use a prepared statement with arrays as in the following example:",,,,,
h2,10,PreparedStatement prep = conn,,,,,
h2,10,prepareStatement(,,,,,
h2,10,"""SELECT * FROM TEST WHERE ID = ANY(?)"");",,,,,
h2,10,prep,,,,,
h2,10,"setObject(1, new Object[] { ""1"", ""2"" });",,,,,
h2,10,ResultSet rs = prep,,,,,
h2,10,executeQuery();,,,,,
h2,10,Optimization Examples,,,,,
h2,10,See src/test/org/h2/samples/optimizations,,,,,
h2,10,sql for a few examples of queries,,,,,
h2,10,that benefit from special optimizations built into the database,,,,,
h2,10,,,,,,
h2,10,Cache Size and Type,,,,,
h2,10,By default the cache size of H2 is quite small,,,,,
h2,10,"Consider using a larger cache size, or enable",,,,,
h2,10,the second level soft reference cache,,,,,
h2,10,See also Cache Settings,,,,,
h2,10,,,,,,
h2,10,Data Types,,,,,
h2,10,Each data type has different storage and performance characteristics:,,,,,
h2,10,The DECIMAL/NUMERIC type is slower,,,,,
h2,10,and requires more storage than the REAL and DOUBLE types,,,,,
h2,10,,,,,,
h2,10,"Text types are slower to read, write, and compare than numeric types and generally require more storage",,,,,
h2,10,,,,,,
h2,10,See Large Objects for information on,,,,,
h2,10,BINARY vs,,,,,
h2,10,BLOB,,,,,
h2,10,and VARCHAR vs,,,,,
h2,10,CLOB performance,,,,,
h2,10,,,,,,
h2,10,Parsing and formatting takes longer for the,,,,,
h2,10,"TIME, DATE, and",,,,,
h2,10,TIMESTAMP types than the numeric types,,,,,
h2,10,,,,,,
h2,10,SMALLINT/TINYINT/BOOLEAN are not significantly smaller or faster,,,,,
h2,10,to work with than INTEGER in most modes,,,,,
h2,10,,,,,,
h2,10,Sorted Insert Optimization,,,,,
h2,10,"To reduce disk space usage and speed up table creation, an",,,,,
h2,10,optimization for sorted inserts is available,,,,,
h2,10,"When used, b-tree pages",,,,,
h2,10,are split at the insertion point,,,,,
h2,10,"To use this optimization, add SORTED",,,,,
h2,10,before the SELECT statement:,,,,,
h2,10,"CREATE TABLE TEST(ID INT PRIMARY KEY, NAME VARCHAR) AS",,,,,
h2,10,"SORTED SELECT X, SPACE(100) FROM SYSTEM_RANGE(1, 100);",,,,,
h2,10,INSERT INTO TEST,,,,,
h2,10,"SORTED SELECT X, SPACE(100) FROM SYSTEM_RANGE(101, 200);",,,,,
h2,10,Using the Built-In Profiler,,,,,
h2,10,A very simple Java profiler is built-in,,,,,
h2,10,"To use it, use the following template:",,,,,
h2,10,import org,,,,,
h2,10,h2,,,,,
h2,10,til,,,,,
h2,10,Profiler;,,,,,
h2,10,Profiler prof = new Profiler();,,,,,
h2,10,prof,,,,,
h2,10,startCollecting();,,,,,
h2,10,//,,,,,
h2,10,,,,,,
h2,10,"some long running process, at least a few seconds",,,,,
h2,10,prof,,,,,
h2,10,stopCollecting();,,,,,
h2,10,System,,,,,
h2,10,out,,,,,
h2,10,println(prof,,,,,
h2,10,getTop(3));,,,,,
h2,10,Application Profiling,,,,,
h2,10,Analyze First,,,,,
h2,10,"Before trying to optimize performance, it is important to understand where the problem is (what part of the application is slow)",,,,,
h2,10,,,,,,
h2,10,"Blind optimization or optimization based on guesses should be avoided, because usually it is not an efficient strategy",,,,,
h2,10,,,,,,
h2,10,There are various ways to analyze an application,,,,,
h2,10,Sometimes two implementations can be compared using,,,,,
h2,10,System,,,,,
h2,10,currentTimeMillis(),,,,,
h2,10,"But this does not work for complex applications with many modules, and for memory problems",,,,,
h2,10,,,,,,
h2,10,A simple way to profile an application is to use the built-in profiling tool of java,,,,,
h2,10,Example:,,,,,
h2,10,"java -Xrunhprof:cpu=samples,depth=16 com",,,,,
h2,10,acme,,,,,
h2,10,Test,,,,,
h2,10,"Unfortunately, it is only possible to profile the application from start to end",,,,,
h2,10,Another solution is to create,,,,,
h2,10,a number of full thread dumps,,,,,
h2,10,"To do that, first run jps -l to get the process id, and then",,,,,
h2,10,run jstack <pid> or kill -QUIT <pid> (Linux) or press,,,,,
h2,10,Ctrl+C (Windows),,,,,
h2,10,,,,,,
h2,10,A simple profiling tool is included in H2,,,,,
h2,10,"To use it, the application needs to be changed slightly",,,,,
h2,10,Example:,,,,,
h2,10,import org,,,,,
h2,10,h2,,,,,
h2,10,til;,,,,,
h2,10,,,,,,
h2,10,,,,,,
h2,10,,,,,,
h2,10,Profiler profiler = new Profiler();,,,,,
h2,10,profiler,,,,,
h2,10,startCollecting();,,,,,
h2,10,// application code,,,,,
h2,10,System,,,,,
h2,10,out,,,,,
h2,10,println(profiler,,,,,
h2,10,getTop(3));,,,,,
h2,10,"The profiler is built into the H2 Console tool, to analyze databases that open slowly",,,,,
h2,10,,,,,,
h2,10,"To use it, run the H2 Console, and then click on 'Test Connection'",,,,,
h2,10,,,,,,
h2,10,"Afterwards, click on ""Test successful"" and you get the most common stack traces,",,,,,
h2,10,which helps to find out why it took so long to connect,,,,,
h2,10,You will only get the stack traces,,,,,
h2,10,if opening the database took more than a few seconds,,,,,
h2,10,,,,,,
h2,10,Database Profiling,,,,,
h2,10,The ConvertTraceFile tool generates SQL statement statistics at the end of the SQL script file,,,,,
h2,10,,,,,,
h2,10,The format used is similar to the profiling data generated when using java -Xrunhprof,,,,,
h2,10,,,,,,
h2,10,"For this to work, the trace level needs to be 2 or higher (TRACE_LEVEL_FILE=2)",,,,,
h2,10,,,,,,
h2,10,"The easiest way to set the trace level is to append the setting to the database URL, for example:",,,,,
h2,10,jdbc:h2:~/test;TRACE_LEVEL_FILE=2 or jdbc:h2:tcp://localhost/~/test;TRACE_LEVEL_FILE=2,,,,,
h2,10,,,,,,
h2,10,"As an example, execute the following script using the H2 Console:",,,,,
h2,10,SET TRACE_LEVEL_FILE 2;,,,,,
h2,10,DROP TABLE IF EXISTS TEST;,,,,,
h2,10,"CREATE TABLE TEST(ID INT PRIMARY KEY, NAME VARCHAR(255));",,,,,
h2,10,"@LOOP 1000 INSERT INTO TEST VALUES(?, ?);",,,,,
h2,10,SET TRACE_LEVEL_FILE 0;,,,,,
h2,10,"After running the test case, convert the",,,,,
h2,10,race,,,,,
h2,10,db file using the ConvertTraceFile tool,,,,,
h2,10,,,,,,
h2,10,The trace file is located in the same directory as the database file,,,,,
h2,10,,,,,,
h2,10,java -cp h2*,,,,,
h2,10,ar org,,,,,
h2,10,h2,,,,,
h2,10,ools,,,,,
h2,10,ConvertTraceFile,,,,,
h2,10,"-traceFile ""~/test",,,,,
h2,10,trace,,,,,
h2,10,"db"" -script ""~/test",,,,,
h2,10,"sql""",,,,,
h2,10,The generated file test,,,,,
h2,10,sql will contain the SQL statements as well as the,,,,,
h2,10,following profiling data (results vary):,,,,,
h2,10,-----------------------------------------,,,,,
h2,10,-- SQL Statement Statistics,,,,,
h2,10,-- time: total time in milliseconds (accumulated),,,,,
h2,10,-- count: how many times the statement ran,,,,,
h2,10,-- result: total update count or row count,,,,,
h2,10,-----------------------------------------,,,,,
h2,10,-- self accu,,,,,
h2,10,time,,,,,
h2,10,count,,,,,
h2,10,result sql,,,,,
h2,10,--,,,,,
h2,10,62%,,,,,
h2,10,62%,,,,,
h2,10,158,,,,,
h2,10,1000,,,,,
h2,10,"1000 INSERT INTO TEST VALUES(?, ?);",,,,,
h2,10,--,,,,,
h2,10,37% 100%,,,,,
h2,10,93,,,,,
h2,10,1,,,,,
h2,10,0 CREATE TABLE TEST(ID INT PRIMARY KEY,,,,,
h2,10,,,,,,
h2,10,,,,,,
h2,10,--,,,,,
h2,10,0% 100%,,,,,
h2,10,0,,,,,
h2,10,1,,,,,
h2,10,0 DROP TABLE IF EXISTS TEST;,,,,,
h2,10,--,,,,,
h2,10,0% 100%,,,,,
h2,10,0,,,,,
h2,10,1,,,,,
h2,10,0 SET TRACE_LEVEL_FILE 3;,,,,,
h2,10,Statement Execution Plans,,,,,
h2,10,The SQL statement EXPLAIN displays the indexes and optimizations the database uses for a statement,,,,,
h2,10,,,,,,
h2,10,"The following statements support EXPLAIN: SELECT, UPDATE, DELETE, MERGE, INSERT",,,,,
h2,10,,,,,,
h2,10,The following query shows that the database uses the primary key index to search for rows:,,,,,
h2,10,EXPLAIN SELECT * FROM TEST WHERE ID=1;,,,,,
h2,10,SELECT,,,,,
h2,10,TEST,,,,,
h2,10,"ID,",,,,,
h2,10,TEST,,,,,
h2,10,NAME,,,,,
h2,10,FROM PUBLIC,,,,,
h2,10,TEST,,,,,
h2,10,/* PUBLIC,,,,,
h2,10,PRIMARY_KEY_2: ID = 1 */,,,,,
h2,10,WHERE ID = 1,,,,,
h2,10,"For joins, the tables in the execution plan are sorted in the order they are processed",,,,,
h2,10,,,,,,
h2,10,The following query shows the database first processes the table INVOICE (using the primary key),,,,,
h2,10,,,,,,
h2,10,"For each row, it will additionally check that the value of the column AMOUNT is larger than zero,",,,,,
h2,10,and for those rows the database will search in the table CUSTOMER (using the primary key),,,,,
h2,10,,,,,,
h2,10,The query plan contains some redundancy so it is a valid statement,,,,,
h2,10,,,,,,
h2,10,"CREATE TABLE CUSTOMER(ID IDENTITY, NAME VARCHAR);",,,,,
h2,10,"CREATE TABLE INVOICE(ID IDENTITY,",,,,,
h2,10,"CUSTOMER_ID INT REFERENCES CUSTOMER(ID),",,,,,
h2,10,AMOUNT NUMBER);,,,,,
h2,10,EXPLAIN SELECT I,,,,,
h2,10,"ID, C",,,,,
h2,10,"NAME FROM CUSTOMER C, INVOICE I",,,,,
h2,10,WHERE I,,,,,
h2,10,ID=10 AND AMOUNT>0 AND C,,,,,
h2,10,ID=I,,,,,
h2,10,CUSTOMER_ID;,,,,,
h2,10,SELECT,,,,,
h2,10,I,,,,,
h2,10,"ID,",,,,,
h2,10,C,,,,,
h2,10,NAME,,,,,
h2,10,FROM PUBLIC,,,,,
h2,10,INVOICE I,,,,,
h2,10,/* PUBLIC,,,,,
h2,10,PRIMARY_KEY_9: ID = 10 */,,,,,
h2,10,/* WHERE (I,,,,,
h2,10,ID = 10),,,,,
h2,10,AND (AMOUNT > 0),,,,,
h2,10,*/,,,,,
h2,10,INNER JOIN PUBLIC,,,,,
h2,10,CUSTOMER C,,,,,
h2,10,/* PUBLIC,,,,,
h2,10,PRIMARY_KEY_5: ID = I,,,,,
h2,10,CUSTOMER_ID */,,,,,
h2,10,ON 1=1,,,,,
h2,10,WHERE (C,,,,,
h2,10,ID = I,,,,,
h2,10,CUSTOMER_ID),,,,,
h2,10,AND ((I,,,,,
h2,10,ID = 10),,,,,
h2,10,AND (AMOUNT > 0)),,,,,
h2,10,Displaying the Scan Count,,,,,
h2,10,EXPLAIN ANALYZE additionally shows the scanned rows per table and pages read from disk per table or index,,,,,
h2,10,,,,,,
h2,10,"This will actually execute the query, unlike EXPLAIN which only prepares it",,,,,
h2,10,,,,,,
h2,10,"The following query scanned 1000 rows, and to do that had to read 85 pages from the data area of the table",,,,,
h2,10,,,,,,
h2,10,"Running the query twice will not list the pages read from disk, because they are now in the cache",,,,,
h2,10,,,,,,
h2,10,The tableScan means this query doesn't use an index,,,,,
h2,10,,,,,,
h2,10,EXPLAIN ANALYZE SELECT * FROM TEST;,,,,,
h2,10,SELECT,,,,,
h2,10,TEST,,,,,
h2,10,"ID,",,,,,
h2,10,TEST,,,,,
h2,10,NAME,,,,,
h2,10,FROM PUBLIC,,,,,
h2,10,TEST,,,,,
h2,10,/* PUBLIC,,,,,
h2,10,TEST,,,,,
h2,10,tableScan */,,,,,
h2,10,/* scanCount: 1000 */,,,,,
h2,10,/*,,,,,
h2,10,total: 85,,,,,
h2,10,TEST,,,,,
h2,10,TEST_DATA read: 85 (100%),,,,,
h2,10,*/,,,,,
h2,10,The cache will prevent the pages are read twice,,,,,
h2,10,H2 reads all columns of the row,,,,,
h2,10,unless only the columns in the index are read,,,,,
h2,10,"Except for large CLOB and BLOB, which are not store in the table",,,,,
h2,10,,,,,,
h2,10,Special Optimizations,,,,,
h2,10,"For certain queries, the database doesn't need to read all rows, or doesn't need to sort the result even if ORDER BY is used",,,,,
h2,10,,,,,,
h2,10,"For queries of the form SELECT COUNT(*), MIN(ID), MAX(ID) FROM TEST, the query plan includes the line",,,,,
h2,10,/* direct lookup */ if the data can be read from an index,,,,,
h2,10,,,,,,
h2,10,"For queries of the form SELECT DISTINCT CUSTOMER_ID FROM INVOICE, the query plan includes the line",,,,,
h2,10,"/* distinct */ if there is an non-unique or multi-column index on this column, and if this column has a low selectivity",,,,,
h2,10,,,,,,
h2,10,"For queries of the form SELECT * FROM TEST ORDER BY ID, the query plan includes the line",,,,,
h2,10,/* index sorted */ to indicate there is no separate sorting required,,,,,
h2,10,,,,,,
h2,10,"For queries of the form SELECT * FROM TEST GROUP BY ID ORDER BY ID, the query plan includes the line",,,,,
h2,10,/* group sorted */ to indicate there is no separate sorting required,,,,,
h2,10,,,,,,
h2,10,How Data is Stored and How Indexes Work,,,,,
h2,10,"Internally, each row in a table is identified by a unique number, the row id",,,,,
h2,10,,,,,,
h2,10,The rows of a table are stored with the row id as the key,,,,,
h2,10,,,,,,
h2,10,The row id is a number of type long,,,,,
h2,10,,,,,,
h2,10,"If a table has a single column primary key of type INT or BIGINT,",,,,,
h2,10,"then the value of this column is the row id, otherwise the database generates the row id automatically",,,,,
h2,10,,,,,,
h2,10,There is a (non-standard) way to access the row id: using the _ROWID_ pseudo-column:,,,,,
h2,10,"CREATE TABLE ADDRESS(FIRST_NAME VARCHAR,",,,,,
h2,10,"NAME VARCHAR, CITY VARCHAR, PHONE VARCHAR);",,,,,
h2,10,"INSERT INTO ADDRESS VALUES('John', 'Miller', 'Berne', '123 456 789');",,,,,
h2,10,"INSERT INTO ADDRESS VALUES('Philip', 'Jones', 'Berne', '123 012 345');",,,,,
h2,10,"SELECT _ROWID_, * FROM ADDRESS;",,,,,
h2,10,The data is stored in the database as follows:,,,,,
h2,10,_ROWID_FIRST_NAMENAMECITYPHONE,,,,,
h2,10,1JohnMillerBerne123 456 789,,,,,
h2,10,2PhilipJonesBerne123 012 345,,,,,
h2,10,Access by row id is fast because the data is sorted by this key,,,,,
h2,10,,,,,,
h2,10,"Please note the row id is not available until after the row was added (that means, it can not be used in computed columns or constraints)",,,,,
h2,10,,,,,,
h2,10,"If the query condition does not contain the row id (and if no other index can be used), then all rows of the table are scanned",,,,,
h2,10,,,,,,
h2,10,"A table scan iterates over all rows in the table, in the order of the row id",,,,,
h2,10,,,,,,
h2,10,"To find out what strategy the database uses to retrieve the data, use EXPLAIN SELECT:",,,,,
h2,10,SELECT * FROM ADDRESS WHERE NAME = 'Miller';,,,,,
h2,10,EXPLAIN SELECT PHONE FROM ADDRESS WHERE NAME = 'Miller';,,,,,
h2,10,SELECT,,,,,
h2,10,PHONE,,,,,
h2,10,FROM PUBLIC,,,,,
h2,10,ADDRESS,,,,,
h2,10,/* PUBLIC,,,,,
h2,10,ADDRESS,,,,,
h2,10,tableScan */,,,,,
h2,10,WHERE NAME = 'Miller';,,,,,
h2,10,Indexes,,,,,
h2,10,"An index internally is basically just a table that contains the indexed column(s), plus the row id:",,,,,
h2,10,"CREATE INDEX INDEX_PLACE ON ADDRESS(CITY, NAME, FIRST_NAME);",,,,,
h2,10,"In the index, the data is sorted by the indexed columns",,,,,
h2,10,,,,,,
h2,10,So this index contains the following data:,,,,,
h2,10,CITYNAMEFIRST_NAME_ROWID_,,,,,
h2,10,BerneJonesPhilip2,,,,,
h2,10,BerneMillerJohn1,,,,,
h2,10,"When the database uses an index to query the data, it searches the index for the given data,",,,,,
h2,10,and (if required) reads the remaining columns in the main data table (retrieved using the row id),,,,,
h2,10,,,,,,
h2,10,"An index on city, name, and first name (multi-column index) allows to quickly search for rows when the city, name, and first name are known",,,,,
h2,10,,,,,,
h2,10,"If only the city and name, or only the city is known, then this index is also used (so creating an additional index on just the city is not needed)",,,,,
h2,10,,,,,,
h2,10,"This index is also used when reading all rows, sorted by the indexed columns",,,,,
h2,10,,,,,,
h2,10,"However, if only the first name is known, then this index is not used:",,,,,
h2,10,EXPLAIN SELECT PHONE FROM ADDRESS,,,,,
h2,10,WHERE CITY = 'Berne' AND NAME = 'Miller',,,,,
h2,10,AND FIRST_NAME = 'John';,,,,,
h2,10,SELECT,,,,,
h2,10,PHONE,,,,,
h2,10,FROM PUBLIC,,,,,
h2,10,ADDRESS,,,,,
h2,10,/* PUBLIC,,,,,
h2,10,INDEX_PLACE: FIRST_NAME = 'John',,,,,
h2,10,AND CITY = 'Berne',,,,,
h2,10,AND NAME = 'Miller',,,,,
h2,10,*/,,,,,
h2,10,WHERE (FIRST_NAME = 'John'),,,,,
h2,10,AND ((CITY = 'Berne'),,,,,
h2,10,AND (NAME = 'Miller'));,,,,,
h2,10,EXPLAIN SELECT PHONE FROM ADDRESS WHERE CITY = 'Berne';,,,,,
h2,10,SELECT,,,,,
h2,10,PHONE,,,,,
h2,10,FROM PUBLIC,,,,,
h2,10,ADDRESS,,,,,
h2,10,/* PUBLIC,,,,,
h2,10,INDEX_PLACE: CITY = 'Berne' */,,,,,
h2,10,WHERE CITY = 'Berne';,,,,,
h2,10,"EXPLAIN SELECT * FROM ADDRESS ORDER BY CITY, NAME, FIRST_NAME;",,,,,
h2,10,SELECT,,,,,
h2,10,ADDRESS,,,,,
h2,10,"FIRST_NAME,",,,,,
h2,10,ADDRESS,,,,,
h2,10,"NAME,",,,,,
h2,10,ADDRESS,,,,,
h2,10,"CITY,",,,,,
h2,10,ADDRESS,,,,,
h2,10,PHONE,,,,,
h2,10,FROM PUBLIC,,,,,
h2,10,ADDRESS,,,,,
h2,10,/* PUBLIC,,,,,
h2,10,INDEX_PLACE */,,,,,
h2,10,"ORDER BY 3, 2, 1",,,,,
h2,10,/* index sorted */;,,,,,
h2,10,EXPLAIN SELECT PHONE FROM ADDRESS WHERE FIRST_NAME = 'John';,,,,,
h2,10,SELECT,,,,,
h2,10,PHONE,,,,,
h2,10,FROM PUBLIC,,,,,
h2,10,ADDRESS,,,,,
h2,10,/* PUBLIC,,,,,
h2,10,ADDRESS,,,,,
h2,10,tableScan */,,,,,
h2,10,WHERE FIRST_NAME = 'John';,,,,,
h2,10,"If your application often queries the table for a phone number, then it makes sense to create",,,,,
h2,10,an additional index on it:,,,,,
h2,10,CREATE INDEX IDX_PHONE ON ADDRESS(PHONE);,,,,,
h2,10,"This index contains the phone number, and the row id:",,,,,
h2,10,PHONE_ROWID_,,,,,
h2,10,123 012 3452,,,,,
h2,10,123 456 7891,,,,,
h2,10,Using Multiple Indexes,,,,,
h2,10,"Within a query, only one index per logical table is used",,,,,
h2,10,,,,,,
h2,10,Using the condition PHONE = '123 567 789' OR CITY = 'Berne',,,,,
h2,10,would use a table scan instead of first using the index on the phone number and then the index on the city,,,,,
h2,10,,,,,,
h2,10,It makes sense to write two queries and combine then using UNION,,,,,
h2,10,,,,,,
h2,10,"In this case, each individual query uses a different index:",,,,,
h2,10,EXPLAIN SELECT NAME FROM ADDRESS WHERE PHONE = '123 567 789',,,,,
h2,10,UNION SELECT NAME FROM ADDRESS WHERE CITY = 'Berne';,,,,,
h2,10,(SELECT,,,,,
h2,10,NAME,,,,,
h2,10,FROM PUBLIC,,,,,
h2,10,ADDRESS,,,,,
h2,10,/* PUBLIC,,,,,
h2,10,IDX_PHONE: PHONE = '123 567 789' */,,,,,
h2,10,WHERE PHONE = '123 567 789'),,,,,
h2,10,UNION,,,,,
h2,10,(SELECT,,,,,
h2,10,NAME,,,,,
h2,10,FROM PUBLIC,,,,,
h2,10,ADDRESS,,,,,
h2,10,/* PUBLIC,,,,,
h2,10,INDEX_PLACE: CITY = 'Berne' */,,,,,
h2,10,WHERE CITY = 'Berne'),,,,,
h2,10,Fast Database Import,,,,,
h2,10,"To speed up large imports, consider using the following options temporarily:",,,,,
h2,10,SET LOG 0 (disabling the transaction log),1,,LOG,P = 0,
h2,10,SET CACHE_SIZE (a large cache is faster),,,,,
h2,10,SET LOCK_MODE 0 (disable locking),1,,LOCK_MODE,P = 0,
h2,10,SET UNDO_LOG 0 (disable the session undo log),1,,UNDO_LOG,P = 0,
h2,10,These options can be set in the database URL:,,,,,
h2,10,jdbc:h2:~/test;LOG=0;CACHE_SIZE=65536;LOCK_MODE=0;UNDO_LOG=0,,,,,
h2,10,,,,,,
h2,10,"Most of those options are not recommended for regular use, that means you need to reset them after use",,,,,
h2,10,,,,,,
h2,10,"If you have to import a lot of rows, use a PreparedStatement or use CSV import",,,,,
h2,10,,,,,,
h2,10,Please note that CREATE TABLE(,,,,,
h2,10,,,,,,
h2,10,,,,,,
h2,10,,,,,,
h2,10,AS SELECT,,,,,
h2,10,,,,,,
h2,10,,,,,,
h2,10,is faster than CREATE TABLE(,,,,,
h2,10,,,,,,
h2,10,; INSERT INTO,,,,,
h2,10,,,,,,
h2,10,SELECT,,,,,
h2,10,,,,,,
h2,10,,,,,,
h2,1,H2 performance tuning - IliaChemodanov,,,,,
h2,1,ru,,,,,
h2,1,HomeBlogBy categoriesArchiveAbout AuthorContactsCertificatesPublicationsEducation,,,,,
h2,1,Go,,,,,
h2,1,Java,,,,,
h2,1,JAXB,,,,,
h2,1,JSF,,,,,
h2,1,JAX-WS,,,,,
h2,1,Tools,,,,,
h2,1,GlassFish,,,,,
h2,1,Maven,,,,,
h2,1,Ant,,,,,
h2,1,Databases,,,,,
h2,1,C#,,,,,
h2,1,C++,,,,,
h2,1,Web,,,,,
h2,1,Joomla,,,,,
h2,1,ant apache bash boost c sharp cpp css database glassfish h2database hotspot idea java javascript jax-ws jaxb joomla jquery jsf junit maven mongodb netbeans nosql oracle rich-faces rman solaris sql sqlplus tools web wsdl xml zfs,,,,,
h2,1,BlogDatabasesH2 performance tuning,,,,,
h2,1,H2 performance tuning,,,,,
h2,1,18 November 2012,,,,,
h2,1,H2 database engine is,,,,,
h2,1,fast enough,,,,,
h2,1,But in my case its,,,,,
h2,1,performance was not as good as I wished,,,,,
h2,1,This article is about my experience of speed improvements of H2 (version,,,,,
h2,1,1.3.169),,,,,
h2,1,,,,,,
h2,1,"In an application where H2 was used, the database size was small (on the drive it takes about 100 MB), but it received a",,,,,
h2,1,quite large number of concurrent requests (about 10-15 queries per second),,,,,
h2,1,,,,,,
h2,1,"Of course, first I profiled the application and the database system (next I will call it just database for short) -",,,,,
h2,1,H2 has a good tool for this,,,,,
h2,1,,,,,,
h2,1,"The results showed that 50% of time database spends on executing a quite complex SELECT-query, which contains two subqueries,",,,,,
h2,1,"where the first one joins 5 tables, and another - 7 tables",,,,,
h2,1,"So I test ongoing optimizations, mostly on this query",,,,,
h2,1,,,,,,
h2,1,Indexes,,,,,
h2,1,This is the first thing advised to make by the,,,,,
h2,1,H2 documentation,,,,,
h2,1,,,,,,
h2,1,"To Learn exactly which indexes are missing, you should use the keyword EXPLAIN ANALYZE before",,,,,
h2,1,the query:,,,,,
h2,1,EXPLAIN ANALYZE SELECT * FROM MY_TABLE WHERE NAME = 'Some Name';,,,,,
h2,1,"If an index is not used, the output contains the word tableScan:",,,,,
h2,1,SELECT,,,,,
h2,1,MY_TABLE,,,,,
h2,1,"ID,",,,,,
h2,1,MY_TABLE,,,,,
h2,1,NAME,,,,,
h2,1,FROM PUBLIC,,,,,
h2,1,MY_TABLE,,,,,
h2,1,/* PUBLIC,,,,,
h2,1,MY_TABLE,,,,,
h2,1,tableScan */,,,,,
h2,1,/* WHERE NAME = 'Some Name',,,,,
h2,1,*/,,,,,
h2,1,/* scanCount: 42 */,,,,,
h2,1,WHERE NAME = 'Some Name',,,,,
h2,1,After adding an index to the column NAME:,,,,,
h2,1,CREATE INDEX INDEX1 ON MY_TABLE(NAME);,,,,,
h2,1,Query execution plan has changed (now the index is applied):,,,,,
h2,1,SELECT,,,,,
h2,1,MY_TABLE,,,,,
h2,1,"ID,",,,,,
h2,1,MY_TABLE,,,,,
h2,1,NAME,,,,,
h2,1,FROM PUBLIC,,,,,
h2,1,MY_TABLE,,,,,
h2,1,/* PUBLIC,,,,,
h2,1,INDEX1: NAME = 'Some Name' */,,,,,
h2,1,/* WHERE NAME = 'Some Name',,,,,
h2,1,*/,,,,,
h2,1,/* scanCount: 3 */,,,,,
h2,1,WHERE NAME = 'Some Name',,,,,
h2,1,"Usually indexes significantly improve the speed of data retrieval - in my case, the query (because of additional indexes)",,,,,
h2,1,became faster by 2-3 times,,,,,
h2,1,,,,,,
h2,1,H2 options,,,,,
h2,1,H2 has a number of settings that can improve performance (proposed by default),,,,,
h2,1,Almost all available options,,,,,
h2,1,(except CACHE_TYPE) can be found,,,,,
h2,1,here or by the query:,,,,,
h2,1,select * from information_schema,,,,,
h2,1,settings,,,,,
h2,1,"Some additional parameters can be found there,",,,,,
h2,1,and also there,,,,,
h2,1,,,,,,
h2,1,"Depending on the option, it can be changed or when connecting to the database, such as:",,,,,
h2,1,Connection c = DriverManager,,,,,
h2,1,"getConnection(""jdbc:h2:mydatabase;CACHE_SIZE=8192"");",,,,,
h2,1,Or by using the command SET (after connection to the database):,,,,,
h2,1,SET CACHE_SIZE 8192,,,,,
h2,1,Both ways are available for the most settings,,,,,
h2,1,,,,,,
h2,1,Cache,,,,,
h2,1,As stated in the documentation H2 caches most frequently,,,,,
h2,1,used data in the main memory,,,,,
h2,1,"If the cache size is not sufficient to fulfill the request, the same data will be read from disk several",,,,,
h2,1,times,,,,,
h2,1,Therefore the size of cache also affects the first execution of a query (if processing requires reading large enough amount of data,,,,,
h2,1,from the disk),,,,,
h2,1,,,,,,
h2,1,The cache size is set by the option CACHE_SIZE in kilobytes,,,,,
h2,1,and defaults to 16384 (16MB),,,,,
h2,1,"In my case, this was not enough - increasing the cache twice (up to 32 MB), I got the performance increment",1,9752,CACHE_SIZE,P = 32 MB,
h2,1,"in the area of 62%, which is more than 2 times faster",,,,,
h2,1,,,,,,
h2,1,"H2 also allows to choose the caching algorithm: LRU (is used by default),",,,,,
h2,1,SOFT_LRU or TQ,,,,,
h2,1,This can be done using the option,,,,,
h2,1,CACHE_TYPE,,,,,
h2,1,"As recommended in the documentation, I tried all three algorithms - and it turned out that",,,,,
h2,1,TQ is a bit faster - about 2-4%,1,9760,CACHE_TYPE,P = TQ,
h2,1,,,,,,
h2,1,The number of cached queries for the session is specified using the option,,,,,
h2,1,QUERY_CACHE_SIZE,,,,,
h2,1,"The default value is 8,",,,,,
h2,1,"which is not much, and probably it will require to increase",,,,,
h2,1,,,,,,
h2,1,"There are a number of options (MAX_MEMORY_ROWS,",,,,,
h2,1,MAX_MEMORY_UNDO and,,,,,
h2,1,"MAX_OPERATION_MEMORY) related to caching, which",,,,,
h2,1,"can speed up the database, but in my case, the increase in their values did not improve the performance",,,,,
h2,1,,,,,,
h2,1,MVCC setting,,,,,
h2,1,"This feature, as described in documentation, provides higher",,,,,
h2,1,concurrency for modification operations and is disabled by default,,,,,
h2,1,,,,,,
h2,1,"In my case, if you turn off this setting, the application stops working correctly because of the many queries",1,9774,MVCC,P != off,
h2,1,exceeded the timeout,,,,,
h2,1,,,,,,
h2,1,"On the other hand, if there are a small number of concurrent queries, then probably it is not necessary to turn on this option, because",,,,,
h2,1,"when it is turned on, single queries start to run slower around 45%, as shown by my tests",,,,,
h2,1,,,,,,
h2,1,EARLY_FILTER option,,,,,
h2,1,Setting EARLY_FILTER allows table,,,,,
h2,1,implementations to apply filter conditions early on,,,,,
h2,1,By default this option is set to false,,,,,
h2,1,,,,,,
h2,1,"After the setting was enabled, the speed of SELECT-queries increased by approximately 53%",1,9785,EARLY_FILTER,P = on,
h2,1,,,,,,
h2,1,Page and file sizes,,,,,
h2,1,"As almost all databases, H2 divides memory into the pages",,,,,
h2,1,By default,,,,,
h2,1,"page size (option PAGE_SIZE) is equal to 2 kilobytes, which at first",,,,,
h2,1,"glance seems to be insufficient (for instance, in MySQL",,,,,
h2,1,"the default page size is 16 KB), but increasing the PAGE_SIZE value (I tried 4, 8, 16 and 32 KB) does",1,9794,PAGE_SIZE,P <= 2 KB,
h2,1,"not improve performance (and even makes it worse), as well as increases the size of the data files on disk",,,,,
h2,1,"Thus, the default value of",,,,,
h2,1,this option unlikely will require changes,,,,,
h2,1,,,,,,
h2,1,H2 provides possibility to select,,,,,
h2,1,file system implementation,,,,,
h2,1,,,,,,
h2,1,"In some cases, it can also improve performance",,,,,
h2,1,"For example, under the operating system",,,,,
h2,1,Microsoft Windows 7 (x64) my tests showed that nio improves the database,1,9802,File system,P = nio,OS = windows
h2,1,performance by 3-4% compared to the default implementation of the file system (RandomAccessFile),,,,,
h2,1,,,,,,
h2,1,"At the same time, under Oracle Solaris 11 (x64) files with random access work as quickly as",,,,,
h2,1,nio,,,,,
h2,1,,,,,,
h2,1,Yet another opportunity to influence on the database performance is,,,,,
h2,1,splitting it into multiple files (by default all data is,,,,,
h2,1,stored in a single file),,,,,
h2,1,This can be done by using the following path to the database:,,,,,
h2,1,jdbc:h2:split:n:fileName - then the data will be splitted into the files with size,,,,,
h2,1,2n bytes,,,,,
h2,1,"My tests showed, that splitting all data on files with size of 16 MB",,,,,
h2,1,(jdbc:h2:split:24:fileName) improved its speed under Microsoft Windows 7 (x64),1,,split,P = 24,OS = Windows 7
h2,1,"by 4-7%, but under Oracle Solaris 11 (x64) on the contrary speed dropped to 5-6% compared to the default",,,,,
h2,1,setting (when the database is stored in a single file),,,,,
h2,1,,,,,,
h2,1,Option WRITE_DELAY defines a maximum delay in milliseconds,,,,,
h2,1,between the end of a transaction and its recording to the disk,,,,,
h2,1,"By default, its value is 500 ms - and it seems optimal (I tried",1,9823,WRITE_DELAY,P = 500 ms,
h2,1,"200, 1000 and 2000 ms, but the speed of database has not improved)",,,,,
h2,1,,,,,,
h2,1,Conclusion,,,,,
h2,1,H2 has enough options to improve its performance,,,,,
h2,1,They help to speed up the database by several times,,,,,
h2,1,It should be noted that specific,,,,,
h2,1,"values of many options depend on the specifics of the application, used software and hardware - and therefore they should be picked up",,,,,
h2,1,using appropriate tests,,,,,
h2,1,,,,,,
h2,1,Copyright © 2012-2020 Ilia Chemodanov,,,,,
h2,1,,,,,,
h2,1,,,,,,